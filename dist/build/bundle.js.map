{"version":3,"file":"bundle.js","sources":["../../node_modules/svelte/internal/index.mjs","../../node_modules/svelte/store/index.mjs","../../src/store.js","../../node_modules/d3-array/src/ascending.js","../../node_modules/d3-array/src/bisector.js","../../node_modules/d3-array/src/bisect.js","../../node_modules/d3-array/src/number.js","../../node_modules/d3-array/src/extent.js","../../node_modules/d3-array/src/ticks.js","../../node_modules/d3-array/src/max.js","../../node_modules/d3-axis/src/array.js","../../node_modules/d3-axis/src/identity.js","../../node_modules/d3-axis/src/axis.js","../../node_modules/d3-dispatch/src/dispatch.js","../../node_modules/d3-selection/src/namespaces.js","../../node_modules/d3-selection/src/namespace.js","../../node_modules/d3-selection/src/creator.js","../../node_modules/d3-selection/src/selector.js","../../node_modules/d3-selection/src/array.js","../../node_modules/d3-selection/src/selectorAll.js","../../node_modules/d3-selection/src/matcher.js","../../node_modules/d3-selection/src/selection/selectChild.js","../../node_modules/d3-selection/src/selection/selectChildren.js","../../node_modules/d3-selection/src/selection/sparse.js","../../node_modules/d3-selection/src/selection/enter.js","../../node_modules/d3-selection/src/constant.js","../../node_modules/d3-selection/src/selection/data.js","../../node_modules/d3-selection/src/selection/sort.js","../../node_modules/d3-selection/src/selection/attr.js","../../node_modules/d3-selection/src/window.js","../../node_modules/d3-selection/src/selection/style.js","../../node_modules/d3-selection/src/selection/property.js","../../node_modules/d3-selection/src/selection/classed.js","../../node_modules/d3-selection/src/selection/text.js","../../node_modules/d3-selection/src/selection/html.js","../../node_modules/d3-selection/src/selection/raise.js","../../node_modules/d3-selection/src/selection/lower.js","../../node_modules/d3-selection/src/selection/insert.js","../../node_modules/d3-selection/src/selection/remove.js","../../node_modules/d3-selection/src/selection/clone.js","../../node_modules/d3-selection/src/selection/on.js","../../node_modules/d3-selection/src/selection/dispatch.js","../../node_modules/d3-selection/src/selection/index.js","../../node_modules/d3-selection/src/select.js","../../node_modules/d3-selection/src/pointer.js","../../node_modules/d3-selection/src/sourceEvent.js","../../node_modules/d3-selection/src/selectAll.js","../../node_modules/d3-drag/src/noevent.js","../../node_modules/d3-drag/src/nodrag.js","../../node_modules/d3-selection/src/selection/select.js","../../node_modules/d3-selection/src/selection/selectAll.js","../../node_modules/d3-selection/src/selection/filter.js","../../node_modules/d3-selection/src/selection/exit.js","../../node_modules/d3-selection/src/selection/join.js","../../node_modules/d3-selection/src/selection/merge.js","../../node_modules/d3-selection/src/selection/order.js","../../node_modules/d3-selection/src/selection/call.js","../../node_modules/d3-selection/src/selection/nodes.js","../../node_modules/d3-selection/src/selection/node.js","../../node_modules/d3-selection/src/selection/size.js","../../node_modules/d3-selection/src/selection/empty.js","../../node_modules/d3-selection/src/selection/each.js","../../node_modules/d3-selection/src/selection/append.js","../../node_modules/d3-selection/src/selection/datum.js","../../node_modules/d3-selection/src/selection/iterator.js","../../node_modules/d3-drag/src/constant.js","../../node_modules/d3-drag/src/event.js","../../node_modules/d3-drag/src/drag.js","../../node_modules/d3-color/src/define.js","../../node_modules/d3-color/src/color.js","../../node_modules/d3-color/src/math.js","../../node_modules/d3-color/src/lab.js","../../node_modules/d3-interpolate/src/constant.js","../../node_modules/d3-interpolate/src/color.js","../../node_modules/d3-interpolate/src/rgb.js","../../node_modules/d3-interpolate/src/numberArray.js","../../node_modules/d3-interpolate/src/array.js","../../node_modules/d3-interpolate/src/date.js","../../node_modules/d3-interpolate/src/number.js","../../node_modules/d3-interpolate/src/object.js","../../node_modules/d3-interpolate/src/string.js","../../node_modules/d3-interpolate/src/value.js","../../node_modules/d3-interpolate/src/round.js","../../node_modules/d3-interpolate/src/transform/decompose.js","../../node_modules/d3-interpolate/src/transform/parse.js","../../node_modules/d3-interpolate/src/transform/index.js","../../node_modules/d3-interpolate/src/zoom.js","../../node_modules/d3-timer/src/timer.js","../../node_modules/d3-timer/src/timeout.js","../../node_modules/d3-transition/src/transition/schedule.js","../../node_modules/d3-transition/src/interrupt.js","../../node_modules/d3-transition/src/transition/tween.js","../../node_modules/d3-transition/src/transition/interpolate.js","../../node_modules/d3-transition/src/transition/attr.js","../../node_modules/d3-transition/src/transition/attrTween.js","../../node_modules/d3-transition/src/transition/delay.js","../../node_modules/d3-transition/src/transition/duration.js","../../node_modules/d3-transition/src/transition/ease.js","../../node_modules/d3-transition/src/transition/on.js","../../node_modules/d3-transition/src/transition/selection.js","../../node_modules/d3-transition/src/transition/style.js","../../node_modules/d3-transition/src/transition/styleTween.js","../../node_modules/d3-transition/src/transition/textTween.js","../../node_modules/d3-transition/src/transition/index.js","../../node_modules/d3-ease/src/quad.js","../../node_modules/d3-ease/src/cubic.js","../../node_modules/d3-transition/src/transition/select.js","../../node_modules/d3-transition/src/transition/selectAll.js","../../node_modules/d3-transition/src/transition/filter.js","../../node_modules/d3-transition/src/transition/merge.js","../../node_modules/d3-transition/src/transition/transition.js","../../node_modules/d3-transition/src/transition/text.js","../../node_modules/d3-transition/src/transition/remove.js","../../node_modules/d3-transition/src/transition/easeVarying.js","../../node_modules/d3-transition/src/transition/end.js","../../node_modules/d3-transition/src/selection/transition.js","../../node_modules/d3-transition/src/selection/index.js","../../node_modules/d3-transition/src/selection/interrupt.js","../../node_modules/d3-path/src/path.js","../../node_modules/d3-fetch/src/json.js","../../node_modules/d3-quadtree/src/add.js","../../node_modules/d3-quadtree/src/quad.js","../../node_modules/d3-quadtree/src/x.js","../../node_modules/d3-quadtree/src/y.js","../../node_modules/d3-quadtree/src/quadtree.js","../../node_modules/d3-force/src/constant.js","../../node_modules/d3-force/src/jiggle.js","../../node_modules/d3-force/src/collide.js","../../node_modules/d3-force/src/link.js","../../node_modules/d3-quadtree/src/cover.js","../../node_modules/d3-quadtree/src/data.js","../../node_modules/d3-quadtree/src/extent.js","../../node_modules/d3-quadtree/src/find.js","../../node_modules/d3-quadtree/src/remove.js","../../node_modules/d3-quadtree/src/root.js","../../node_modules/d3-quadtree/src/size.js","../../node_modules/d3-quadtree/src/visit.js","../../node_modules/d3-quadtree/src/visitAfter.js","../../node_modules/d3-force/src/lcg.js","../../node_modules/d3-force/src/simulation.js","../../node_modules/d3-force/src/x.js","../../node_modules/d3-force/src/y.js","../../node_modules/d3-format/src/formatDecimal.js","../../node_modules/d3-format/src/exponent.js","../../node_modules/d3-format/src/formatSpecifier.js","../../node_modules/d3-format/src/formatPrefixAuto.js","../../node_modules/d3-format/src/formatRounded.js","../../node_modules/d3-format/src/formatTypes.js","../../node_modules/d3-format/src/identity.js","../../node_modules/d3-format/src/locale.js","../../node_modules/d3-format/src/defaultLocale.js","../../node_modules/d3-format/src/formatGroup.js","../../node_modules/d3-format/src/formatNumerals.js","../../node_modules/d3-format/src/formatTrim.js","../../node_modules/d3-hierarchy/src/hierarchy/count.js","../../node_modules/d3-hierarchy/src/hierarchy/index.js","../../node_modules/d3-hierarchy/src/accessors.js","../../node_modules/d3-hierarchy/src/hierarchy/each.js","../../node_modules/d3-hierarchy/src/hierarchy/eachAfter.js","../../node_modules/d3-hierarchy/src/hierarchy/eachBefore.js","../../node_modules/d3-hierarchy/src/hierarchy/find.js","../../node_modules/d3-hierarchy/src/hierarchy/sum.js","../../node_modules/d3-hierarchy/src/hierarchy/sort.js","../../node_modules/d3-hierarchy/src/hierarchy/path.js","../../node_modules/d3-hierarchy/src/hierarchy/ancestors.js","../../node_modules/d3-hierarchy/src/hierarchy/descendants.js","../../node_modules/d3-hierarchy/src/hierarchy/leaves.js","../../node_modules/d3-hierarchy/src/hierarchy/links.js","../../node_modules/d3-hierarchy/src/hierarchy/iterator.js","../../node_modules/d3-hierarchy/src/stratify.js","../../node_modules/d3-hierarchy/src/tree.js","../../node_modules/d3-scale/src/init.js","../../node_modules/d3-scale/src/number.js","../../node_modules/d3-scale/src/continuous.js","../../node_modules/d3-scale/src/constant.js","../../node_modules/d3-scale/src/tickFormat.js","../../node_modules/d3-format/src/precisionPrefix.js","../../node_modules/d3-format/src/precisionRound.js","../../node_modules/d3-format/src/precisionFixed.js","../../node_modules/d3-scale/src/linear.js","../../node_modules/d3-shape/src/constant.js","../../node_modules/d3-shape/src/math.js","../../node_modules/d3-shape/src/arc.js","../../node_modules/d3-shape/src/array.js","../../node_modules/d3-shape/src/point.js","../../node_modules/d3-shape/src/link/index.js","../../node_modules/d3-zoom/src/constant.js","../../node_modules/d3-zoom/src/event.js","../../node_modules/d3-zoom/src/transform.js","../../node_modules/d3-zoom/src/noevent.js","../../node_modules/d3-zoom/src/zoom.js","../../src/GraphView.svelte","../../node_modules/d3-force/src/manyBody.js","../../node_modules/d3-force/src/center.js","../../src/dependency-view/utils.js","../../src/dependency-view/saliency-view.js","../../src/dependency-view/dependency-view.js","../../src/dependency-view/comparison-view.js","../../src/dependency-view/RadialModal.svelte","../../src/dependency-view/tree-view.js","../../src/dependency-view/Dependency.svelte","../../src/Atlas.svelte","../../src/AtlasSide.svelte","../../src/TooltipGlobal.svelte","../../src/LowerAtlas.svelte","../../src/Tooltip.svelte","../../src/EmbeddingView.svelte","../../src/TableView.svelte","../../src/TableModal.svelte","../../src/Main.svelte","../../src/main.js"],"sourcesContent":["function noop() { }\nconst identity = x => x;\nfunction assign(tar, src) {\n    // @ts-ignore\n    for (const k in src)\n        tar[k] = src[k];\n    return tar;\n}\nfunction is_promise(value) {\n    return value && typeof value === 'object' && typeof value.then === 'function';\n}\nfunction add_location(element, file, line, column, char) {\n    element.__svelte_meta = {\n        loc: { file, line, column, char }\n    };\n}\nfunction run(fn) {\n    return fn();\n}\nfunction blank_object() {\n    return Object.create(null);\n}\nfunction run_all(fns) {\n    fns.forEach(run);\n}\nfunction is_function(thing) {\n    return typeof thing === 'function';\n}\nfunction safe_not_equal(a, b) {\n    return a != a ? b == b : a !== b || ((a && typeof a === 'object') || typeof a === 'function');\n}\nfunction not_equal(a, b) {\n    return a != a ? b == b : a !== b;\n}\nfunction is_empty(obj) {\n    return Object.keys(obj).length === 0;\n}\nfunction validate_store(store, name) {\n    if (store != null && typeof store.subscribe !== 'function') {\n        throw new Error(`'${name}' is not a store with a 'subscribe' method`);\n    }\n}\nfunction subscribe(store, ...callbacks) {\n    if (store == null) {\n        return noop;\n    }\n    const unsub = store.subscribe(...callbacks);\n    return unsub.unsubscribe ? () => unsub.unsubscribe() : unsub;\n}\nfunction get_store_value(store) {\n    let value;\n    subscribe(store, _ => value = _)();\n    return value;\n}\nfunction component_subscribe(component, store, callback) {\n    component.$$.on_destroy.push(subscribe(store, callback));\n}\nfunction create_slot(definition, ctx, $$scope, fn) {\n    if (definition) {\n        const slot_ctx = get_slot_context(definition, ctx, $$scope, fn);\n        return definition[0](slot_ctx);\n    }\n}\nfunction get_slot_context(definition, ctx, $$scope, fn) {\n    return definition[1] && fn\n        ? assign($$scope.ctx.slice(), definition[1](fn(ctx)))\n        : $$scope.ctx;\n}\nfunction get_slot_changes(definition, $$scope, dirty, fn) {\n    if (definition[2] && fn) {\n        const lets = definition[2](fn(dirty));\n        if ($$scope.dirty === undefined) {\n            return lets;\n        }\n        if (typeof lets === 'object') {\n            const merged = [];\n            const len = Math.max($$scope.dirty.length, lets.length);\n            for (let i = 0; i < len; i += 1) {\n                merged[i] = $$scope.dirty[i] | lets[i];\n            }\n            return merged;\n        }\n        return $$scope.dirty | lets;\n    }\n    return $$scope.dirty;\n}\nfunction update_slot(slot, slot_definition, ctx, $$scope, dirty, get_slot_changes_fn, get_slot_context_fn) {\n    const slot_changes = get_slot_changes(slot_definition, $$scope, dirty, get_slot_changes_fn);\n    if (slot_changes) {\n        const slot_context = get_slot_context(slot_definition, ctx, $$scope, get_slot_context_fn);\n        slot.p(slot_context, slot_changes);\n    }\n}\nfunction exclude_internal_props(props) {\n    const result = {};\n    for (const k in props)\n        if (k[0] !== '$')\n            result[k] = props[k];\n    return result;\n}\nfunction compute_rest_props(props, keys) {\n    const rest = {};\n    keys = new Set(keys);\n    for (const k in props)\n        if (!keys.has(k) && k[0] !== '$')\n            rest[k] = props[k];\n    return rest;\n}\nfunction compute_slots(slots) {\n    const result = {};\n    for (const key in slots) {\n        result[key] = true;\n    }\n    return result;\n}\nfunction once(fn) {\n    let ran = false;\n    return function (...args) {\n        if (ran)\n            return;\n        ran = true;\n        fn.call(this, ...args);\n    };\n}\nfunction null_to_empty(value) {\n    return value == null ? '' : value;\n}\nfunction set_store_value(store, ret, value = ret) {\n    store.set(value);\n    return ret;\n}\nconst has_prop = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop);\nfunction action_destroyer(action_result) {\n    return action_result && is_function(action_result.destroy) ? action_result.destroy : noop;\n}\n\nconst is_client = typeof window !== 'undefined';\nlet now = is_client\n    ? () => window.performance.now()\n    : () => Date.now();\nlet raf = is_client ? cb => requestAnimationFrame(cb) : noop;\n// used internally for testing\nfunction set_now(fn) {\n    now = fn;\n}\nfunction set_raf(fn) {\n    raf = fn;\n}\n\nconst tasks = new Set();\nfunction run_tasks(now) {\n    tasks.forEach(task => {\n        if (!task.c(now)) {\n            tasks.delete(task);\n            task.f();\n        }\n    });\n    if (tasks.size !== 0)\n        raf(run_tasks);\n}\n/**\n * For testing purposes only!\n */\nfunction clear_loops() {\n    tasks.clear();\n}\n/**\n * Creates a new task that runs on each raf frame\n * until it returns a falsy value or is aborted\n */\nfunction loop(callback) {\n    let task;\n    if (tasks.size === 0)\n        raf(run_tasks);\n    return {\n        promise: new Promise(fulfill => {\n            tasks.add(task = { c: callback, f: fulfill });\n        }),\n        abort() {\n            tasks.delete(task);\n        }\n    };\n}\n\nfunction append(target, node) {\n    target.appendChild(node);\n}\nfunction insert(target, node, anchor) {\n    target.insertBefore(node, anchor || null);\n}\nfunction detach(node) {\n    node.parentNode.removeChild(node);\n}\nfunction destroy_each(iterations, detaching) {\n    for (let i = 0; i < iterations.length; i += 1) {\n        if (iterations[i])\n            iterations[i].d(detaching);\n    }\n}\nfunction element(name) {\n    return document.createElement(name);\n}\nfunction element_is(name, is) {\n    return document.createElement(name, { is });\n}\nfunction object_without_properties(obj, exclude) {\n    const target = {};\n    for (const k in obj) {\n        if (has_prop(obj, k)\n            // @ts-ignore\n            && exclude.indexOf(k) === -1) {\n            // @ts-ignore\n            target[k] = obj[k];\n        }\n    }\n    return target;\n}\nfunction svg_element(name) {\n    return document.createElementNS('http://www.w3.org/2000/svg', name);\n}\nfunction text(data) {\n    return document.createTextNode(data);\n}\nfunction space() {\n    return text(' ');\n}\nfunction empty() {\n    return text('');\n}\nfunction listen(node, event, handler, options) {\n    node.addEventListener(event, handler, options);\n    return () => node.removeEventListener(event, handler, options);\n}\nfunction prevent_default(fn) {\n    return function (event) {\n        event.preventDefault();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction stop_propagation(fn) {\n    return function (event) {\n        event.stopPropagation();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction self(fn) {\n    return function (event) {\n        // @ts-ignore\n        if (event.target === this)\n            fn.call(this, event);\n    };\n}\nfunction attr(node, attribute, value) {\n    if (value == null)\n        node.removeAttribute(attribute);\n    else if (node.getAttribute(attribute) !== value)\n        node.setAttribute(attribute, value);\n}\nfunction set_attributes(node, attributes) {\n    // @ts-ignore\n    const descriptors = Object.getOwnPropertyDescriptors(node.__proto__);\n    for (const key in attributes) {\n        if (attributes[key] == null) {\n            node.removeAttribute(key);\n        }\n        else if (key === 'style') {\n            node.style.cssText = attributes[key];\n        }\n        else if (key === '__value') {\n            node.value = node[key] = attributes[key];\n        }\n        else if (descriptors[key] && descriptors[key].set) {\n            node[key] = attributes[key];\n        }\n        else {\n            attr(node, key, attributes[key]);\n        }\n    }\n}\nfunction set_svg_attributes(node, attributes) {\n    for (const key in attributes) {\n        attr(node, key, attributes[key]);\n    }\n}\nfunction set_custom_element_data(node, prop, value) {\n    if (prop in node) {\n        node[prop] = value;\n    }\n    else {\n        attr(node, prop, value);\n    }\n}\nfunction xlink_attr(node, attribute, value) {\n    node.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);\n}\nfunction get_binding_group_value(group, __value, checked) {\n    const value = new Set();\n    for (let i = 0; i < group.length; i += 1) {\n        if (group[i].checked)\n            value.add(group[i].__value);\n    }\n    if (!checked) {\n        value.delete(__value);\n    }\n    return Array.from(value);\n}\nfunction to_number(value) {\n    return value === '' ? null : +value;\n}\nfunction time_ranges_to_array(ranges) {\n    const array = [];\n    for (let i = 0; i < ranges.length; i += 1) {\n        array.push({ start: ranges.start(i), end: ranges.end(i) });\n    }\n    return array;\n}\nfunction children(element) {\n    return Array.from(element.childNodes);\n}\nfunction claim_element(nodes, name, attributes, svg) {\n    for (let i = 0; i < nodes.length; i += 1) {\n        const node = nodes[i];\n        if (node.nodeName === name) {\n            let j = 0;\n            const remove = [];\n            while (j < node.attributes.length) {\n                const attribute = node.attributes[j++];\n                if (!attributes[attribute.name]) {\n                    remove.push(attribute.name);\n                }\n            }\n            for (let k = 0; k < remove.length; k++) {\n                node.removeAttribute(remove[k]);\n            }\n            return nodes.splice(i, 1)[0];\n        }\n    }\n    return svg ? svg_element(name) : element(name);\n}\nfunction claim_text(nodes, data) {\n    for (let i = 0; i < nodes.length; i += 1) {\n        const node = nodes[i];\n        if (node.nodeType === 3) {\n            node.data = '' + data;\n            return nodes.splice(i, 1)[0];\n        }\n    }\n    return text(data);\n}\nfunction claim_space(nodes) {\n    return claim_text(nodes, ' ');\n}\nfunction set_data(text, data) {\n    data = '' + data;\n    if (text.wholeText !== data)\n        text.data = data;\n}\nfunction set_input_value(input, value) {\n    input.value = value == null ? '' : value;\n}\nfunction set_input_type(input, type) {\n    try {\n        input.type = type;\n    }\n    catch (e) {\n        // do nothing\n    }\n}\nfunction set_style(node, key, value, important) {\n    node.style.setProperty(key, value, important ? 'important' : '');\n}\nfunction select_option(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        if (option.__value === value) {\n            option.selected = true;\n            return;\n        }\n    }\n}\nfunction select_options(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        option.selected = ~value.indexOf(option.__value);\n    }\n}\nfunction select_value(select) {\n    const selected_option = select.querySelector(':checked') || select.options[0];\n    return selected_option && selected_option.__value;\n}\nfunction select_multiple_value(select) {\n    return [].map.call(select.querySelectorAll(':checked'), option => option.__value);\n}\n// unfortunately this can't be a constant as that wouldn't be tree-shakeable\n// so we cache the result instead\nlet crossorigin;\nfunction is_crossorigin() {\n    if (crossorigin === undefined) {\n        crossorigin = false;\n        try {\n            if (typeof window !== 'undefined' && window.parent) {\n                void window.parent.document;\n            }\n        }\n        catch (error) {\n            crossorigin = true;\n        }\n    }\n    return crossorigin;\n}\nfunction add_resize_listener(node, fn) {\n    const computed_style = getComputedStyle(node);\n    const z_index = (parseInt(computed_style.zIndex) || 0) - 1;\n    if (computed_style.position === 'static') {\n        node.style.position = 'relative';\n    }\n    const iframe = element('iframe');\n    iframe.setAttribute('style', 'display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; ' +\n        `overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: ${z_index};`);\n    iframe.setAttribute('aria-hidden', 'true');\n    iframe.tabIndex = -1;\n    const crossorigin = is_crossorigin();\n    let unsubscribe;\n    if (crossorigin) {\n        iframe.src = \"data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}</script>\";\n        unsubscribe = listen(window, 'message', (event) => {\n            if (event.source === iframe.contentWindow)\n                fn();\n        });\n    }\n    else {\n        iframe.src = 'about:blank';\n        iframe.onload = () => {\n            unsubscribe = listen(iframe.contentWindow, 'resize', fn);\n        };\n    }\n    append(node, iframe);\n    return () => {\n        if (crossorigin) {\n            unsubscribe();\n        }\n        else if (unsubscribe && iframe.contentWindow) {\n            unsubscribe();\n        }\n        detach(iframe);\n    };\n}\nfunction toggle_class(element, name, toggle) {\n    element.classList[toggle ? 'add' : 'remove'](name);\n}\nfunction custom_event(type, detail) {\n    const e = document.createEvent('CustomEvent');\n    e.initCustomEvent(type, false, false, detail);\n    return e;\n}\nfunction query_selector_all(selector, parent = document.body) {\n    return Array.from(parent.querySelectorAll(selector));\n}\nclass HtmlTag {\n    constructor(anchor = null) {\n        this.a = anchor;\n        this.e = this.n = null;\n    }\n    m(html, target, anchor = null) {\n        if (!this.e) {\n            this.e = element(target.nodeName);\n            this.t = target;\n            this.h(html);\n        }\n        this.i(anchor);\n    }\n    h(html) {\n        this.e.innerHTML = html;\n        this.n = Array.from(this.e.childNodes);\n    }\n    i(anchor) {\n        for (let i = 0; i < this.n.length; i += 1) {\n            insert(this.t, this.n[i], anchor);\n        }\n    }\n    p(html) {\n        this.d();\n        this.h(html);\n        this.i(this.a);\n    }\n    d() {\n        this.n.forEach(detach);\n    }\n}\n\nconst active_docs = new Set();\nlet active = 0;\n// https://github.com/darkskyapp/string-hash/blob/master/index.js\nfunction hash(str) {\n    let hash = 5381;\n    let i = str.length;\n    while (i--)\n        hash = ((hash << 5) - hash) ^ str.charCodeAt(i);\n    return hash >>> 0;\n}\nfunction create_rule(node, a, b, duration, delay, ease, fn, uid = 0) {\n    const step = 16.666 / duration;\n    let keyframes = '{\\n';\n    for (let p = 0; p <= 1; p += step) {\n        const t = a + (b - a) * ease(p);\n        keyframes += p * 100 + `%{${fn(t, 1 - t)}}\\n`;\n    }\n    const rule = keyframes + `100% {${fn(b, 1 - b)}}\\n}`;\n    const name = `__svelte_${hash(rule)}_${uid}`;\n    const doc = node.ownerDocument;\n    active_docs.add(doc);\n    const stylesheet = doc.__svelte_stylesheet || (doc.__svelte_stylesheet = doc.head.appendChild(element('style')).sheet);\n    const current_rules = doc.__svelte_rules || (doc.__svelte_rules = {});\n    if (!current_rules[name]) {\n        current_rules[name] = true;\n        stylesheet.insertRule(`@keyframes ${name} ${rule}`, stylesheet.cssRules.length);\n    }\n    const animation = node.style.animation || '';\n    node.style.animation = `${animation ? `${animation}, ` : ''}${name} ${duration}ms linear ${delay}ms 1 both`;\n    active += 1;\n    return name;\n}\nfunction delete_rule(node, name) {\n    const previous = (node.style.animation || '').split(', ');\n    const next = previous.filter(name\n        ? anim => anim.indexOf(name) < 0 // remove specific animation\n        : anim => anim.indexOf('__svelte') === -1 // remove all Svelte animations\n    );\n    const deleted = previous.length - next.length;\n    if (deleted) {\n        node.style.animation = next.join(', ');\n        active -= deleted;\n        if (!active)\n            clear_rules();\n    }\n}\nfunction clear_rules() {\n    raf(() => {\n        if (active)\n            return;\n        active_docs.forEach(doc => {\n            const stylesheet = doc.__svelte_stylesheet;\n            let i = stylesheet.cssRules.length;\n            while (i--)\n                stylesheet.deleteRule(i);\n            doc.__svelte_rules = {};\n        });\n        active_docs.clear();\n    });\n}\n\nfunction create_animation(node, from, fn, params) {\n    if (!from)\n        return noop;\n    const to = node.getBoundingClientRect();\n    if (from.left === to.left && from.right === to.right && from.top === to.top && from.bottom === to.bottom)\n        return noop;\n    const { delay = 0, duration = 300, easing = identity, \n    // @ts-ignore todo: should this be separated from destructuring? Or start/end added to public api and documentation?\n    start: start_time = now() + delay, \n    // @ts-ignore todo:\n    end = start_time + duration, tick = noop, css } = fn(node, { from, to }, params);\n    let running = true;\n    let started = false;\n    let name;\n    function start() {\n        if (css) {\n            name = create_rule(node, 0, 1, duration, delay, easing, css);\n        }\n        if (!delay) {\n            started = true;\n        }\n    }\n    function stop() {\n        if (css)\n            delete_rule(node, name);\n        running = false;\n    }\n    loop(now => {\n        if (!started && now >= start_time) {\n            started = true;\n        }\n        if (started && now >= end) {\n            tick(1, 0);\n            stop();\n        }\n        if (!running) {\n            return false;\n        }\n        if (started) {\n            const p = now - start_time;\n            const t = 0 + 1 * easing(p / duration);\n            tick(t, 1 - t);\n        }\n        return true;\n    });\n    start();\n    tick(0, 1);\n    return stop;\n}\nfunction fix_position(node) {\n    const style = getComputedStyle(node);\n    if (style.position !== 'absolute' && style.position !== 'fixed') {\n        const { width, height } = style;\n        const a = node.getBoundingClientRect();\n        node.style.position = 'absolute';\n        node.style.width = width;\n        node.style.height = height;\n        add_transform(node, a);\n    }\n}\nfunction add_transform(node, a) {\n    const b = node.getBoundingClientRect();\n    if (a.left !== b.left || a.top !== b.top) {\n        const style = getComputedStyle(node);\n        const transform = style.transform === 'none' ? '' : style.transform;\n        node.style.transform = `${transform} translate(${a.left - b.left}px, ${a.top - b.top}px)`;\n    }\n}\n\nlet current_component;\nfunction set_current_component(component) {\n    current_component = component;\n}\nfunction get_current_component() {\n    if (!current_component)\n        throw new Error('Function called outside component initialization');\n    return current_component;\n}\nfunction beforeUpdate(fn) {\n    get_current_component().$$.before_update.push(fn);\n}\nfunction onMount(fn) {\n    get_current_component().$$.on_mount.push(fn);\n}\nfunction afterUpdate(fn) {\n    get_current_component().$$.after_update.push(fn);\n}\nfunction onDestroy(fn) {\n    get_current_component().$$.on_destroy.push(fn);\n}\nfunction createEventDispatcher() {\n    const component = get_current_component();\n    return (type, detail) => {\n        const callbacks = component.$$.callbacks[type];\n        if (callbacks) {\n            // TODO are there situations where events could be dispatched\n            // in a server (non-DOM) environment?\n            const event = custom_event(type, detail);\n            callbacks.slice().forEach(fn => {\n                fn.call(component, event);\n            });\n        }\n    };\n}\nfunction setContext(key, context) {\n    get_current_component().$$.context.set(key, context);\n}\nfunction getContext(key) {\n    return get_current_component().$$.context.get(key);\n}\n// TODO figure out if we still want to support\n// shorthand events, or if we want to implement\n// a real bubbling mechanism\nfunction bubble(component, event) {\n    const callbacks = component.$$.callbacks[event.type];\n    if (callbacks) {\n        callbacks.slice().forEach(fn => fn(event));\n    }\n}\n\nconst dirty_components = [];\nconst intros = { enabled: false };\nconst binding_callbacks = [];\nconst render_callbacks = [];\nconst flush_callbacks = [];\nconst resolved_promise = Promise.resolve();\nlet update_scheduled = false;\nfunction schedule_update() {\n    if (!update_scheduled) {\n        update_scheduled = true;\n        resolved_promise.then(flush);\n    }\n}\nfunction tick() {\n    schedule_update();\n    return resolved_promise;\n}\nfunction add_render_callback(fn) {\n    render_callbacks.push(fn);\n}\nfunction add_flush_callback(fn) {\n    flush_callbacks.push(fn);\n}\nlet flushing = false;\nconst seen_callbacks = new Set();\nfunction flush() {\n    if (flushing)\n        return;\n    flushing = true;\n    do {\n        // first, call beforeUpdate functions\n        // and update components\n        for (let i = 0; i < dirty_components.length; i += 1) {\n            const component = dirty_components[i];\n            set_current_component(component);\n            update(component.$$);\n        }\n        set_current_component(null);\n        dirty_components.length = 0;\n        while (binding_callbacks.length)\n            binding_callbacks.pop()();\n        // then, once components are updated, call\n        // afterUpdate functions. This may cause\n        // subsequent updates...\n        for (let i = 0; i < render_callbacks.length; i += 1) {\n            const callback = render_callbacks[i];\n            if (!seen_callbacks.has(callback)) {\n                // ...so guard against infinite loops\n                seen_callbacks.add(callback);\n                callback();\n            }\n        }\n        render_callbacks.length = 0;\n    } while (dirty_components.length);\n    while (flush_callbacks.length) {\n        flush_callbacks.pop()();\n    }\n    update_scheduled = false;\n    flushing = false;\n    seen_callbacks.clear();\n}\nfunction update($$) {\n    if ($$.fragment !== null) {\n        $$.update();\n        run_all($$.before_update);\n        const dirty = $$.dirty;\n        $$.dirty = [-1];\n        $$.fragment && $$.fragment.p($$.ctx, dirty);\n        $$.after_update.forEach(add_render_callback);\n    }\n}\n\nlet promise;\nfunction wait() {\n    if (!promise) {\n        promise = Promise.resolve();\n        promise.then(() => {\n            promise = null;\n        });\n    }\n    return promise;\n}\nfunction dispatch(node, direction, kind) {\n    node.dispatchEvent(custom_event(`${direction ? 'intro' : 'outro'}${kind}`));\n}\nconst outroing = new Set();\nlet outros;\nfunction group_outros() {\n    outros = {\n        r: 0,\n        c: [],\n        p: outros // parent group\n    };\n}\nfunction check_outros() {\n    if (!outros.r) {\n        run_all(outros.c);\n    }\n    outros = outros.p;\n}\nfunction transition_in(block, local) {\n    if (block && block.i) {\n        outroing.delete(block);\n        block.i(local);\n    }\n}\nfunction transition_out(block, local, detach, callback) {\n    if (block && block.o) {\n        if (outroing.has(block))\n            return;\n        outroing.add(block);\n        outros.c.push(() => {\n            outroing.delete(block);\n            if (callback) {\n                if (detach)\n                    block.d(1);\n                callback();\n            }\n        });\n        block.o(local);\n    }\n}\nconst null_transition = { duration: 0 };\nfunction create_in_transition(node, fn, params) {\n    let config = fn(node, params);\n    let running = false;\n    let animation_name;\n    let task;\n    let uid = 0;\n    function cleanup() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 0, 1, duration, delay, easing, css, uid++);\n        tick(0, 1);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        if (task)\n            task.abort();\n        running = true;\n        add_render_callback(() => dispatch(node, true, 'start'));\n        task = loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(1, 0);\n                    dispatch(node, true, 'end');\n                    cleanup();\n                    return running = false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(t, 1 - t);\n                }\n            }\n            return running;\n        });\n    }\n    let started = false;\n    return {\n        start() {\n            if (started)\n                return;\n            delete_rule(node);\n            if (is_function(config)) {\n                config = config();\n                wait().then(go);\n            }\n            else {\n                go();\n            }\n        },\n        invalidate() {\n            started = false;\n        },\n        end() {\n            if (running) {\n                cleanup();\n                running = false;\n            }\n        }\n    };\n}\nfunction create_out_transition(node, fn, params) {\n    let config = fn(node, params);\n    let running = true;\n    let animation_name;\n    const group = outros;\n    group.r += 1;\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 1, 0, duration, delay, easing, css);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        add_render_callback(() => dispatch(node, false, 'start'));\n        loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(0, 1);\n                    dispatch(node, false, 'end');\n                    if (!--group.r) {\n                        // this will result in `end()` being called,\n                        // so we don't need to clean up here\n                        run_all(group.c);\n                    }\n                    return false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(1 - t, t);\n                }\n            }\n            return running;\n        });\n    }\n    if (is_function(config)) {\n        wait().then(() => {\n            // @ts-ignore\n            config = config();\n            go();\n        });\n    }\n    else {\n        go();\n    }\n    return {\n        end(reset) {\n            if (reset && config.tick) {\n                config.tick(1, 0);\n            }\n            if (running) {\n                if (animation_name)\n                    delete_rule(node, animation_name);\n                running = false;\n            }\n        }\n    };\n}\nfunction create_bidirectional_transition(node, fn, params, intro) {\n    let config = fn(node, params);\n    let t = intro ? 0 : 1;\n    let running_program = null;\n    let pending_program = null;\n    let animation_name = null;\n    function clear_animation() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function init(program, duration) {\n        const d = program.b - t;\n        duration *= Math.abs(d);\n        return {\n            a: t,\n            b: program.b,\n            d,\n            duration,\n            start: program.start,\n            end: program.start + duration,\n            group: program.group\n        };\n    }\n    function go(b) {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        const program = {\n            start: now() + delay,\n            b\n        };\n        if (!b) {\n            // @ts-ignore todo: improve typings\n            program.group = outros;\n            outros.r += 1;\n        }\n        if (running_program || pending_program) {\n            pending_program = program;\n        }\n        else {\n            // if this is an intro, and there's a delay, we need to do\n            // an initial tick and/or apply CSS animation immediately\n            if (css) {\n                clear_animation();\n                animation_name = create_rule(node, t, b, duration, delay, easing, css);\n            }\n            if (b)\n                tick(0, 1);\n            running_program = init(program, duration);\n            add_render_callback(() => dispatch(node, b, 'start'));\n            loop(now => {\n                if (pending_program && now > pending_program.start) {\n                    running_program = init(pending_program, duration);\n                    pending_program = null;\n                    dispatch(node, running_program.b, 'start');\n                    if (css) {\n                        clear_animation();\n                        animation_name = create_rule(node, t, running_program.b, running_program.duration, 0, easing, config.css);\n                    }\n                }\n                if (running_program) {\n                    if (now >= running_program.end) {\n                        tick(t = running_program.b, 1 - t);\n                        dispatch(node, running_program.b, 'end');\n                        if (!pending_program) {\n                            // we're done\n                            if (running_program.b) {\n                                // intro — we can tidy up immediately\n                                clear_animation();\n                            }\n                            else {\n                                // outro — needs to be coordinated\n                                if (!--running_program.group.r)\n                                    run_all(running_program.group.c);\n                            }\n                        }\n                        running_program = null;\n                    }\n                    else if (now >= running_program.start) {\n                        const p = now - running_program.start;\n                        t = running_program.a + running_program.d * easing(p / running_program.duration);\n                        tick(t, 1 - t);\n                    }\n                }\n                return !!(running_program || pending_program);\n            });\n        }\n    }\n    return {\n        run(b) {\n            if (is_function(config)) {\n                wait().then(() => {\n                    // @ts-ignore\n                    config = config();\n                    go(b);\n                });\n            }\n            else {\n                go(b);\n            }\n        },\n        end() {\n            clear_animation();\n            running_program = pending_program = null;\n        }\n    };\n}\n\nfunction handle_promise(promise, info) {\n    const token = info.token = {};\n    function update(type, index, key, value) {\n        if (info.token !== token)\n            return;\n        info.resolved = value;\n        let child_ctx = info.ctx;\n        if (key !== undefined) {\n            child_ctx = child_ctx.slice();\n            child_ctx[key] = value;\n        }\n        const block = type && (info.current = type)(child_ctx);\n        let needs_flush = false;\n        if (info.block) {\n            if (info.blocks) {\n                info.blocks.forEach((block, i) => {\n                    if (i !== index && block) {\n                        group_outros();\n                        transition_out(block, 1, 1, () => {\n                            info.blocks[i] = null;\n                        });\n                        check_outros();\n                    }\n                });\n            }\n            else {\n                info.block.d(1);\n            }\n            block.c();\n            transition_in(block, 1);\n            block.m(info.mount(), info.anchor);\n            needs_flush = true;\n        }\n        info.block = block;\n        if (info.blocks)\n            info.blocks[index] = block;\n        if (needs_flush) {\n            flush();\n        }\n    }\n    if (is_promise(promise)) {\n        const current_component = get_current_component();\n        promise.then(value => {\n            set_current_component(current_component);\n            update(info.then, 1, info.value, value);\n            set_current_component(null);\n        }, error => {\n            set_current_component(current_component);\n            update(info.catch, 2, info.error, error);\n            set_current_component(null);\n            if (!info.hasCatch) {\n                throw error;\n            }\n        });\n        // if we previously had a then/catch block, destroy it\n        if (info.current !== info.pending) {\n            update(info.pending, 0);\n            return true;\n        }\n    }\n    else {\n        if (info.current !== info.then) {\n            update(info.then, 1, info.value, promise);\n            return true;\n        }\n        info.resolved = promise;\n    }\n}\n\nconst globals = (typeof window !== 'undefined'\n    ? window\n    : typeof globalThis !== 'undefined'\n        ? globalThis\n        : global);\n\nfunction destroy_block(block, lookup) {\n    block.d(1);\n    lookup.delete(block.key);\n}\nfunction outro_and_destroy_block(block, lookup) {\n    transition_out(block, 1, 1, () => {\n        lookup.delete(block.key);\n    });\n}\nfunction fix_and_destroy_block(block, lookup) {\n    block.f();\n    destroy_block(block, lookup);\n}\nfunction fix_and_outro_and_destroy_block(block, lookup) {\n    block.f();\n    outro_and_destroy_block(block, lookup);\n}\nfunction update_keyed_each(old_blocks, dirty, get_key, dynamic, ctx, list, lookup, node, destroy, create_each_block, next, get_context) {\n    let o = old_blocks.length;\n    let n = list.length;\n    let i = o;\n    const old_indexes = {};\n    while (i--)\n        old_indexes[old_blocks[i].key] = i;\n    const new_blocks = [];\n    const new_lookup = new Map();\n    const deltas = new Map();\n    i = n;\n    while (i--) {\n        const child_ctx = get_context(ctx, list, i);\n        const key = get_key(child_ctx);\n        let block = lookup.get(key);\n        if (!block) {\n            block = create_each_block(key, child_ctx);\n            block.c();\n        }\n        else if (dynamic) {\n            block.p(child_ctx, dirty);\n        }\n        new_lookup.set(key, new_blocks[i] = block);\n        if (key in old_indexes)\n            deltas.set(key, Math.abs(i - old_indexes[key]));\n    }\n    const will_move = new Set();\n    const did_move = new Set();\n    function insert(block) {\n        transition_in(block, 1);\n        block.m(node, next);\n        lookup.set(block.key, block);\n        next = block.first;\n        n--;\n    }\n    while (o && n) {\n        const new_block = new_blocks[n - 1];\n        const old_block = old_blocks[o - 1];\n        const new_key = new_block.key;\n        const old_key = old_block.key;\n        if (new_block === old_block) {\n            // do nothing\n            next = new_block.first;\n            o--;\n            n--;\n        }\n        else if (!new_lookup.has(old_key)) {\n            // remove old block\n            destroy(old_block, lookup);\n            o--;\n        }\n        else if (!lookup.has(new_key) || will_move.has(new_key)) {\n            insert(new_block);\n        }\n        else if (did_move.has(old_key)) {\n            o--;\n        }\n        else if (deltas.get(new_key) > deltas.get(old_key)) {\n            did_move.add(new_key);\n            insert(new_block);\n        }\n        else {\n            will_move.add(old_key);\n            o--;\n        }\n    }\n    while (o--) {\n        const old_block = old_blocks[o];\n        if (!new_lookup.has(old_block.key))\n            destroy(old_block, lookup);\n    }\n    while (n)\n        insert(new_blocks[n - 1]);\n    return new_blocks;\n}\nfunction validate_each_keys(ctx, list, get_context, get_key) {\n    const keys = new Set();\n    for (let i = 0; i < list.length; i++) {\n        const key = get_key(get_context(ctx, list, i));\n        if (keys.has(key)) {\n            throw new Error('Cannot have duplicate keys in a keyed each');\n        }\n        keys.add(key);\n    }\n}\n\nfunction get_spread_update(levels, updates) {\n    const update = {};\n    const to_null_out = {};\n    const accounted_for = { $$scope: 1 };\n    let i = levels.length;\n    while (i--) {\n        const o = levels[i];\n        const n = updates[i];\n        if (n) {\n            for (const key in o) {\n                if (!(key in n))\n                    to_null_out[key] = 1;\n            }\n            for (const key in n) {\n                if (!accounted_for[key]) {\n                    update[key] = n[key];\n                    accounted_for[key] = 1;\n                }\n            }\n            levels[i] = n;\n        }\n        else {\n            for (const key in o) {\n                accounted_for[key] = 1;\n            }\n        }\n    }\n    for (const key in to_null_out) {\n        if (!(key in update))\n            update[key] = undefined;\n    }\n    return update;\n}\nfunction get_spread_object(spread_props) {\n    return typeof spread_props === 'object' && spread_props !== null ? spread_props : {};\n}\n\n// source: https://html.spec.whatwg.org/multipage/indices.html\nconst boolean_attributes = new Set([\n    'allowfullscreen',\n    'allowpaymentrequest',\n    'async',\n    'autofocus',\n    'autoplay',\n    'checked',\n    'controls',\n    'default',\n    'defer',\n    'disabled',\n    'formnovalidate',\n    'hidden',\n    'ismap',\n    'loop',\n    'multiple',\n    'muted',\n    'nomodule',\n    'novalidate',\n    'open',\n    'playsinline',\n    'readonly',\n    'required',\n    'reversed',\n    'selected'\n]);\n\nconst invalid_attribute_name_character = /[\\s'\">/=\\u{FDD0}-\\u{FDEF}\\u{FFFE}\\u{FFFF}\\u{1FFFE}\\u{1FFFF}\\u{2FFFE}\\u{2FFFF}\\u{3FFFE}\\u{3FFFF}\\u{4FFFE}\\u{4FFFF}\\u{5FFFE}\\u{5FFFF}\\u{6FFFE}\\u{6FFFF}\\u{7FFFE}\\u{7FFFF}\\u{8FFFE}\\u{8FFFF}\\u{9FFFE}\\u{9FFFF}\\u{AFFFE}\\u{AFFFF}\\u{BFFFE}\\u{BFFFF}\\u{CFFFE}\\u{CFFFF}\\u{DFFFE}\\u{DFFFF}\\u{EFFFE}\\u{EFFFF}\\u{FFFFE}\\u{FFFFF}\\u{10FFFE}\\u{10FFFF}]/u;\n// https://html.spec.whatwg.org/multipage/syntax.html#attributes-2\n// https://infra.spec.whatwg.org/#noncharacter\nfunction spread(args, classes_to_add) {\n    const attributes = Object.assign({}, ...args);\n    if (classes_to_add) {\n        if (attributes.class == null) {\n            attributes.class = classes_to_add;\n        }\n        else {\n            attributes.class += ' ' + classes_to_add;\n        }\n    }\n    let str = '';\n    Object.keys(attributes).forEach(name => {\n        if (invalid_attribute_name_character.test(name))\n            return;\n        const value = attributes[name];\n        if (value === true)\n            str += ' ' + name;\n        else if (boolean_attributes.has(name.toLowerCase())) {\n            if (value)\n                str += ' ' + name;\n        }\n        else if (value != null) {\n            str += ` ${name}=\"${String(value).replace(/\"/g, '&#34;').replace(/'/g, '&#39;')}\"`;\n        }\n    });\n    return str;\n}\nconst escaped = {\n    '\"': '&quot;',\n    \"'\": '&#39;',\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;'\n};\nfunction escape(html) {\n    return String(html).replace(/[\"'&<>]/g, match => escaped[match]);\n}\nfunction each(items, fn) {\n    let str = '';\n    for (let i = 0; i < items.length; i += 1) {\n        str += fn(items[i], i);\n    }\n    return str;\n}\nconst missing_component = {\n    $$render: () => ''\n};\nfunction validate_component(component, name) {\n    if (!component || !component.$$render) {\n        if (name === 'svelte:component')\n            name += ' this={...}';\n        throw new Error(`<${name}> is not a valid SSR component. You may need to review your build config to ensure that dependencies are compiled, rather than imported as pre-compiled modules`);\n    }\n    return component;\n}\nfunction debug(file, line, column, values) {\n    console.log(`{@debug} ${file ? file + ' ' : ''}(${line}:${column})`); // eslint-disable-line no-console\n    console.log(values); // eslint-disable-line no-console\n    return '';\n}\nlet on_destroy;\nfunction create_ssr_component(fn) {\n    function $$render(result, props, bindings, slots) {\n        const parent_component = current_component;\n        const $$ = {\n            on_destroy,\n            context: new Map(parent_component ? parent_component.$$.context : []),\n            // these will be immediately discarded\n            on_mount: [],\n            before_update: [],\n            after_update: [],\n            callbacks: blank_object()\n        };\n        set_current_component({ $$ });\n        const html = fn(result, props, bindings, slots);\n        set_current_component(parent_component);\n        return html;\n    }\n    return {\n        render: (props = {}, options = {}) => {\n            on_destroy = [];\n            const result = { title: '', head: '', css: new Set() };\n            const html = $$render(result, props, {}, options);\n            run_all(on_destroy);\n            return {\n                html,\n                css: {\n                    code: Array.from(result.css).map(css => css.code).join('\\n'),\n                    map: null // TODO\n                },\n                head: result.title + result.head\n            };\n        },\n        $$render\n    };\n}\nfunction add_attribute(name, value, boolean) {\n    if (value == null || (boolean && !value))\n        return '';\n    return ` ${name}${value === true ? '' : `=${typeof value === 'string' ? JSON.stringify(escape(value)) : `\"${value}\"`}`}`;\n}\nfunction add_classes(classes) {\n    return classes ? ` class=\"${classes}\"` : '';\n}\n\nfunction bind(component, name, callback) {\n    const index = component.$$.props[name];\n    if (index !== undefined) {\n        component.$$.bound[index] = callback;\n        callback(component.$$.ctx[index]);\n    }\n}\nfunction create_component(block) {\n    block && block.c();\n}\nfunction claim_component(block, parent_nodes) {\n    block && block.l(parent_nodes);\n}\nfunction mount_component(component, target, anchor) {\n    const { fragment, on_mount, on_destroy, after_update } = component.$$;\n    fragment && fragment.m(target, anchor);\n    // onMount happens before the initial afterUpdate\n    add_render_callback(() => {\n        const new_on_destroy = on_mount.map(run).filter(is_function);\n        if (on_destroy) {\n            on_destroy.push(...new_on_destroy);\n        }\n        else {\n            // Edge case - component was destroyed immediately,\n            // most likely as a result of a binding initialising\n            run_all(new_on_destroy);\n        }\n        component.$$.on_mount = [];\n    });\n    after_update.forEach(add_render_callback);\n}\nfunction destroy_component(component, detaching) {\n    const $$ = component.$$;\n    if ($$.fragment !== null) {\n        run_all($$.on_destroy);\n        $$.fragment && $$.fragment.d(detaching);\n        // TODO null out other refs, including component.$$ (but need to\n        // preserve final state?)\n        $$.on_destroy = $$.fragment = null;\n        $$.ctx = [];\n    }\n}\nfunction make_dirty(component, i) {\n    if (component.$$.dirty[0] === -1) {\n        dirty_components.push(component);\n        schedule_update();\n        component.$$.dirty.fill(0);\n    }\n    component.$$.dirty[(i / 31) | 0] |= (1 << (i % 31));\n}\nfunction init(component, options, instance, create_fragment, not_equal, props, dirty = [-1]) {\n    const parent_component = current_component;\n    set_current_component(component);\n    const prop_values = options.props || {};\n    const $$ = component.$$ = {\n        fragment: null,\n        ctx: null,\n        // state\n        props,\n        update: noop,\n        not_equal,\n        bound: blank_object(),\n        // lifecycle\n        on_mount: [],\n        on_destroy: [],\n        before_update: [],\n        after_update: [],\n        context: new Map(parent_component ? parent_component.$$.context : []),\n        // everything else\n        callbacks: blank_object(),\n        dirty,\n        skip_bound: false\n    };\n    let ready = false;\n    $$.ctx = instance\n        ? instance(component, prop_values, (i, ret, ...rest) => {\n            const value = rest.length ? rest[0] : ret;\n            if ($$.ctx && not_equal($$.ctx[i], $$.ctx[i] = value)) {\n                if (!$$.skip_bound && $$.bound[i])\n                    $$.bound[i](value);\n                if (ready)\n                    make_dirty(component, i);\n            }\n            return ret;\n        })\n        : [];\n    $$.update();\n    ready = true;\n    run_all($$.before_update);\n    // `false` as a special case of no DOM component\n    $$.fragment = create_fragment ? create_fragment($$.ctx) : false;\n    if (options.target) {\n        if (options.hydrate) {\n            const nodes = children(options.target);\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.l(nodes);\n            nodes.forEach(detach);\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.c();\n        }\n        if (options.intro)\n            transition_in(component.$$.fragment);\n        mount_component(component, options.target, options.anchor);\n        flush();\n    }\n    set_current_component(parent_component);\n}\nlet SvelteElement;\nif (typeof HTMLElement === 'function') {\n    SvelteElement = class extends HTMLElement {\n        constructor() {\n            super();\n            this.attachShadow({ mode: 'open' });\n        }\n        connectedCallback() {\n            // @ts-ignore todo: improve typings\n            for (const key in this.$$.slotted) {\n                // @ts-ignore todo: improve typings\n                this.appendChild(this.$$.slotted[key]);\n            }\n        }\n        attributeChangedCallback(attr, _oldValue, newValue) {\n            this[attr] = newValue;\n        }\n        $destroy() {\n            destroy_component(this, 1);\n            this.$destroy = noop;\n        }\n        $on(type, callback) {\n            // TODO should this delegate to addEventListener?\n            const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n            callbacks.push(callback);\n            return () => {\n                const index = callbacks.indexOf(callback);\n                if (index !== -1)\n                    callbacks.splice(index, 1);\n            };\n        }\n        $set($$props) {\n            if (this.$$set && !is_empty($$props)) {\n                this.$$.skip_bound = true;\n                this.$$set($$props);\n                this.$$.skip_bound = false;\n            }\n        }\n    };\n}\nclass SvelteComponent {\n    $destroy() {\n        destroy_component(this, 1);\n        this.$destroy = noop;\n    }\n    $on(type, callback) {\n        const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n        callbacks.push(callback);\n        return () => {\n            const index = callbacks.indexOf(callback);\n            if (index !== -1)\n                callbacks.splice(index, 1);\n        };\n    }\n    $set($$props) {\n        if (this.$$set && !is_empty($$props)) {\n            this.$$.skip_bound = true;\n            this.$$set($$props);\n            this.$$.skip_bound = false;\n        }\n    }\n}\n\nfunction dispatch_dev(type, detail) {\n    document.dispatchEvent(custom_event(type, Object.assign({ version: '3.29.4' }, detail)));\n}\nfunction append_dev(target, node) {\n    dispatch_dev('SvelteDOMInsert', { target, node });\n    append(target, node);\n}\nfunction insert_dev(target, node, anchor) {\n    dispatch_dev('SvelteDOMInsert', { target, node, anchor });\n    insert(target, node, anchor);\n}\nfunction detach_dev(node) {\n    dispatch_dev('SvelteDOMRemove', { node });\n    detach(node);\n}\nfunction detach_between_dev(before, after) {\n    while (before.nextSibling && before.nextSibling !== after) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction detach_before_dev(after) {\n    while (after.previousSibling) {\n        detach_dev(after.previousSibling);\n    }\n}\nfunction detach_after_dev(before) {\n    while (before.nextSibling) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction listen_dev(node, event, handler, options, has_prevent_default, has_stop_propagation) {\n    const modifiers = options === true ? ['capture'] : options ? Array.from(Object.keys(options)) : [];\n    if (has_prevent_default)\n        modifiers.push('preventDefault');\n    if (has_stop_propagation)\n        modifiers.push('stopPropagation');\n    dispatch_dev('SvelteDOMAddEventListener', { node, event, handler, modifiers });\n    const dispose = listen(node, event, handler, options);\n    return () => {\n        dispatch_dev('SvelteDOMRemoveEventListener', { node, event, handler, modifiers });\n        dispose();\n    };\n}\nfunction attr_dev(node, attribute, value) {\n    attr(node, attribute, value);\n    if (value == null)\n        dispatch_dev('SvelteDOMRemoveAttribute', { node, attribute });\n    else\n        dispatch_dev('SvelteDOMSetAttribute', { node, attribute, value });\n}\nfunction prop_dev(node, property, value) {\n    node[property] = value;\n    dispatch_dev('SvelteDOMSetProperty', { node, property, value });\n}\nfunction dataset_dev(node, property, value) {\n    node.dataset[property] = value;\n    dispatch_dev('SvelteDOMSetDataset', { node, property, value });\n}\nfunction set_data_dev(text, data) {\n    data = '' + data;\n    if (text.wholeText === data)\n        return;\n    dispatch_dev('SvelteDOMSetData', { node: text, data });\n    text.data = data;\n}\nfunction validate_each_argument(arg) {\n    if (typeof arg !== 'string' && !(arg && typeof arg === 'object' && 'length' in arg)) {\n        let msg = '{#each} only iterates over array-like objects.';\n        if (typeof Symbol === 'function' && arg && Symbol.iterator in arg) {\n            msg += ' You can use a spread to convert this iterable into an array.';\n        }\n        throw new Error(msg);\n    }\n}\nfunction validate_slots(name, slot, keys) {\n    for (const slot_key of Object.keys(slot)) {\n        if (!~keys.indexOf(slot_key)) {\n            console.warn(`<${name}> received an unexpected slot \"${slot_key}\".`);\n        }\n    }\n}\nclass SvelteComponentDev extends SvelteComponent {\n    constructor(options) {\n        if (!options || (!options.target && !options.$$inline)) {\n            throw new Error(\"'target' is a required option\");\n        }\n        super();\n    }\n    $destroy() {\n        super.$destroy();\n        this.$destroy = () => {\n            console.warn('Component was already destroyed'); // eslint-disable-line no-console\n        };\n    }\n    $capture_state() { }\n    $inject_state() { }\n}\nfunction loop_guard(timeout) {\n    const start = Date.now();\n    return () => {\n        if (Date.now() - start > timeout) {\n            throw new Error('Infinite loop detected');\n        }\n    };\n}\n\nexport { HtmlTag, SvelteComponent, SvelteComponentDev, SvelteElement, action_destroyer, add_attribute, add_classes, add_flush_callback, add_location, add_render_callback, add_resize_listener, add_transform, afterUpdate, append, append_dev, assign, attr, attr_dev, beforeUpdate, bind, binding_callbacks, blank_object, bubble, check_outros, children, claim_component, claim_element, claim_space, claim_text, clear_loops, component_subscribe, compute_rest_props, compute_slots, createEventDispatcher, create_animation, create_bidirectional_transition, create_component, create_in_transition, create_out_transition, create_slot, create_ssr_component, current_component, custom_event, dataset_dev, debug, destroy_block, destroy_component, destroy_each, detach, detach_after_dev, detach_before_dev, detach_between_dev, detach_dev, dirty_components, dispatch_dev, each, element, element_is, empty, escape, escaped, exclude_internal_props, fix_and_destroy_block, fix_and_outro_and_destroy_block, fix_position, flush, getContext, get_binding_group_value, get_current_component, get_slot_changes, get_slot_context, get_spread_object, get_spread_update, get_store_value, globals, group_outros, handle_promise, has_prop, identity, init, insert, insert_dev, intros, invalid_attribute_name_character, is_client, is_crossorigin, is_empty, is_function, is_promise, listen, listen_dev, loop, loop_guard, missing_component, mount_component, noop, not_equal, now, null_to_empty, object_without_properties, onDestroy, onMount, once, outro_and_destroy_block, prevent_default, prop_dev, query_selector_all, raf, run, run_all, safe_not_equal, schedule_update, select_multiple_value, select_option, select_options, select_value, self, setContext, set_attributes, set_current_component, set_custom_element_data, set_data, set_data_dev, set_input_type, set_input_value, set_now, set_raf, set_store_value, set_style, set_svg_attributes, space, spread, stop_propagation, subscribe, svg_element, text, tick, time_ranges_to_array, to_number, toggle_class, transition_in, transition_out, update_keyed_each, update_slot, validate_component, validate_each_argument, validate_each_keys, validate_slots, validate_store, xlink_attr };\n","import { noop, safe_not_equal, subscribe, run_all, is_function } from '../internal';\nexport { get_store_value as get } from '../internal';\n\nconst subscriber_queue = [];\n/**\n * Creates a `Readable` store that allows reading by subscription.\n * @param value initial value\n * @param {StartStopNotifier}start start and stop notifications for subscriptions\n */\nfunction readable(value, start) {\n    return {\n        subscribe: writable(value, start).subscribe\n    };\n}\n/**\n * Create a `Writable` store that allows both updating and reading by subscription.\n * @param {*=}value initial value\n * @param {StartStopNotifier=}start start and stop notifications for subscriptions\n */\nfunction writable(value, start = noop) {\n    let stop;\n    const subscribers = [];\n    function set(new_value) {\n        if (safe_not_equal(value, new_value)) {\n            value = new_value;\n            if (stop) { // store is ready\n                const run_queue = !subscriber_queue.length;\n                for (let i = 0; i < subscribers.length; i += 1) {\n                    const s = subscribers[i];\n                    s[1]();\n                    subscriber_queue.push(s, value);\n                }\n                if (run_queue) {\n                    for (let i = 0; i < subscriber_queue.length; i += 2) {\n                        subscriber_queue[i][0](subscriber_queue[i + 1]);\n                    }\n                    subscriber_queue.length = 0;\n                }\n            }\n        }\n    }\n    function update(fn) {\n        set(fn(value));\n    }\n    function subscribe(run, invalidate = noop) {\n        const subscriber = [run, invalidate];\n        subscribers.push(subscriber);\n        if (subscribers.length === 1) {\n            stop = start(set) || noop;\n        }\n        run(value);\n        return () => {\n            const index = subscribers.indexOf(subscriber);\n            if (index !== -1) {\n                subscribers.splice(index, 1);\n            }\n            if (subscribers.length === 0) {\n                stop();\n                stop = null;\n            }\n        };\n    }\n    return { set, update, subscribe };\n}\nfunction derived(stores, fn, initial_value) {\n    const single = !Array.isArray(stores);\n    const stores_array = single\n        ? [stores]\n        : stores;\n    const auto = fn.length < 2;\n    return readable(initial_value, (set) => {\n        let inited = false;\n        const values = [];\n        let pending = 0;\n        let cleanup = noop;\n        const sync = () => {\n            if (pending) {\n                return;\n            }\n            cleanup();\n            const result = fn(single ? values[0] : values, set);\n            if (auto) {\n                set(result);\n            }\n            else {\n                cleanup = is_function(result) ? result : noop;\n            }\n        };\n        const unsubscribers = stores_array.map((store, i) => subscribe(store, (value) => {\n            values[i] = value;\n            pending &= ~(1 << i);\n            if (inited) {\n                sync();\n            }\n        }, () => {\n            pending |= (1 << i);\n        }));\n        inited = true;\n        sync();\n        return function stop() {\n            run_all(unsubscribers);\n            cleanup();\n        };\n    });\n}\n\nexport { derived, readable, writable };\n","import { writable } from 'svelte/store';\n\nexport const graphViewConfigStore = writable({});\nexport const embeddingViewConfigStore = writable({});\nexport const tableViewConfigStore = writable({});\nexport const instanceViewConfigStore = writable({});\nexport const mapViewConfigStore = writable({});\nexport const lowerMapViewConfigStore = writable({});\n\nexport const tooltipConfigStore = writable({\n  show: false,\n  html: '',\n  left: 0,\n  top: 0,\n  width: 0,\n  maxWidth: 0,\n  fontSize: '1em'\n});\n\nexport const comparisonViewStore = writable({\n  inComparison: false,\n  height: 0\n});\n\nexport const svgStore = writable(undefined);\nexport const currInstanceStore = writable(1562);\nexport const instanceIDStore = writable(1562);\n\nexport const hoverTokenStore = writable();\nexport const wordToSubwordMapStore = writable({});\n\nexport const attentionHeadColorStore = writable({});\n\nexport const modalStore = writable({\n  show: false,\n  attention: null,\n  layer: null,\n  head: null\n});\n\nexport const tableModalStore = writable({\n  show: false,\n  attention: null,\n  layer: null,\n  head: null\n});\n\nexport const sideStore = writable({\n  show: false,\n  attention: null,\n  layer: null,\n  head: null\n});\n\nexport const mapHeadStore = writable({\n  layer: 9,\n  head: 8\n});\n\nexport const graphHeadStore = writable({\n  layer: 9,\n  head: 8\n});\n","export default function(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","import ascending from \"./ascending.js\";\n\nexport default function(f) {\n  let delta = f;\n  let compare = f;\n\n  if (f.length === 1) {\n    delta = (d, x) => f(d) - x;\n    compare = ascendingComparator(f);\n  }\n\n  function left(a, x, lo, hi) {\n    if (lo == null) lo = 0;\n    if (hi == null) hi = a.length;\n    while (lo < hi) {\n      const mid = (lo + hi) >>> 1;\n      if (compare(a[mid], x) < 0) lo = mid + 1;\n      else hi = mid;\n    }\n    return lo;\n  }\n\n  function right(a, x, lo, hi) {\n    if (lo == null) lo = 0;\n    if (hi == null) hi = a.length;\n    while (lo < hi) {\n      const mid = (lo + hi) >>> 1;\n      if (compare(a[mid], x) > 0) hi = mid;\n      else lo = mid + 1;\n    }\n    return lo;\n  }\n\n  function center(a, x, lo, hi) {\n    if (lo == null) lo = 0;\n    if (hi == null) hi = a.length;\n    const i = left(a, x, lo, hi - 1);\n    return i > lo && delta(a[i - 1], x) > -delta(a[i], x) ? i - 1 : i;\n  }\n\n  return {left, center, right};\n}\n\nfunction ascendingComparator(f) {\n  return (d, x) => ascending(f(d), x);\n}\n","import ascending from \"./ascending.js\";\nimport bisector from \"./bisector.js\";\nimport number from \"./number.js\";\n\nconst ascendingBisect = bisector(ascending);\nexport const bisectRight = ascendingBisect.right;\nexport const bisectLeft = ascendingBisect.left;\nexport const bisectCenter = bisector(number).center;\nexport default bisectRight;\n","export default function(x) {\n  return x === null ? NaN : +x;\n}\n\nexport function* numbers(values, valueof) {\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value != null && (value = +value) >= value) {\n        yield value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null && (value = +value) >= value) {\n        yield value;\n      }\n    }\n  }\n}\n","export default function(values, valueof) {\n  let min;\n  let max;\n  if (valueof === undefined) {\n    for (const value of values) {\n      if (value != null) {\n        if (min === undefined) {\n          if (value >= value) min = max = value;\n        } else {\n          if (min > value) min = value;\n          if (max < value) max = value;\n        }\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null) {\n        if (min === undefined) {\n          if (value >= value) min = max = value;\n        } else {\n          if (min > value) min = value;\n          if (max < value) max = value;\n        }\n      }\n    }\n  }\n  return [min, max];\n}\n","var e10 = Math.sqrt(50),\n    e5 = Math.sqrt(10),\n    e2 = Math.sqrt(2);\n\nexport default function(start, stop, count) {\n  var reverse,\n      i = -1,\n      n,\n      ticks,\n      step;\n\n  stop = +stop, start = +start, count = +count;\n  if (start === stop && count > 0) return [start];\n  if (reverse = stop < start) n = start, start = stop, stop = n;\n  if ((step = tickIncrement(start, stop, count)) === 0 || !isFinite(step)) return [];\n\n  if (step > 0) {\n    start = Math.ceil(start / step);\n    stop = Math.floor(stop / step);\n    ticks = new Array(n = Math.ceil(stop - start + 1));\n    while (++i < n) ticks[i] = (start + i) * step;\n  } else {\n    step = -step;\n    start = Math.ceil(start * step);\n    stop = Math.floor(stop * step);\n    ticks = new Array(n = Math.ceil(stop - start + 1));\n    while (++i < n) ticks[i] = (start + i) / step;\n  }\n\n  if (reverse) ticks.reverse();\n\n  return ticks;\n}\n\nexport function tickIncrement(start, stop, count) {\n  var step = (stop - start) / Math.max(0, count),\n      power = Math.floor(Math.log(step) / Math.LN10),\n      error = step / Math.pow(10, power);\n  return power >= 0\n      ? (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1) * Math.pow(10, power)\n      : -Math.pow(10, -power) / (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1);\n}\n\nexport function tickStep(start, stop, count) {\n  var step0 = Math.abs(stop - start) / Math.max(0, count),\n      step1 = Math.pow(10, Math.floor(Math.log(step0) / Math.LN10)),\n      error = step0 / step1;\n  if (error >= e10) step1 *= 10;\n  else if (error >= e5) step1 *= 5;\n  else if (error >= e2) step1 *= 2;\n  return stop < start ? -step1 : step1;\n}\n","export default function max(values, valueof) {\n  let max;\n  if (valueof === undefined) {\n    for (const value of values) {\n      if (value != null\n          && (max < value || (max === undefined && value >= value))) {\n        max = value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null\n          && (max < value || (max === undefined && value >= value))) {\n        max = value;\n      }\n    }\n  }\n  return max;\n}\n","export var slice = Array.prototype.slice;\n","export default function(x) {\n  return x;\n}\n","import {slice} from \"./array.js\";\nimport identity from \"./identity.js\";\n\nvar top = 1,\n    right = 2,\n    bottom = 3,\n    left = 4,\n    epsilon = 1e-6;\n\nfunction translateX(x) {\n  return \"translate(\" + (x + 0.5) + \",0)\";\n}\n\nfunction translateY(y) {\n  return \"translate(0,\" + (y + 0.5) + \")\";\n}\n\nfunction number(scale) {\n  return d => +scale(d);\n}\n\nfunction center(scale) {\n  var offset = Math.max(0, scale.bandwidth() - 1) / 2; // Adjust for 0.5px offset.\n  if (scale.round()) offset = Math.round(offset);\n  return function(d) {\n    return +scale(d) + offset;\n  };\n}\n\nfunction entering() {\n  return !this.__axis;\n}\n\nfunction axis(orient, scale) {\n  var tickArguments = [],\n      tickValues = null,\n      tickFormat = null,\n      tickSizeInner = 6,\n      tickSizeOuter = 6,\n      tickPadding = 3,\n      k = orient === top || orient === left ? -1 : 1,\n      x = orient === left || orient === right ? \"x\" : \"y\",\n      transform = orient === top || orient === bottom ? translateX : translateY;\n\n  function axis(context) {\n    var values = tickValues == null ? (scale.ticks ? scale.ticks.apply(scale, tickArguments) : scale.domain()) : tickValues,\n        format = tickFormat == null ? (scale.tickFormat ? scale.tickFormat.apply(scale, tickArguments) : identity) : tickFormat,\n        spacing = Math.max(tickSizeInner, 0) + tickPadding,\n        range = scale.range(),\n        range0 = +range[0] + 0.5,\n        range1 = +range[range.length - 1] + 0.5,\n        position = (scale.bandwidth ? center : number)(scale.copy()),\n        selection = context.selection ? context.selection() : context,\n        path = selection.selectAll(\".domain\").data([null]),\n        tick = selection.selectAll(\".tick\").data(values, scale).order(),\n        tickExit = tick.exit(),\n        tickEnter = tick.enter().append(\"g\").attr(\"class\", \"tick\"),\n        line = tick.select(\"line\"),\n        text = tick.select(\"text\");\n\n    path = path.merge(path.enter().insert(\"path\", \".tick\")\n        .attr(\"class\", \"domain\")\n        .attr(\"stroke\", \"currentColor\"));\n\n    tick = tick.merge(tickEnter);\n\n    line = line.merge(tickEnter.append(\"line\")\n        .attr(\"stroke\", \"currentColor\")\n        .attr(x + \"2\", k * tickSizeInner));\n\n    text = text.merge(tickEnter.append(\"text\")\n        .attr(\"fill\", \"currentColor\")\n        .attr(x, k * spacing)\n        .attr(\"dy\", orient === top ? \"0em\" : orient === bottom ? \"0.71em\" : \"0.32em\"));\n\n    if (context !== selection) {\n      path = path.transition(context);\n      tick = tick.transition(context);\n      line = line.transition(context);\n      text = text.transition(context);\n\n      tickExit = tickExit.transition(context)\n          .attr(\"opacity\", epsilon)\n          .attr(\"transform\", function(d) { return isFinite(d = position(d)) ? transform(d) : this.getAttribute(\"transform\"); });\n\n      tickEnter\n          .attr(\"opacity\", epsilon)\n          .attr(\"transform\", function(d) { var p = this.parentNode.__axis; return transform(p && isFinite(p = p(d)) ? p : position(d)); });\n    }\n\n    tickExit.remove();\n\n    path\n        .attr(\"d\", orient === left || orient == right\n            ? (tickSizeOuter ? \"M\" + k * tickSizeOuter + \",\" + range0 + \"H0.5V\" + range1 + \"H\" + k * tickSizeOuter : \"M0.5,\" + range0 + \"V\" + range1)\n            : (tickSizeOuter ? \"M\" + range0 + \",\" + k * tickSizeOuter + \"V0.5H\" + range1 + \"V\" + k * tickSizeOuter : \"M\" + range0 + \",0.5H\" + range1));\n\n    tick\n        .attr(\"opacity\", 1)\n        .attr(\"transform\", function(d) { return transform(position(d)); });\n\n    line\n        .attr(x + \"2\", k * tickSizeInner);\n\n    text\n        .attr(x, k * spacing)\n        .text(format);\n\n    selection.filter(entering)\n        .attr(\"fill\", \"none\")\n        .attr(\"font-size\", 10)\n        .attr(\"font-family\", \"sans-serif\")\n        .attr(\"text-anchor\", orient === right ? \"start\" : orient === left ? \"end\" : \"middle\");\n\n    selection\n        .each(function() { this.__axis = position; });\n  }\n\n  axis.scale = function(_) {\n    return arguments.length ? (scale = _, axis) : scale;\n  };\n\n  axis.ticks = function() {\n    return tickArguments = slice.call(arguments), axis;\n  };\n\n  axis.tickArguments = function(_) {\n    return arguments.length ? (tickArguments = _ == null ? [] : slice.call(_), axis) : tickArguments.slice();\n  };\n\n  axis.tickValues = function(_) {\n    return arguments.length ? (tickValues = _ == null ? null : slice.call(_), axis) : tickValues && tickValues.slice();\n  };\n\n  axis.tickFormat = function(_) {\n    return arguments.length ? (tickFormat = _, axis) : tickFormat;\n  };\n\n  axis.tickSize = function(_) {\n    return arguments.length ? (tickSizeInner = tickSizeOuter = +_, axis) : tickSizeInner;\n  };\n\n  axis.tickSizeInner = function(_) {\n    return arguments.length ? (tickSizeInner = +_, axis) : tickSizeInner;\n  };\n\n  axis.tickSizeOuter = function(_) {\n    return arguments.length ? (tickSizeOuter = +_, axis) : tickSizeOuter;\n  };\n\n  axis.tickPadding = function(_) {\n    return arguments.length ? (tickPadding = +_, axis) : tickPadding;\n  };\n\n  return axis;\n}\n\nexport function axisTop(scale) {\n  return axis(top, scale);\n}\n\nexport function axisRight(scale) {\n  return axis(right, scale);\n}\n\nexport function axisBottom(scale) {\n  return axis(bottom, scale);\n}\n\nexport function axisLeft(scale) {\n  return axis(left, scale);\n}\n","var noop = {value: () => {}};\n\nfunction dispatch() {\n  for (var i = 0, n = arguments.length, _ = {}, t; i < n; ++i) {\n    if (!(t = arguments[i] + \"\") || (t in _) || /[\\s.]/.test(t)) throw new Error(\"illegal type: \" + t);\n    _[t] = [];\n  }\n  return new Dispatch(_);\n}\n\nfunction Dispatch(_) {\n  this._ = _;\n}\n\nfunction parseTypenames(typenames, types) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    if (t && !types.hasOwnProperty(t)) throw new Error(\"unknown type: \" + t);\n    return {type: t, name: name};\n  });\n}\n\nDispatch.prototype = dispatch.prototype = {\n  constructor: Dispatch,\n  on: function(typename, callback) {\n    var _ = this._,\n        T = parseTypenames(typename + \"\", _),\n        t,\n        i = -1,\n        n = T.length;\n\n    // If no callback was specified, return the callback of the given type and name.\n    if (arguments.length < 2) {\n      while (++i < n) if ((t = (typename = T[i]).type) && (t = get(_[t], typename.name))) return t;\n      return;\n    }\n\n    // If a type was specified, set the callback for the given type and name.\n    // Otherwise, if a null callback was specified, remove callbacks of the given name.\n    if (callback != null && typeof callback !== \"function\") throw new Error(\"invalid callback: \" + callback);\n    while (++i < n) {\n      if (t = (typename = T[i]).type) _[t] = set(_[t], typename.name, callback);\n      else if (callback == null) for (t in _) _[t] = set(_[t], typename.name, null);\n    }\n\n    return this;\n  },\n  copy: function() {\n    var copy = {}, _ = this._;\n    for (var t in _) copy[t] = _[t].slice();\n    return new Dispatch(copy);\n  },\n  call: function(type, that) {\n    if ((n = arguments.length - 2) > 0) for (var args = new Array(n), i = 0, n, t; i < n; ++i) args[i] = arguments[i + 2];\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  },\n  apply: function(type, that, args) {\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (var t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  }\n};\n\nfunction get(type, name) {\n  for (var i = 0, n = type.length, c; i < n; ++i) {\n    if ((c = type[i]).name === name) {\n      return c.value;\n    }\n  }\n}\n\nfunction set(type, name, callback) {\n  for (var i = 0, n = type.length; i < n; ++i) {\n    if (type[i].name === name) {\n      type[i] = noop, type = type.slice(0, i).concat(type.slice(i + 1));\n      break;\n    }\n  }\n  if (callback != null) type.push({name: name, value: callback});\n  return type;\n}\n\nexport default dispatch;\n","export var xhtml = \"http://www.w3.org/1999/xhtml\";\n\nexport default {\n  svg: \"http://www.w3.org/2000/svg\",\n  xhtml: xhtml,\n  xlink: \"http://www.w3.org/1999/xlink\",\n  xml: \"http://www.w3.org/XML/1998/namespace\",\n  xmlns: \"http://www.w3.org/2000/xmlns/\"\n};\n","import namespaces from \"./namespaces.js\";\n\nexport default function(name) {\n  var prefix = name += \"\", i = prefix.indexOf(\":\");\n  if (i >= 0 && (prefix = name.slice(0, i)) !== \"xmlns\") name = name.slice(i + 1);\n  return namespaces.hasOwnProperty(prefix) ? {space: namespaces[prefix], local: name} : name; // eslint-disable-line no-prototype-builtins\n}\n","import namespace from \"./namespace.js\";\nimport {xhtml} from \"./namespaces.js\";\n\nfunction creatorInherit(name) {\n  return function() {\n    var document = this.ownerDocument,\n        uri = this.namespaceURI;\n    return uri === xhtml && document.documentElement.namespaceURI === xhtml\n        ? document.createElement(name)\n        : document.createElementNS(uri, name);\n  };\n}\n\nfunction creatorFixed(fullname) {\n  return function() {\n    return this.ownerDocument.createElementNS(fullname.space, fullname.local);\n  };\n}\n\nexport default function(name) {\n  var fullname = namespace(name);\n  return (fullname.local\n      ? creatorFixed\n      : creatorInherit)(fullname);\n}\n","function none() {}\n\nexport default function(selector) {\n  return selector == null ? none : function() {\n    return this.querySelector(selector);\n  };\n}\n","export default function(x) {\n  return typeof x === \"object\" && \"length\" in x\n    ? x // Array, TypedArray, NodeList, array-like\n    : Array.from(x); // Map, Set, iterable, string, or anything else\n}\n","function empty() {\n  return [];\n}\n\nexport default function(selector) {\n  return selector == null ? empty : function() {\n    return this.querySelectorAll(selector);\n  };\n}\n","export default function(selector) {\n  return function() {\n    return this.matches(selector);\n  };\n}\n\nexport function childMatcher(selector) {\n  return function(node) {\n    return node.matches(selector);\n  };\n}\n\n","import {childMatcher} from \"../matcher.js\";\n\nvar find = Array.prototype.find;\n\nfunction childFind(match) {\n  return function() {\n    return find.call(this.children, match);\n  };\n}\n\nfunction childFirst() {\n  return this.firstElementChild;\n}\n\nexport default function(match) {\n  return this.select(match == null ? childFirst\n      : childFind(typeof match === \"function\" ? match : childMatcher(match)));\n}\n","import {childMatcher} from \"../matcher.js\";\n\nvar filter = Array.prototype.filter;\n\nfunction children() {\n  return this.children;\n}\n\nfunction childrenFilter(match) {\n  return function() {\n    return filter.call(this.children, match);\n  };\n}\n\nexport default function(match) {\n  return this.selectAll(match == null ? children\n      : childrenFilter(typeof match === \"function\" ? match : childMatcher(match)));\n}\n","export default function(update) {\n  return new Array(update.length);\n}\n","import sparse from \"./sparse.js\";\nimport {Selection} from \"./index.js\";\n\nexport default function() {\n  return new Selection(this._enter || this._groups.map(sparse), this._parents);\n}\n\nexport function EnterNode(parent, datum) {\n  this.ownerDocument = parent.ownerDocument;\n  this.namespaceURI = parent.namespaceURI;\n  this._next = null;\n  this._parent = parent;\n  this.__data__ = datum;\n}\n\nEnterNode.prototype = {\n  constructor: EnterNode,\n  appendChild: function(child) { return this._parent.insertBefore(child, this._next); },\n  insertBefore: function(child, next) { return this._parent.insertBefore(child, next); },\n  querySelector: function(selector) { return this._parent.querySelector(selector); },\n  querySelectorAll: function(selector) { return this._parent.querySelectorAll(selector); }\n};\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import {Selection} from \"./index.js\";\nimport {EnterNode} from \"./enter.js\";\nimport array from \"../array.js\";\nimport constant from \"../constant.js\";\n\nfunction bindIndex(parent, group, enter, update, exit, data) {\n  var i = 0,\n      node,\n      groupLength = group.length,\n      dataLength = data.length;\n\n  // Put any non-null nodes that fit into update.\n  // Put any null nodes into enter.\n  // Put any remaining data into enter.\n  for (; i < dataLength; ++i) {\n    if (node = group[i]) {\n      node.__data__ = data[i];\n      update[i] = node;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Put any non-null nodes that don’t fit into exit.\n  for (; i < groupLength; ++i) {\n    if (node = group[i]) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction bindKey(parent, group, enter, update, exit, data, key) {\n  var i,\n      node,\n      nodeByKeyValue = new Map,\n      groupLength = group.length,\n      dataLength = data.length,\n      keyValues = new Array(groupLength),\n      keyValue;\n\n  // Compute the key for each node.\n  // If multiple nodes have the same key, the duplicates are added to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if (node = group[i]) {\n      keyValues[i] = keyValue = key.call(node, node.__data__, i, group) + \"\";\n      if (nodeByKeyValue.has(keyValue)) {\n        exit[i] = node;\n      } else {\n        nodeByKeyValue.set(keyValue, node);\n      }\n    }\n  }\n\n  // Compute the key for each datum.\n  // If there a node associated with this key, join and add it to update.\n  // If there is not (or the key is a duplicate), add it to enter.\n  for (i = 0; i < dataLength; ++i) {\n    keyValue = key.call(parent, data[i], i, data) + \"\";\n    if (node = nodeByKeyValue.get(keyValue)) {\n      update[i] = node;\n      node.__data__ = data[i];\n      nodeByKeyValue.delete(keyValue);\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Add any remaining nodes that were not bound to data to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if ((node = group[i]) && (nodeByKeyValue.get(keyValues[i]) === node)) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction datum(node) {\n  return node.__data__;\n}\n\nexport default function(value, key) {\n  if (!arguments.length) return Array.from(this, datum);\n\n  var bind = key ? bindKey : bindIndex,\n      parents = this._parents,\n      groups = this._groups;\n\n  if (typeof value !== \"function\") value = constant(value);\n\n  for (var m = groups.length, update = new Array(m), enter = new Array(m), exit = new Array(m), j = 0; j < m; ++j) {\n    var parent = parents[j],\n        group = groups[j],\n        groupLength = group.length,\n        data = array(value.call(parent, parent && parent.__data__, j, parents)),\n        dataLength = data.length,\n        enterGroup = enter[j] = new Array(dataLength),\n        updateGroup = update[j] = new Array(dataLength),\n        exitGroup = exit[j] = new Array(groupLength);\n\n    bind(parent, group, enterGroup, updateGroup, exitGroup, data, key);\n\n    // Now connect the enter nodes to their following update node, such that\n    // appendChild can insert the materialized enter node before this node,\n    // rather than at the end of the parent node.\n    for (var i0 = 0, i1 = 0, previous, next; i0 < dataLength; ++i0) {\n      if (previous = enterGroup[i0]) {\n        if (i0 >= i1) i1 = i0 + 1;\n        while (!(next = updateGroup[i1]) && ++i1 < dataLength);\n        previous._next = next || null;\n      }\n    }\n  }\n\n  update = new Selection(update, parents);\n  update._enter = enter;\n  update._exit = exit;\n  return update;\n}\n","import {Selection} from \"./index.js\";\n\nexport default function(compare) {\n  if (!compare) compare = ascending;\n\n  function compareNode(a, b) {\n    return a && b ? compare(a.__data__, b.__data__) : !a - !b;\n  }\n\n  for (var groups = this._groups, m = groups.length, sortgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, sortgroup = sortgroups[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        sortgroup[i] = node;\n      }\n    }\n    sortgroup.sort(compareNode);\n  }\n\n  return new Selection(sortgroups, this._parents).order();\n}\n\nfunction ascending(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","import namespace from \"../namespace.js\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, value) {\n  return function() {\n    this.setAttribute(name, value);\n  };\n}\n\nfunction attrConstantNS(fullname, value) {\n  return function() {\n    this.setAttributeNS(fullname.space, fullname.local, value);\n  };\n}\n\nfunction attrFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttribute(name);\n    else this.setAttribute(name, v);\n  };\n}\n\nfunction attrFunctionNS(fullname, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttributeNS(fullname.space, fullname.local);\n    else this.setAttributeNS(fullname.space, fullname.local, v);\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name);\n\n  if (arguments.length < 2) {\n    var node = this.node();\n    return fullname.local\n        ? node.getAttributeNS(fullname.space, fullname.local)\n        : node.getAttribute(fullname);\n  }\n\n  return this.each((value == null\n      ? (fullname.local ? attrRemoveNS : attrRemove) : (typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)\n      : (fullname.local ? attrConstantNS : attrConstant)))(fullname, value));\n}\n","export default function(node) {\n  return (node.ownerDocument && node.ownerDocument.defaultView) // node is a Node\n      || (node.document && node) // node is a Window\n      || node.defaultView; // node is a Document\n}\n","import defaultView from \"../window.js\";\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, value, priority) {\n  return function() {\n    this.style.setProperty(name, value, priority);\n  };\n}\n\nfunction styleFunction(name, value, priority) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.style.removeProperty(name);\n    else this.style.setProperty(name, v, priority);\n  };\n}\n\nexport default function(name, value, priority) {\n  return arguments.length > 1\n      ? this.each((value == null\n            ? styleRemove : typeof value === \"function\"\n            ? styleFunction\n            : styleConstant)(name, value, priority == null ? \"\" : priority))\n      : styleValue(this.node(), name);\n}\n\nexport function styleValue(node, name) {\n  return node.style.getPropertyValue(name)\n      || defaultView(node).getComputedStyle(node, null).getPropertyValue(name);\n}\n","function propertyRemove(name) {\n  return function() {\n    delete this[name];\n  };\n}\n\nfunction propertyConstant(name, value) {\n  return function() {\n    this[name] = value;\n  };\n}\n\nfunction propertyFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) delete this[name];\n    else this[name] = v;\n  };\n}\n\nexport default function(name, value) {\n  return arguments.length > 1\n      ? this.each((value == null\n          ? propertyRemove : typeof value === \"function\"\n          ? propertyFunction\n          : propertyConstant)(name, value))\n      : this.node()[name];\n}\n","function classArray(string) {\n  return string.trim().split(/^|\\s+/);\n}\n\nfunction classList(node) {\n  return node.classList || new ClassList(node);\n}\n\nfunction ClassList(node) {\n  this._node = node;\n  this._names = classArray(node.getAttribute(\"class\") || \"\");\n}\n\nClassList.prototype = {\n  add: function(name) {\n    var i = this._names.indexOf(name);\n    if (i < 0) {\n      this._names.push(name);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  remove: function(name) {\n    var i = this._names.indexOf(name);\n    if (i >= 0) {\n      this._names.splice(i, 1);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  contains: function(name) {\n    return this._names.indexOf(name) >= 0;\n  }\n};\n\nfunction classedAdd(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.add(names[i]);\n}\n\nfunction classedRemove(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.remove(names[i]);\n}\n\nfunction classedTrue(names) {\n  return function() {\n    classedAdd(this, names);\n  };\n}\n\nfunction classedFalse(names) {\n  return function() {\n    classedRemove(this, names);\n  };\n}\n\nfunction classedFunction(names, value) {\n  return function() {\n    (value.apply(this, arguments) ? classedAdd : classedRemove)(this, names);\n  };\n}\n\nexport default function(name, value) {\n  var names = classArray(name + \"\");\n\n  if (arguments.length < 2) {\n    var list = classList(this.node()), i = -1, n = names.length;\n    while (++i < n) if (!list.contains(names[i])) return false;\n    return true;\n  }\n\n  return this.each((typeof value === \"function\"\n      ? classedFunction : value\n      ? classedTrue\n      : classedFalse)(names, value));\n}\n","function textRemove() {\n  this.textContent = \"\";\n}\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.textContent = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? textRemove : (typeof value === \"function\"\n          ? textFunction\n          : textConstant)(value))\n      : this.node().textContent;\n}\n","function htmlRemove() {\n  this.innerHTML = \"\";\n}\n\nfunction htmlConstant(value) {\n  return function() {\n    this.innerHTML = value;\n  };\n}\n\nfunction htmlFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.innerHTML = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? htmlRemove : (typeof value === \"function\"\n          ? htmlFunction\n          : htmlConstant)(value))\n      : this.node().innerHTML;\n}\n","function raise() {\n  if (this.nextSibling) this.parentNode.appendChild(this);\n}\n\nexport default function() {\n  return this.each(raise);\n}\n","function lower() {\n  if (this.previousSibling) this.parentNode.insertBefore(this, this.parentNode.firstChild);\n}\n\nexport default function() {\n  return this.each(lower);\n}\n","import creator from \"../creator.js\";\nimport selector from \"../selector.js\";\n\nfunction constantNull() {\n  return null;\n}\n\nexport default function(name, before) {\n  var create = typeof name === \"function\" ? name : creator(name),\n      select = before == null ? constantNull : typeof before === \"function\" ? before : selector(before);\n  return this.select(function() {\n    return this.insertBefore(create.apply(this, arguments), select.apply(this, arguments) || null);\n  });\n}\n","function remove() {\n  var parent = this.parentNode;\n  if (parent) parent.removeChild(this);\n}\n\nexport default function() {\n  return this.each(remove);\n}\n","function selection_cloneShallow() {\n  var clone = this.cloneNode(false), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nfunction selection_cloneDeep() {\n  var clone = this.cloneNode(true), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nexport default function(deep) {\n  return this.select(deep ? selection_cloneDeep : selection_cloneShallow);\n}\n","function contextListener(listener) {\n  return function(event) {\n    listener.call(this, event, this.__data__);\n  };\n}\n\nfunction parseTypenames(typenames) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    return {type: t, name: name};\n  });\n}\n\nfunction onRemove(typename) {\n  return function() {\n    var on = this.__on;\n    if (!on) return;\n    for (var j = 0, i = -1, m = on.length, o; j < m; ++j) {\n      if (o = on[j], (!typename.type || o.type === typename.type) && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n      } else {\n        on[++i] = o;\n      }\n    }\n    if (++i) on.length = i;\n    else delete this.__on;\n  };\n}\n\nfunction onAdd(typename, value, options) {\n  return function() {\n    var on = this.__on, o, listener = contextListener(value);\n    if (on) for (var j = 0, m = on.length; j < m; ++j) {\n      if ((o = on[j]).type === typename.type && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n        this.addEventListener(o.type, o.listener = listener, o.options = options);\n        o.value = value;\n        return;\n      }\n    }\n    this.addEventListener(typename.type, listener, options);\n    o = {type: typename.type, name: typename.name, value: value, listener: listener, options: options};\n    if (!on) this.__on = [o];\n    else on.push(o);\n  };\n}\n\nexport default function(typename, value, options) {\n  var typenames = parseTypenames(typename + \"\"), i, n = typenames.length, t;\n\n  if (arguments.length < 2) {\n    var on = this.node().__on;\n    if (on) for (var j = 0, m = on.length, o; j < m; ++j) {\n      for (i = 0, o = on[j]; i < n; ++i) {\n        if ((t = typenames[i]).type === o.type && t.name === o.name) {\n          return o.value;\n        }\n      }\n    }\n    return;\n  }\n\n  on = value ? onAdd : onRemove;\n  for (i = 0; i < n; ++i) this.each(on(typenames[i], value, options));\n  return this;\n}\n","import defaultView from \"../window.js\";\n\nfunction dispatchEvent(node, type, params) {\n  var window = defaultView(node),\n      event = window.CustomEvent;\n\n  if (typeof event === \"function\") {\n    event = new event(type, params);\n  } else {\n    event = window.document.createEvent(\"Event\");\n    if (params) event.initEvent(type, params.bubbles, params.cancelable), event.detail = params.detail;\n    else event.initEvent(type, false, false);\n  }\n\n  node.dispatchEvent(event);\n}\n\nfunction dispatchConstant(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params);\n  };\n}\n\nfunction dispatchFunction(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params.apply(this, arguments));\n  };\n}\n\nexport default function(type, params) {\n  return this.each((typeof params === \"function\"\n      ? dispatchFunction\n      : dispatchConstant)(type, params));\n}\n","import selection_select from \"./select.js\";\nimport selection_selectAll from \"./selectAll.js\";\nimport selection_selectChild from \"./selectChild.js\";\nimport selection_selectChildren from \"./selectChildren.js\";\nimport selection_filter from \"./filter.js\";\nimport selection_data from \"./data.js\";\nimport selection_enter from \"./enter.js\";\nimport selection_exit from \"./exit.js\";\nimport selection_join from \"./join.js\";\nimport selection_merge from \"./merge.js\";\nimport selection_order from \"./order.js\";\nimport selection_sort from \"./sort.js\";\nimport selection_call from \"./call.js\";\nimport selection_nodes from \"./nodes.js\";\nimport selection_node from \"./node.js\";\nimport selection_size from \"./size.js\";\nimport selection_empty from \"./empty.js\";\nimport selection_each from \"./each.js\";\nimport selection_attr from \"./attr.js\";\nimport selection_style from \"./style.js\";\nimport selection_property from \"./property.js\";\nimport selection_classed from \"./classed.js\";\nimport selection_text from \"./text.js\";\nimport selection_html from \"./html.js\";\nimport selection_raise from \"./raise.js\";\nimport selection_lower from \"./lower.js\";\nimport selection_append from \"./append.js\";\nimport selection_insert from \"./insert.js\";\nimport selection_remove from \"./remove.js\";\nimport selection_clone from \"./clone.js\";\nimport selection_datum from \"./datum.js\";\nimport selection_on from \"./on.js\";\nimport selection_dispatch from \"./dispatch.js\";\nimport selection_iterator from \"./iterator.js\";\n\nexport var root = [null];\n\nexport function Selection(groups, parents) {\n  this._groups = groups;\n  this._parents = parents;\n}\n\nfunction selection() {\n  return new Selection([[document.documentElement]], root);\n}\n\nfunction selection_selection() {\n  return this;\n}\n\nSelection.prototype = selection.prototype = {\n  constructor: Selection,\n  select: selection_select,\n  selectAll: selection_selectAll,\n  selectChild: selection_selectChild,\n  selectChildren: selection_selectChildren,\n  filter: selection_filter,\n  data: selection_data,\n  enter: selection_enter,\n  exit: selection_exit,\n  join: selection_join,\n  merge: selection_merge,\n  selection: selection_selection,\n  order: selection_order,\n  sort: selection_sort,\n  call: selection_call,\n  nodes: selection_nodes,\n  node: selection_node,\n  size: selection_size,\n  empty: selection_empty,\n  each: selection_each,\n  attr: selection_attr,\n  style: selection_style,\n  property: selection_property,\n  classed: selection_classed,\n  text: selection_text,\n  html: selection_html,\n  raise: selection_raise,\n  lower: selection_lower,\n  append: selection_append,\n  insert: selection_insert,\n  remove: selection_remove,\n  clone: selection_clone,\n  datum: selection_datum,\n  on: selection_on,\n  dispatch: selection_dispatch,\n  [Symbol.iterator]: selection_iterator\n};\n\nexport default selection;\n","import {Selection, root} from \"./selection/index.js\";\n\nexport default function(selector) {\n  return typeof selector === \"string\"\n      ? new Selection([[document.querySelector(selector)]], [document.documentElement])\n      : new Selection([[selector]], root);\n}\n","import sourceEvent from \"./sourceEvent.js\";\n\nexport default function(event, node) {\n  event = sourceEvent(event);\n  if (node === undefined) node = event.currentTarget;\n  if (node) {\n    var svg = node.ownerSVGElement || node;\n    if (svg.createSVGPoint) {\n      var point = svg.createSVGPoint();\n      point.x = event.clientX, point.y = event.clientY;\n      point = point.matrixTransform(node.getScreenCTM().inverse());\n      return [point.x, point.y];\n    }\n    if (node.getBoundingClientRect) {\n      var rect = node.getBoundingClientRect();\n      return [event.clientX - rect.left - node.clientLeft, event.clientY - rect.top - node.clientTop];\n    }\n  }\n  return [event.pageX, event.pageY];\n}\n","export default function(event) {\n  let sourceEvent;\n  while (sourceEvent = event.sourceEvent) event = sourceEvent;\n  return event;\n}\n","import array from \"./array.js\";\nimport {Selection, root} from \"./selection/index.js\";\n\nexport default function(selector) {\n  return typeof selector === \"string\"\n      ? new Selection([document.querySelectorAll(selector)], [document.documentElement])\n      : new Selection([selector == null ? [] : array(selector)], root);\n}\n","export function nopropagation(event) {\n  event.stopImmediatePropagation();\n}\n\nexport default function(event) {\n  event.preventDefault();\n  event.stopImmediatePropagation();\n}\n","import {select} from \"d3-selection\";\nimport noevent from \"./noevent.js\";\n\nexport default function(view) {\n  var root = view.document.documentElement,\n      selection = select(view).on(\"dragstart.drag\", noevent, true);\n  if (\"onselectstart\" in root) {\n    selection.on(\"selectstart.drag\", noevent, true);\n  } else {\n    root.__noselect = root.style.MozUserSelect;\n    root.style.MozUserSelect = \"none\";\n  }\n}\n\nexport function yesdrag(view, noclick) {\n  var root = view.document.documentElement,\n      selection = select(view).on(\"dragstart.drag\", null);\n  if (noclick) {\n    selection.on(\"click.drag\", noevent, true);\n    setTimeout(function() { selection.on(\"click.drag\", null); }, 0);\n  }\n  if (\"onselectstart\" in root) {\n    selection.on(\"selectstart.drag\", null);\n  } else {\n    root.style.MozUserSelect = root.__noselect;\n    delete root.__noselect;\n  }\n}\n","import {Selection} from \"./index.js\";\nimport selector from \"../selector.js\";\n\nexport default function(select) {\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","import {Selection} from \"./index.js\";\nimport array from \"../array.js\";\nimport selectorAll from \"../selectorAll.js\";\n\nfunction arrayAll(select) {\n  return function() {\n    var group = select.apply(this, arguments);\n    return group == null ? [] : array(group);\n  };\n}\n\nexport default function(select) {\n  if (typeof select === \"function\") select = arrayAll(select);\n  else select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        subgroups.push(select.call(node, node.__data__, i, group));\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, parents);\n}\n","import {Selection} from \"./index.js\";\nimport matcher from \"../matcher.js\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","import sparse from \"./sparse.js\";\nimport {Selection} from \"./index.js\";\n\nexport default function() {\n  return new Selection(this._exit || this._groups.map(sparse), this._parents);\n}\n","export default function(onenter, onupdate, onexit) {\n  var enter = this.enter(), update = this, exit = this.exit();\n  enter = typeof onenter === \"function\" ? onenter(enter) : enter.append(onenter + \"\");\n  if (onupdate != null) update = onupdate(update);\n  if (onexit == null) exit.remove(); else onexit(exit);\n  return enter && update ? enter.merge(update).order() : update;\n}\n","import {Selection} from \"./index.js\";\n\nexport default function(selection) {\n  if (!(selection instanceof Selection)) throw new Error(\"invalid merge\");\n\n  for (var groups0 = this._groups, groups1 = selection._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Selection(merges, this._parents);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = -1, m = groups.length; ++j < m;) {\n    for (var group = groups[j], i = group.length - 1, next = group[i], node; --i >= 0;) {\n      if (node = group[i]) {\n        if (next && node.compareDocumentPosition(next) ^ 4) next.parentNode.insertBefore(node, next);\n        next = node;\n      }\n    }\n  }\n\n  return this;\n}\n","export default function() {\n  var callback = arguments[0];\n  arguments[0] = this;\n  callback.apply(null, arguments);\n  return this;\n}\n","export default function() {\n  return Array.from(this);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length; i < n; ++i) {\n      var node = group[i];\n      if (node) return node;\n    }\n  }\n\n  return null;\n}\n","export default function() {\n  let size = 0;\n  for (const node of this) ++size; // eslint-disable-line no-unused-vars\n  return size;\n}\n","export default function() {\n  return !this.node();\n}\n","export default function(callback) {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) callback.call(node, node.__data__, i, group);\n    }\n  }\n\n  return this;\n}\n","import creator from \"../creator.js\";\n\nexport default function(name) {\n  var create = typeof name === \"function\" ? name : creator(name);\n  return this.select(function() {\n    return this.appendChild(create.apply(this, arguments));\n  });\n}\n","export default function(value) {\n  return arguments.length\n      ? this.property(\"__data__\", value)\n      : this.node().__data__;\n}\n","export default function*() {\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) yield node;\n    }\n  }\n}\n","export default x => () => x;\n","export default function DragEvent(type, {\n  sourceEvent,\n  subject,\n  target,\n  identifier,\n  active,\n  x, y, dx, dy,\n  dispatch\n}) {\n  Object.defineProperties(this, {\n    type: {value: type, enumerable: true, configurable: true},\n    sourceEvent: {value: sourceEvent, enumerable: true, configurable: true},\n    subject: {value: subject, enumerable: true, configurable: true},\n    target: {value: target, enumerable: true, configurable: true},\n    identifier: {value: identifier, enumerable: true, configurable: true},\n    active: {value: active, enumerable: true, configurable: true},\n    x: {value: x, enumerable: true, configurable: true},\n    y: {value: y, enumerable: true, configurable: true},\n    dx: {value: dx, enumerable: true, configurable: true},\n    dy: {value: dy, enumerable: true, configurable: true},\n    _: {value: dispatch}\n  });\n}\n\nDragEvent.prototype.on = function() {\n  var value = this._.on.apply(this._, arguments);\n  return value === this._ ? this : value;\n};\n","import {dispatch} from \"d3-dispatch\";\nimport {select, pointer} from \"d3-selection\";\nimport nodrag, {yesdrag} from \"./nodrag.js\";\nimport noevent, {nopropagation} from \"./noevent.js\";\nimport constant from \"./constant.js\";\nimport DragEvent from \"./event.js\";\n\n// Ignore right-click, since that should open the context menu.\nfunction defaultFilter(event) {\n  return !event.ctrlKey && !event.button;\n}\n\nfunction defaultContainer() {\n  return this.parentNode;\n}\n\nfunction defaultSubject(event, d) {\n  return d == null ? {x: event.x, y: event.y} : d;\n}\n\nfunction defaultTouchable() {\n  return navigator.maxTouchPoints || (\"ontouchstart\" in this);\n}\n\nexport default function() {\n  var filter = defaultFilter,\n      container = defaultContainer,\n      subject = defaultSubject,\n      touchable = defaultTouchable,\n      gestures = {},\n      listeners = dispatch(\"start\", \"drag\", \"end\"),\n      active = 0,\n      mousedownx,\n      mousedowny,\n      mousemoving,\n      touchending,\n      clickDistance2 = 0;\n\n  function drag(selection) {\n    selection\n        .on(\"mousedown.drag\", mousedowned)\n      .filter(touchable)\n        .on(\"touchstart.drag\", touchstarted)\n        .on(\"touchmove.drag\", touchmoved)\n        .on(\"touchend.drag touchcancel.drag\", touchended)\n        .style(\"touch-action\", \"none\")\n        .style(\"-webkit-tap-highlight-color\", \"rgba(0,0,0,0)\");\n  }\n\n  function mousedowned(event, d) {\n    if (touchending || !filter.call(this, event, d)) return;\n    var gesture = beforestart(this, container.call(this, event, d), event, d, \"mouse\");\n    if (!gesture) return;\n    select(event.view).on(\"mousemove.drag\", mousemoved, true).on(\"mouseup.drag\", mouseupped, true);\n    nodrag(event.view);\n    nopropagation(event);\n    mousemoving = false;\n    mousedownx = event.clientX;\n    mousedowny = event.clientY;\n    gesture(\"start\", event);\n  }\n\n  function mousemoved(event) {\n    noevent(event);\n    if (!mousemoving) {\n      var dx = event.clientX - mousedownx, dy = event.clientY - mousedowny;\n      mousemoving = dx * dx + dy * dy > clickDistance2;\n    }\n    gestures.mouse(\"drag\", event);\n  }\n\n  function mouseupped(event) {\n    select(event.view).on(\"mousemove.drag mouseup.drag\", null);\n    yesdrag(event.view, mousemoving);\n    noevent(event);\n    gestures.mouse(\"end\", event);\n  }\n\n  function touchstarted(event, d) {\n    if (!filter.call(this, event, d)) return;\n    var touches = event.changedTouches,\n        c = container.call(this, event, d),\n        n = touches.length, i, gesture;\n\n    for (i = 0; i < n; ++i) {\n      if (gesture = beforestart(this, c, event, d, touches[i].identifier, touches[i])) {\n        nopropagation(event);\n        gesture(\"start\", event, touches[i]);\n      }\n    }\n  }\n\n  function touchmoved(event) {\n    var touches = event.changedTouches,\n        n = touches.length, i, gesture;\n\n    for (i = 0; i < n; ++i) {\n      if (gesture = gestures[touches[i].identifier]) {\n        noevent(event);\n        gesture(\"drag\", event, touches[i]);\n      }\n    }\n  }\n\n  function touchended(event) {\n    var touches = event.changedTouches,\n        n = touches.length, i, gesture;\n\n    if (touchending) clearTimeout(touchending);\n    touchending = setTimeout(function() { touchending = null; }, 500); // Ghost clicks are delayed!\n    for (i = 0; i < n; ++i) {\n      if (gesture = gestures[touches[i].identifier]) {\n        nopropagation(event);\n        gesture(\"end\", event, touches[i]);\n      }\n    }\n  }\n\n  function beforestart(that, container, event, d, identifier, touch) {\n    var dispatch = listeners.copy(),\n        p = pointer(touch || event, container), dx, dy,\n        s;\n\n    if ((s = subject.call(that, new DragEvent(\"beforestart\", {\n        sourceEvent: event,\n        target: drag,\n        identifier,\n        active,\n        x: p[0],\n        y: p[1],\n        dx: 0,\n        dy: 0,\n        dispatch\n      }), d)) == null) return;\n\n    dx = s.x - p[0] || 0;\n    dy = s.y - p[1] || 0;\n\n    return function gesture(type, event, touch) {\n      var p0 = p, n;\n      switch (type) {\n        case \"start\": gestures[identifier] = gesture, n = active++; break;\n        case \"end\": delete gestures[identifier], --active; // nobreak\n        case \"drag\": p = pointer(touch || event, container), n = active; break;\n      }\n      dispatch.call(\n        type,\n        that,\n        new DragEvent(type, {\n          sourceEvent: event,\n          subject: s,\n          target: drag,\n          identifier,\n          active: n,\n          x: p[0] + dx,\n          y: p[1] + dy,\n          dx: p[0] - p0[0],\n          dy: p[1] - p0[1],\n          dispatch\n        }),\n        d\n      );\n    };\n  }\n\n  drag.filter = function(_) {\n    return arguments.length ? (filter = typeof _ === \"function\" ? _ : constant(!!_), drag) : filter;\n  };\n\n  drag.container = function(_) {\n    return arguments.length ? (container = typeof _ === \"function\" ? _ : constant(_), drag) : container;\n  };\n\n  drag.subject = function(_) {\n    return arguments.length ? (subject = typeof _ === \"function\" ? _ : constant(_), drag) : subject;\n  };\n\n  drag.touchable = function(_) {\n    return arguments.length ? (touchable = typeof _ === \"function\" ? _ : constant(!!_), drag) : touchable;\n  };\n\n  drag.on = function() {\n    var value = listeners.on.apply(listeners, arguments);\n    return value === listeners ? drag : value;\n  };\n\n  drag.clickDistance = function(_) {\n    return arguments.length ? (clickDistance2 = (_ = +_) * _, drag) : Math.sqrt(clickDistance2);\n  };\n\n  return drag;\n}\n","export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n","import define, {extend} from \"./define.js\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex = /^#([0-9a-f]{3,8})$/,\n    reRgbInteger = new RegExp(\"^rgb\\\\(\" + [reI, reI, reI] + \"\\\\)$\"),\n    reRgbPercent = new RegExp(\"^rgb\\\\(\" + [reP, reP, reP] + \"\\\\)$\"),\n    reRgbaInteger = new RegExp(\"^rgba\\\\(\" + [reI, reI, reI, reN] + \"\\\\)$\"),\n    reRgbaPercent = new RegExp(\"^rgba\\\\(\" + [reP, reP, reP, reN] + \"\\\\)$\"),\n    reHslPercent = new RegExp(\"^hsl\\\\(\" + [reN, reP, reP] + \"\\\\)$\"),\n    reHslaPercent = new RegExp(\"^hsla\\\\(\" + [reN, reP, reP, reN] + \"\\\\)$\");\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  copy: function(channels) {\n    return Object.assign(new this.constructor, this, channels);\n  },\n  displayable: function() {\n    return this.rgb().displayable();\n  },\n  hex: color_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: color_formatHex,\n  formatHsl: color_formatHsl,\n  formatRgb: color_formatRgb,\n  toString: color_formatRgb\n});\n\nfunction color_formatHex() {\n  return this.rgb().formatHex();\n}\n\nfunction color_formatHsl() {\n  return hslConvert(this).formatHsl();\n}\n\nfunction color_formatRgb() {\n  return this.rgb().formatRgb();\n}\n\nexport default function color(format) {\n  var m, l;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000\n      : l === 3 ? new Rgb((m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1) // #f00\n      : l === 8 ? rgba(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000\n      : l === 4 ? rgba((m >> 12 & 0xf) | (m >> 8 & 0xf0), (m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), (((m & 0xf) << 4) | (m & 0xf)) / 0xff) // #f000\n      : null) // invalid hex\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb: function() {\n    return this;\n  },\n  displayable: function() {\n    return (-0.5 <= this.r && this.r < 255.5)\n        && (-0.5 <= this.g && this.g < 255.5)\n        && (-0.5 <= this.b && this.b < 255.5)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  hex: rgb_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: rgb_formatHex,\n  formatRgb: rgb_formatRgb,\n  toString: rgb_formatRgb\n}));\n\nfunction rgb_formatHex() {\n  return \"#\" + hex(this.r) + hex(this.g) + hex(this.b);\n}\n\nfunction rgb_formatRgb() {\n  var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n  return (a === 1 ? \"rgb(\" : \"rgba(\")\n      + Math.max(0, Math.min(255, Math.round(this.r) || 0)) + \", \"\n      + Math.max(0, Math.min(255, Math.round(this.g) || 0)) + \", \"\n      + Math.max(0, Math.min(255, Math.round(this.b) || 0))\n      + (a === 1 ? \")\" : \", \" + a + \")\");\n}\n\nfunction hex(value) {\n  value = Math.max(0, Math.min(255, Math.round(value) || 0));\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  displayable: function() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  formatHsl: function() {\n    var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n    return (a === 1 ? \"hsl(\" : \"hsla(\")\n        + (this.h || 0) + \", \"\n        + (this.s || 0) * 100 + \"%, \"\n        + (this.l || 0) * 100 + \"%\"\n        + (a === 1 ? \")\" : \", \" + a + \")\");\n  }\n}));\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n","export const radians = Math.PI / 180;\nexport const degrees = 180 / Math.PI;\n","import define, {extend} from \"./define.js\";\nimport {Color, rgbConvert, Rgb} from \"./color.js\";\nimport {degrees, radians} from \"./math.js\";\n\n// https://observablehq.com/@mbostock/lab-and-rgb\nconst K = 18,\n    Xn = 0.96422,\n    Yn = 1,\n    Zn = 0.82521,\n    t0 = 4 / 29,\n    t1 = 6 / 29,\n    t2 = 3 * t1 * t1,\n    t3 = t1 * t1 * t1;\n\nfunction labConvert(o) {\n  if (o instanceof Lab) return new Lab(o.l, o.a, o.b, o.opacity);\n  if (o instanceof Hcl) return hcl2lab(o);\n  if (!(o instanceof Rgb)) o = rgbConvert(o);\n  var r = rgb2lrgb(o.r),\n      g = rgb2lrgb(o.g),\n      b = rgb2lrgb(o.b),\n      y = xyz2lab((0.2225045 * r + 0.7168786 * g + 0.0606169 * b) / Yn), x, z;\n  if (r === g && g === b) x = z = y; else {\n    x = xyz2lab((0.4360747 * r + 0.3850649 * g + 0.1430804 * b) / Xn);\n    z = xyz2lab((0.0139322 * r + 0.0971045 * g + 0.7141733 * b) / Zn);\n  }\n  return new Lab(116 * y - 16, 500 * (x - y), 200 * (y - z), o.opacity);\n}\n\nexport function gray(l, opacity) {\n  return new Lab(l, 0, 0, opacity == null ? 1 : opacity);\n}\n\nexport default function lab(l, a, b, opacity) {\n  return arguments.length === 1 ? labConvert(l) : new Lab(l, a, b, opacity == null ? 1 : opacity);\n}\n\nexport function Lab(l, a, b, opacity) {\n  this.l = +l;\n  this.a = +a;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Lab, lab, extend(Color, {\n  brighter: function(k) {\n    return new Lab(this.l + K * (k == null ? 1 : k), this.a, this.b, this.opacity);\n  },\n  darker: function(k) {\n    return new Lab(this.l - K * (k == null ? 1 : k), this.a, this.b, this.opacity);\n  },\n  rgb: function() {\n    var y = (this.l + 16) / 116,\n        x = isNaN(this.a) ? y : y + this.a / 500,\n        z = isNaN(this.b) ? y : y - this.b / 200;\n    x = Xn * lab2xyz(x);\n    y = Yn * lab2xyz(y);\n    z = Zn * lab2xyz(z);\n    return new Rgb(\n      lrgb2rgb( 3.1338561 * x - 1.6168667 * y - 0.4906146 * z),\n      lrgb2rgb(-0.9787684 * x + 1.9161415 * y + 0.0334540 * z),\n      lrgb2rgb( 0.0719453 * x - 0.2289914 * y + 1.4052427 * z),\n      this.opacity\n    );\n  }\n}));\n\nfunction xyz2lab(t) {\n  return t > t3 ? Math.pow(t, 1 / 3) : t / t2 + t0;\n}\n\nfunction lab2xyz(t) {\n  return t > t1 ? t * t * t : t2 * (t - t0);\n}\n\nfunction lrgb2rgb(x) {\n  return 255 * (x <= 0.0031308 ? 12.92 * x : 1.055 * Math.pow(x, 1 / 2.4) - 0.055);\n}\n\nfunction rgb2lrgb(x) {\n  return (x /= 255) <= 0.04045 ? x / 12.92 : Math.pow((x + 0.055) / 1.055, 2.4);\n}\n\nfunction hclConvert(o) {\n  if (o instanceof Hcl) return new Hcl(o.h, o.c, o.l, o.opacity);\n  if (!(o instanceof Lab)) o = labConvert(o);\n  if (o.a === 0 && o.b === 0) return new Hcl(NaN, 0 < o.l && o.l < 100 ? 0 : NaN, o.l, o.opacity);\n  var h = Math.atan2(o.b, o.a) * degrees;\n  return new Hcl(h < 0 ? h + 360 : h, Math.sqrt(o.a * o.a + o.b * o.b), o.l, o.opacity);\n}\n\nexport function lch(l, c, h, opacity) {\n  return arguments.length === 1 ? hclConvert(l) : new Hcl(h, c, l, opacity == null ? 1 : opacity);\n}\n\nexport function hcl(h, c, l, opacity) {\n  return arguments.length === 1 ? hclConvert(h) : new Hcl(h, c, l, opacity == null ? 1 : opacity);\n}\n\nexport function Hcl(h, c, l, opacity) {\n  this.h = +h;\n  this.c = +c;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\nfunction hcl2lab(o) {\n  if (isNaN(o.h)) return new Lab(o.l, 0, 0, o.opacity);\n  var h = o.h * radians;\n  return new Lab(o.l, Math.cos(h) * o.c, Math.sin(h) * o.c, o.opacity);\n}\n\ndefine(Hcl, hcl, extend(Color, {\n  brighter: function(k) {\n    return new Hcl(this.h, this.c, this.l + K * (k == null ? 1 : k), this.opacity);\n  },\n  darker: function(k) {\n    return new Hcl(this.h, this.c, this.l - K * (k == null ? 1 : k), this.opacity);\n  },\n  rgb: function() {\n    return hcl2lab(this).rgb();\n  }\n}));\n","export default x => () => x;\n","import constant from \"./constant.js\";\n\nfunction linear(a, d) {\n  return function(t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nexport function hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n}\n\nexport function gamma(y) {\n  return (y = +y) === 1 ? nogamma : function(a, b) {\n    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n  };\n}\n\nexport default function nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n}\n","import {rgb as colorRgb} from \"d3-color\";\nimport basis from \"./basis.js\";\nimport basisClosed from \"./basisClosed.js\";\nimport nogamma, {gamma} from \"./color.js\";\n\nexport default (function rgbGamma(y) {\n  var color = gamma(y);\n\n  function rgb(start, end) {\n    var r = color((start = colorRgb(start)).r, (end = colorRgb(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n    return function(t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n\n  return rgb;\n})(1);\n\nfunction rgbSpline(spline) {\n  return function(colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i, color;\n    for (i = 0; i < n; ++i) {\n      color = colorRgb(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function(t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nexport var rgbBasis = rgbSpline(basis);\nexport var rgbBasisClosed = rgbSpline(basisClosed);\n","export default function(a, b) {\n  if (!b) b = [];\n  var n = a ? Math.min(b.length, a.length) : 0,\n      c = b.slice(),\n      i;\n  return function(t) {\n    for (i = 0; i < n; ++i) c[i] = a[i] * (1 - t) + b[i] * t;\n    return c;\n  };\n}\n\nexport function isNumberArray(x) {\n  return ArrayBuffer.isView(x) && !(x instanceof DataView);\n}\n","import value from \"./value.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  return (isNumberArray(b) ? numberArray : genericArray)(a, b);\n}\n\nexport function genericArray(a, b) {\n  var nb = b ? b.length : 0,\n      na = a ? Math.min(nb, a.length) : 0,\n      x = new Array(na),\n      c = new Array(nb),\n      i;\n\n  for (i = 0; i < na; ++i) x[i] = value(a[i], b[i]);\n  for (; i < nb; ++i) c[i] = b[i];\n\n  return function(t) {\n    for (i = 0; i < na; ++i) c[i] = x[i](t);\n    return c;\n  };\n}\n","export default function(a, b) {\n  var d = new Date;\n  return a = +a, b = +b, function(t) {\n    return d.setTime(a * (1 - t) + b * t), d;\n  };\n}\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return a * (1 - t) + b * t;\n  };\n}\n","import value from \"./value.js\";\n\nexport default function(a, b) {\n  var i = {},\n      c = {},\n      k;\n\n  if (a === null || typeof a !== \"object\") a = {};\n  if (b === null || typeof b !== \"object\") b = {};\n\n  for (k in b) {\n    if (k in a) {\n      i[k] = value(a[k], b[k]);\n    } else {\n      c[k] = b[k];\n    }\n  }\n\n  return function(t) {\n    for (k in i) c[k] = i[k](t);\n    return c;\n  };\n}\n","import number from \"./number.js\";\n\nvar reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\n    reB = new RegExp(reA.source, \"g\");\n\nfunction zero(b) {\n  return function() {\n    return b;\n  };\n}\n\nfunction one(b) {\n  return function(t) {\n    return b(t) + \"\";\n  };\n}\n\nexport default function(a, b) {\n  var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b\n      am, // current match in a\n      bm, // current match in b\n      bs, // string preceding current number in b, if any\n      i = -1, // index in s\n      s = [], // string constants and placeholders\n      q = []; // number interpolators\n\n  // Coerce inputs to strings.\n  a = a + \"\", b = b + \"\";\n\n  // Interpolate pairs of numbers in a & b.\n  while ((am = reA.exec(a))\n      && (bm = reB.exec(b))) {\n    if ((bs = bm.index) > bi) { // a string precedes the next number in b\n      bs = b.slice(bi, bs);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n    if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match\n      if (s[i]) s[i] += bm; // coalesce with previous string\n      else s[++i] = bm;\n    } else { // interpolate non-matching numbers\n      s[++i] = null;\n      q.push({i: i, x: number(am, bm)});\n    }\n    bi = reB.lastIndex;\n  }\n\n  // Add remains of b.\n  if (bi < b.length) {\n    bs = b.slice(bi);\n    if (s[i]) s[i] += bs; // coalesce with previous string\n    else s[++i] = bs;\n  }\n\n  // Special optimization for only a single match.\n  // Otherwise, interpolate each of the numbers and rejoin the string.\n  return s.length < 2 ? (q[0]\n      ? one(q[0].x)\n      : zero(b))\n      : (b = q.length, function(t) {\n          for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n          return s.join(\"\");\n        });\n}\n","import {color} from \"d3-color\";\nimport rgb from \"./rgb.js\";\nimport {genericArray} from \"./array.js\";\nimport date from \"./date.js\";\nimport number from \"./number.js\";\nimport object from \"./object.js\";\nimport string from \"./string.js\";\nimport constant from \"./constant.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  var t = typeof b, c;\n  return b == null || t === \"boolean\" ? constant(b)\n      : (t === \"number\" ? number\n      : t === \"string\" ? ((c = color(b)) ? (b = c, rgb) : string)\n      : b instanceof color ? rgb\n      : b instanceof Date ? date\n      : isNumberArray(b) ? numberArray\n      : Array.isArray(b) ? genericArray\n      : typeof b.valueOf !== \"function\" && typeof b.toString !== \"function\" || isNaN(b) ? object\n      : number)(a, b);\n}\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return Math.round(a * (1 - t) + b * t);\n  };\n}\n","var degrees = 180 / Math.PI;\n\nexport var identity = {\n  translateX: 0,\n  translateY: 0,\n  rotate: 0,\n  skewX: 0,\n  scaleX: 1,\n  scaleY: 1\n};\n\nexport default function(a, b, c, d, e, f) {\n  var scaleX, scaleY, skewX;\n  if (scaleX = Math.sqrt(a * a + b * b)) a /= scaleX, b /= scaleX;\n  if (skewX = a * c + b * d) c -= a * skewX, d -= b * skewX;\n  if (scaleY = Math.sqrt(c * c + d * d)) c /= scaleY, d /= scaleY, skewX /= scaleY;\n  if (a * d < b * c) a = -a, b = -b, skewX = -skewX, scaleX = -scaleX;\n  return {\n    translateX: e,\n    translateY: f,\n    rotate: Math.atan2(b, a) * degrees,\n    skewX: Math.atan(skewX) * degrees,\n    scaleX: scaleX,\n    scaleY: scaleY\n  };\n}\n","import decompose, {identity} from \"./decompose.js\";\n\nvar svgNode;\n\n/* eslint-disable no-undef */\nexport function parseCss(value) {\n  const m = new (typeof DOMMatrix === \"function\" ? DOMMatrix : WebKitCSSMatrix)(value + \"\");\n  return m.isIdentity ? identity : decompose(m.a, m.b, m.c, m.d, m.e, m.f);\n}\n\nexport function parseSvg(value) {\n  if (value == null) return identity;\n  if (!svgNode) svgNode = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n  svgNode.setAttribute(\"transform\", value);\n  if (!(value = svgNode.transform.baseVal.consolidate())) return identity;\n  value = value.matrix;\n  return decompose(value.a, value.b, value.c, value.d, value.e, value.f);\n}\n","import number from \"../number.js\";\nimport {parseCss, parseSvg} from \"./parse.js\";\n\nfunction interpolateTransform(parse, pxComma, pxParen, degParen) {\n\n  function pop(s) {\n    return s.length ? s.pop() + \" \" : \"\";\n  }\n\n  function translate(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(\"translate(\", null, pxComma, null, pxParen);\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb || yb) {\n      s.push(\"translate(\" + xb + pxComma + yb + pxParen);\n    }\n  }\n\n  function rotate(a, b, s, q) {\n    if (a !== b) {\n      if (a - b > 180) b += 360; else if (b - a > 180) a += 360; // shortest path\n      q.push({i: s.push(pop(s) + \"rotate(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"rotate(\" + b + degParen);\n    }\n  }\n\n  function skewX(a, b, s, q) {\n    if (a !== b) {\n      q.push({i: s.push(pop(s) + \"skewX(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"skewX(\" + b + degParen);\n    }\n  }\n\n  function scale(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(pop(s) + \"scale(\", null, \",\", null, \")\");\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb !== 1 || yb !== 1) {\n      s.push(pop(s) + \"scale(\" + xb + \",\" + yb + \")\");\n    }\n  }\n\n  return function(a, b) {\n    var s = [], // string constants and placeholders\n        q = []; // number interpolators\n    a = parse(a), b = parse(b);\n    translate(a.translateX, a.translateY, b.translateX, b.translateY, s, q);\n    rotate(a.rotate, b.rotate, s, q);\n    skewX(a.skewX, b.skewX, s, q);\n    scale(a.scaleX, a.scaleY, b.scaleX, b.scaleY, s, q);\n    a = b = null; // gc\n    return function(t) {\n      var i = -1, n = q.length, o;\n      while (++i < n) s[(o = q[i]).i] = o.x(t);\n      return s.join(\"\");\n    };\n  };\n}\n\nexport var interpolateTransformCss = interpolateTransform(parseCss, \"px, \", \"px)\", \"deg)\");\nexport var interpolateTransformSvg = interpolateTransform(parseSvg, \", \", \")\", \")\");\n","var epsilon2 = 1e-12;\n\nfunction cosh(x) {\n  return ((x = Math.exp(x)) + 1 / x) / 2;\n}\n\nfunction sinh(x) {\n  return ((x = Math.exp(x)) - 1 / x) / 2;\n}\n\nfunction tanh(x) {\n  return ((x = Math.exp(2 * x)) - 1) / (x + 1);\n}\n\nexport default (function zoomRho(rho, rho2, rho4) {\n\n  // p0 = [ux0, uy0, w0]\n  // p1 = [ux1, uy1, w1]\n  function zoom(p0, p1) {\n    var ux0 = p0[0], uy0 = p0[1], w0 = p0[2],\n        ux1 = p1[0], uy1 = p1[1], w1 = p1[2],\n        dx = ux1 - ux0,\n        dy = uy1 - uy0,\n        d2 = dx * dx + dy * dy,\n        i,\n        S;\n\n    // Special case for u0 ≅ u1.\n    if (d2 < epsilon2) {\n      S = Math.log(w1 / w0) / rho;\n      i = function(t) {\n        return [\n          ux0 + t * dx,\n          uy0 + t * dy,\n          w0 * Math.exp(rho * t * S)\n        ];\n      }\n    }\n\n    // General case.\n    else {\n      var d1 = Math.sqrt(d2),\n          b0 = (w1 * w1 - w0 * w0 + rho4 * d2) / (2 * w0 * rho2 * d1),\n          b1 = (w1 * w1 - w0 * w0 - rho4 * d2) / (2 * w1 * rho2 * d1),\n          r0 = Math.log(Math.sqrt(b0 * b0 + 1) - b0),\n          r1 = Math.log(Math.sqrt(b1 * b1 + 1) - b1);\n      S = (r1 - r0) / rho;\n      i = function(t) {\n        var s = t * S,\n            coshr0 = cosh(r0),\n            u = w0 / (rho2 * d1) * (coshr0 * tanh(rho * s + r0) - sinh(r0));\n        return [\n          ux0 + u * dx,\n          uy0 + u * dy,\n          w0 * coshr0 / cosh(rho * s + r0)\n        ];\n      }\n    }\n\n    i.duration = S * 1000 * rho / Math.SQRT2;\n\n    return i;\n  }\n\n  zoom.rho = function(_) {\n    var _1 = Math.max(1e-3, +_), _2 = _1 * _1, _4 = _2 * _2;\n    return zoomRho(_1, _2, _4);\n  };\n\n  return zoom;\n})(Math.SQRT2, 2, 4);\n","var frame = 0, // is an animation frame pending?\n    timeout = 0, // is a timeout pending?\n    interval = 0, // are any timers active?\n    pokeDelay = 1000, // how frequently we check for clock skew\n    taskHead,\n    taskTail,\n    clockLast = 0,\n    clockNow = 0,\n    clockSkew = 0,\n    clock = typeof performance === \"object\" && performance.now ? performance : Date,\n    setFrame = typeof window === \"object\" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function(f) { setTimeout(f, 17); };\n\nexport function now() {\n  return clockNow || (setFrame(clearNow), clockNow = clock.now() + clockSkew);\n}\n\nfunction clearNow() {\n  clockNow = 0;\n}\n\nexport function Timer() {\n  this._call =\n  this._time =\n  this._next = null;\n}\n\nTimer.prototype = timer.prototype = {\n  constructor: Timer,\n  restart: function(callback, delay, time) {\n    if (typeof callback !== \"function\") throw new TypeError(\"callback is not a function\");\n    time = (time == null ? now() : +time) + (delay == null ? 0 : +delay);\n    if (!this._next && taskTail !== this) {\n      if (taskTail) taskTail._next = this;\n      else taskHead = this;\n      taskTail = this;\n    }\n    this._call = callback;\n    this._time = time;\n    sleep();\n  },\n  stop: function() {\n    if (this._call) {\n      this._call = null;\n      this._time = Infinity;\n      sleep();\n    }\n  }\n};\n\nexport function timer(callback, delay, time) {\n  var t = new Timer;\n  t.restart(callback, delay, time);\n  return t;\n}\n\nexport function timerFlush() {\n  now(); // Get the current time, if not already set.\n  ++frame; // Pretend we’ve set an alarm, if we haven’t already.\n  var t = taskHead, e;\n  while (t) {\n    if ((e = clockNow - t._time) >= 0) t._call.call(null, e);\n    t = t._next;\n  }\n  --frame;\n}\n\nfunction wake() {\n  clockNow = (clockLast = clock.now()) + clockSkew;\n  frame = timeout = 0;\n  try {\n    timerFlush();\n  } finally {\n    frame = 0;\n    nap();\n    clockNow = 0;\n  }\n}\n\nfunction poke() {\n  var now = clock.now(), delay = now - clockLast;\n  if (delay > pokeDelay) clockSkew -= delay, clockLast = now;\n}\n\nfunction nap() {\n  var t0, t1 = taskHead, t2, time = Infinity;\n  while (t1) {\n    if (t1._call) {\n      if (time > t1._time) time = t1._time;\n      t0 = t1, t1 = t1._next;\n    } else {\n      t2 = t1._next, t1._next = null;\n      t1 = t0 ? t0._next = t2 : taskHead = t2;\n    }\n  }\n  taskTail = t0;\n  sleep(time);\n}\n\nfunction sleep(time) {\n  if (frame) return; // Soonest alarm already set, or will be.\n  if (timeout) timeout = clearTimeout(timeout);\n  var delay = time - clockNow; // Strictly less than if we recomputed clockNow.\n  if (delay > 24) {\n    if (time < Infinity) timeout = setTimeout(wake, time - clock.now() - clockSkew);\n    if (interval) interval = clearInterval(interval);\n  } else {\n    if (!interval) clockLast = clock.now(), interval = setInterval(poke, pokeDelay);\n    frame = 1, setFrame(wake);\n  }\n}\n","import {Timer} from \"./timer.js\";\n\nexport default function(callback, delay, time) {\n  var t = new Timer;\n  delay = delay == null ? 0 : +delay;\n  t.restart(elapsed => {\n    t.stop();\n    callback(elapsed + delay);\n  }, delay, time);\n  return t;\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {timer, timeout} from \"d3-timer\";\n\nvar emptyOn = dispatch(\"start\", \"end\", \"cancel\", \"interrupt\");\nvar emptyTween = [];\n\nexport var CREATED = 0;\nexport var SCHEDULED = 1;\nexport var STARTING = 2;\nexport var STARTED = 3;\nexport var RUNNING = 4;\nexport var ENDING = 5;\nexport var ENDED = 6;\n\nexport default function(node, name, id, index, group, timing) {\n  var schedules = node.__transition;\n  if (!schedules) node.__transition = {};\n  else if (id in schedules) return;\n  create(node, id, {\n    name: name,\n    index: index, // For context during callback.\n    group: group, // For context during callback.\n    on: emptyOn,\n    tween: emptyTween,\n    time: timing.time,\n    delay: timing.delay,\n    duration: timing.duration,\n    ease: timing.ease,\n    timer: null,\n    state: CREATED\n  });\n}\n\nexport function init(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > CREATED) throw new Error(\"too late; already scheduled\");\n  return schedule;\n}\n\nexport function set(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > STARTED) throw new Error(\"too late; already running\");\n  return schedule;\n}\n\nexport function get(node, id) {\n  var schedule = node.__transition;\n  if (!schedule || !(schedule = schedule[id])) throw new Error(\"transition not found\");\n  return schedule;\n}\n\nfunction create(node, id, self) {\n  var schedules = node.__transition,\n      tween;\n\n  // Initialize the self timer when the transition is created.\n  // Note the actual delay is not known until the first callback!\n  schedules[id] = self;\n  self.timer = timer(schedule, 0, self.time);\n\n  function schedule(elapsed) {\n    self.state = SCHEDULED;\n    self.timer.restart(start, self.delay, self.time);\n\n    // If the elapsed delay is less than our first sleep, start immediately.\n    if (self.delay <= elapsed) start(elapsed - self.delay);\n  }\n\n  function start(elapsed) {\n    var i, j, n, o;\n\n    // If the state is not SCHEDULED, then we previously errored on start.\n    if (self.state !== SCHEDULED) return stop();\n\n    for (i in schedules) {\n      o = schedules[i];\n      if (o.name !== self.name) continue;\n\n      // While this element already has a starting transition during this frame,\n      // defer starting an interrupting transition until that transition has a\n      // chance to tick (and possibly end); see d3/d3-transition#54!\n      if (o.state === STARTED) return timeout(start);\n\n      // Interrupt the active transition, if any.\n      if (o.state === RUNNING) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"interrupt\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n\n      // Cancel any pre-empted transitions.\n      else if (+i < id) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"cancel\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n    }\n\n    // Defer the first tick to end of the current frame; see d3/d3#1576.\n    // Note the transition may be canceled after start and before the first tick!\n    // Note this must be scheduled before the start event; see d3/d3-transition#16!\n    // Assuming this is successful, subsequent callbacks go straight to tick.\n    timeout(function() {\n      if (self.state === STARTED) {\n        self.state = RUNNING;\n        self.timer.restart(tick, self.delay, self.time);\n        tick(elapsed);\n      }\n    });\n\n    // Dispatch the start event.\n    // Note this must be done before the tween are initialized.\n    self.state = STARTING;\n    self.on.call(\"start\", node, node.__data__, self.index, self.group);\n    if (self.state !== STARTING) return; // interrupted\n    self.state = STARTED;\n\n    // Initialize the tween, deleting null tween.\n    tween = new Array(n = self.tween.length);\n    for (i = 0, j = -1; i < n; ++i) {\n      if (o = self.tween[i].value.call(node, node.__data__, self.index, self.group)) {\n        tween[++j] = o;\n      }\n    }\n    tween.length = j + 1;\n  }\n\n  function tick(elapsed) {\n    var t = elapsed < self.duration ? self.ease.call(null, elapsed / self.duration) : (self.timer.restart(stop), self.state = ENDING, 1),\n        i = -1,\n        n = tween.length;\n\n    while (++i < n) {\n      tween[i].call(node, t);\n    }\n\n    // Dispatch the end event.\n    if (self.state === ENDING) {\n      self.on.call(\"end\", node, node.__data__, self.index, self.group);\n      stop();\n    }\n  }\n\n  function stop() {\n    self.state = ENDED;\n    self.timer.stop();\n    delete schedules[id];\n    for (var i in schedules) return; // eslint-disable-line no-unused-vars\n    delete node.__transition;\n  }\n}\n","import {STARTING, ENDING, ENDED} from \"./transition/schedule.js\";\n\nexport default function(node, name) {\n  var schedules = node.__transition,\n      schedule,\n      active,\n      empty = true,\n      i;\n\n  if (!schedules) return;\n\n  name = name == null ? null : name + \"\";\n\n  for (i in schedules) {\n    if ((schedule = schedules[i]).name !== name) { empty = false; continue; }\n    active = schedule.state > STARTING && schedule.state < ENDING;\n    schedule.state = ENDED;\n    schedule.timer.stop();\n    schedule.on.call(active ? \"interrupt\" : \"cancel\", node, node.__data__, schedule.index, schedule.group);\n    delete schedules[i];\n  }\n\n  if (empty) delete node.__transition;\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction tweenRemove(id, name) {\n  var tween0, tween1;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and we’re done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = tween0 = tween;\n      for (var i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1 = tween1.slice();\n          tween1.splice(i, 1);\n          break;\n        }\n      }\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nfunction tweenFunction(id, name, value) {\n  var tween0, tween1;\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and we’re done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = (tween0 = tween).slice();\n      for (var t = {name: name, value: value}, i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1[i] = t;\n          break;\n        }\n      }\n      if (i === n) tween1.push(t);\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nexport default function(name, value) {\n  var id = this._id;\n\n  name += \"\";\n\n  if (arguments.length < 2) {\n    var tween = get(this.node(), id).tween;\n    for (var i = 0, n = tween.length, t; i < n; ++i) {\n      if ((t = tween[i]).name === name) {\n        return t.value;\n      }\n    }\n    return null;\n  }\n\n  return this.each((value == null ? tweenRemove : tweenFunction)(id, name, value));\n}\n\nexport function tweenValue(transition, name, value) {\n  var id = transition._id;\n\n  transition.each(function() {\n    var schedule = set(this, id);\n    (schedule.value || (schedule.value = {}))[name] = value.apply(this, arguments);\n  });\n\n  return function(node) {\n    return get(node, id).value[name];\n  };\n}\n","import {color} from \"d3-color\";\nimport {interpolateNumber, interpolateRgb, interpolateString} from \"d3-interpolate\";\n\nexport default function(a, b) {\n  var c;\n  return (typeof b === \"number\" ? interpolateNumber\n      : b instanceof color ? interpolateRgb\n      : (c = color(b)) ? (b = c, interpolateRgb)\n      : interpolateString)(a, b);\n}\n","import {interpolateTransformSvg as interpolateTransform} from \"d3-interpolate\";\nimport {namespace} from \"d3-selection\";\nimport {tweenValue} from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = this.getAttribute(name);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrConstantNS(fullname, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = this.getAttributeNS(fullname.space, fullname.local);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrFunction(name, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null) return void this.removeAttribute(name);\n    string0 = this.getAttribute(name);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction attrFunctionNS(fullname, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null) return void this.removeAttributeNS(fullname.space, fullname.local);\n    string0 = this.getAttributeNS(fullname.space, fullname.local);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name), i = fullname === \"transform\" ? interpolateTransform : interpolate;\n  return this.attrTween(name, typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)(fullname, i, tweenValue(this, \"attr.\" + name, value))\n      : value == null ? (fullname.local ? attrRemoveNS : attrRemove)(fullname)\n      : (fullname.local ? attrConstantNS : attrConstant)(fullname, i, value));\n}\n","import {namespace} from \"d3-selection\";\n\nfunction attrInterpolate(name, i) {\n  return function(t) {\n    this.setAttribute(name, i.call(this, t));\n  };\n}\n\nfunction attrInterpolateNS(fullname, i) {\n  return function(t) {\n    this.setAttributeNS(fullname.space, fullname.local, i.call(this, t));\n  };\n}\n\nfunction attrTweenNS(fullname, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolateNS(fullname, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nfunction attrTween(name, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolate(name, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value) {\n  var key = \"attr.\" + name;\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  var fullname = namespace(name);\n  return this.tween(key, (fullname.local ? attrTweenNS : attrTween)(fullname, value));\n}\n","import {get, init} from \"./schedule.js\";\n\nfunction delayFunction(id, value) {\n  return function() {\n    init(this, id).delay = +value.apply(this, arguments);\n  };\n}\n\nfunction delayConstant(id, value) {\n  return value = +value, function() {\n    init(this, id).delay = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? delayFunction\n          : delayConstant)(id, value))\n      : get(this.node(), id).delay;\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction durationFunction(id, value) {\n  return function() {\n    set(this, id).duration = +value.apply(this, arguments);\n  };\n}\n\nfunction durationConstant(id, value) {\n  return value = +value, function() {\n    set(this, id).duration = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? durationFunction\n          : durationConstant)(id, value))\n      : get(this.node(), id).duration;\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction easeConstant(id, value) {\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    set(this, id).ease = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each(easeConstant(id, value))\n      : get(this.node(), id).ease;\n}\n","import {get, set, init} from \"./schedule.js\";\n\nfunction start(name) {\n  return (name + \"\").trim().split(/^|\\s+/).every(function(t) {\n    var i = t.indexOf(\".\");\n    if (i >= 0) t = t.slice(0, i);\n    return !t || t === \"start\";\n  });\n}\n\nfunction onFunction(id, name, listener) {\n  var on0, on1, sit = start(name) ? init : set;\n  return function() {\n    var schedule = sit(this, id),\n        on = schedule.on;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and we’re done!\n    // Otherwise, copy-on-write.\n    if (on !== on0) (on1 = (on0 = on).copy()).on(name, listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, listener) {\n  var id = this._id;\n\n  return arguments.length < 2\n      ? get(this.node(), id).on.on(name)\n      : this.each(onFunction(id, name, listener));\n}\n","import {selection} from \"d3-selection\";\n\nvar Selection = selection.prototype.constructor;\n\nexport default function() {\n  return new Selection(this._groups, this._parents);\n}\n","import {interpolateTransformCss as interpolateTransform} from \"d3-interpolate\";\nimport {style} from \"d3-selection\";\nimport {set} from \"./schedule.js\";\nimport {tweenValue} from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction styleNull(name, interpolate) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0 = style(this, name),\n        string1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, string10 = string1);\n  };\n}\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = style(this, name);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction styleFunction(name, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0 = style(this, name),\n        value1 = value(this),\n        string1 = value1 + \"\";\n    if (value1 == null) string1 = value1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction styleMaybeRemove(id, name) {\n  var on0, on1, listener0, key = \"style.\" + name, event = \"end.\" + key, remove;\n  return function() {\n    var schedule = set(this, id),\n        on = schedule.on,\n        listener = schedule.value[key] == null ? remove || (remove = styleRemove(name)) : undefined;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and we’re done!\n    // Otherwise, copy-on-write.\n    if (on !== on0 || listener0 !== listener) (on1 = (on0 = on).copy()).on(event, listener0 = listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, value, priority) {\n  var i = (name += \"\") === \"transform\" ? interpolateTransform : interpolate;\n  return value == null ? this\n      .styleTween(name, styleNull(name, i))\n      .on(\"end.style.\" + name, styleRemove(name))\n    : typeof value === \"function\" ? this\n      .styleTween(name, styleFunction(name, i, tweenValue(this, \"style.\" + name, value)))\n      .each(styleMaybeRemove(this._id, name))\n    : this\n      .styleTween(name, styleConstant(name, i, value), priority)\n      .on(\"end.style.\" + name, null);\n}\n","function styleInterpolate(name, i, priority) {\n  return function(t) {\n    this.style.setProperty(name, i.call(this, t), priority);\n  };\n}\n\nfunction styleTween(name, value, priority) {\n  var t, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t = (i0 = i) && styleInterpolate(name, i, priority);\n    return t;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value, priority) {\n  var key = \"style.\" + (name += \"\");\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, styleTween(name, value, priority == null ? \"\" : priority));\n}\n","function textInterpolate(i) {\n  return function(t) {\n    this.textContent = i.call(this, t);\n  };\n}\n\nfunction textTween(value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && textInterpolate(i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(value) {\n  var key = \"text\";\n  if (arguments.length < 1) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, textTween(value));\n}\n","import {selection} from \"d3-selection\";\nimport transition_attr from \"./attr.js\";\nimport transition_attrTween from \"./attrTween.js\";\nimport transition_delay from \"./delay.js\";\nimport transition_duration from \"./duration.js\";\nimport transition_ease from \"./ease.js\";\nimport transition_easeVarying from \"./easeVarying.js\";\nimport transition_filter from \"./filter.js\";\nimport transition_merge from \"./merge.js\";\nimport transition_on from \"./on.js\";\nimport transition_remove from \"./remove.js\";\nimport transition_select from \"./select.js\";\nimport transition_selectAll from \"./selectAll.js\";\nimport transition_selection from \"./selection.js\";\nimport transition_style from \"./style.js\";\nimport transition_styleTween from \"./styleTween.js\";\nimport transition_text from \"./text.js\";\nimport transition_textTween from \"./textTween.js\";\nimport transition_transition from \"./transition.js\";\nimport transition_tween from \"./tween.js\";\nimport transition_end from \"./end.js\";\n\nvar id = 0;\n\nexport function Transition(groups, parents, name, id) {\n  this._groups = groups;\n  this._parents = parents;\n  this._name = name;\n  this._id = id;\n}\n\nexport default function transition(name) {\n  return selection().transition(name);\n}\n\nexport function newId() {\n  return ++id;\n}\n\nvar selection_prototype = selection.prototype;\n\nTransition.prototype = transition.prototype = {\n  constructor: Transition,\n  select: transition_select,\n  selectAll: transition_selectAll,\n  filter: transition_filter,\n  merge: transition_merge,\n  selection: transition_selection,\n  transition: transition_transition,\n  call: selection_prototype.call,\n  nodes: selection_prototype.nodes,\n  node: selection_prototype.node,\n  size: selection_prototype.size,\n  empty: selection_prototype.empty,\n  each: selection_prototype.each,\n  on: transition_on,\n  attr: transition_attr,\n  attrTween: transition_attrTween,\n  style: transition_style,\n  styleTween: transition_styleTween,\n  text: transition_text,\n  textTween: transition_textTween,\n  remove: transition_remove,\n  tween: transition_tween,\n  delay: transition_delay,\n  duration: transition_duration,\n  ease: transition_ease,\n  easeVarying: transition_easeVarying,\n  end: transition_end,\n  [Symbol.iterator]: selection_prototype[Symbol.iterator]\n};\n","export function quadIn(t) {\n  return t * t;\n}\n\nexport function quadOut(t) {\n  return t * (2 - t);\n}\n\nexport function quadInOut(t) {\n  return ((t *= 2) <= 1 ? t * t : --t * (2 - t) + 1) / 2;\n}\n","export function cubicIn(t) {\n  return t * t * t;\n}\n\nexport function cubicOut(t) {\n  return --t * t * t + 1;\n}\n\nexport function cubicInOut(t) {\n  return ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2;\n}\n","import {selector} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n        schedule(subgroup[i], name, id, i, subgroup, get(node, id));\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, name, id);\n}\n","import {selectorAll} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        for (var children = select.call(node, node.__data__, i, group), child, inherit = get(node, id), k = 0, l = children.length; k < l; ++k) {\n          if (child = children[k]) {\n            schedule(child, name, id, k, children, inherit);\n          }\n        }\n        subgroups.push(children);\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, parents, name, id);\n}\n","import {matcher} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, this._name, this._id);\n}\n","import {Transition} from \"./index.js\";\n\nexport default function(transition) {\n  if (transition._id !== this._id) throw new Error;\n\n  for (var groups0 = this._groups, groups1 = transition._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Transition(merges, this._parents, this._name, this._id);\n}\n","import {Transition, newId} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function() {\n  var name = this._name,\n      id0 = this._id,\n      id1 = newId();\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        var inherit = get(node, id0);\n        schedule(node, name, id1, i, group, {\n          time: inherit.time + inherit.delay + inherit.duration,\n          delay: 0,\n          duration: inherit.duration,\n          ease: inherit.ease\n        });\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id1);\n}\n","import {tweenValue} from \"./tween.js\";\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var value1 = value(this);\n    this.textContent = value1 == null ? \"\" : value1;\n  };\n}\n\nexport default function(value) {\n  return this.tween(\"text\", typeof value === \"function\"\n      ? textFunction(tweenValue(this, \"text\", value))\n      : textConstant(value == null ? \"\" : value + \"\"));\n}\n","function removeFunction(id) {\n  return function() {\n    var parent = this.parentNode;\n    for (var i in this.__transition) if (+i !== id) return;\n    if (parent) parent.removeChild(this);\n  };\n}\n\nexport default function() {\n  return this.on(\"end.remove\", removeFunction(this._id));\n}\n","import {set} from \"./schedule.js\";\n\nfunction easeVarying(id, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (typeof v !== \"function\") throw new Error;\n    set(this, id).ease = v;\n  };\n}\n\nexport default function(value) {\n  if (typeof value !== \"function\") throw new Error;\n  return this.each(easeVarying(this._id, value));\n}\n","import {set} from \"./schedule.js\";\n\nexport default function() {\n  var on0, on1, that = this, id = that._id, size = that.size();\n  return new Promise(function(resolve, reject) {\n    var cancel = {value: reject},\n        end = {value: function() { if (--size === 0) resolve(); }};\n\n    that.each(function() {\n      var schedule = set(this, id),\n          on = schedule.on;\n\n      // If this node shared a dispatch with the previous node,\n      // just assign the updated shared dispatch and we’re done!\n      // Otherwise, copy-on-write.\n      if (on !== on0) {\n        on1 = (on0 = on).copy();\n        on1._.cancel.push(cancel);\n        on1._.interrupt.push(cancel);\n        on1._.end.push(end);\n      }\n\n      schedule.on = on1;\n    });\n\n    // The selection was empty, resolve end immediately\n    if (size === 0) resolve();\n  });\n}\n","import {Transition, newId} from \"../transition/index.js\";\nimport schedule from \"../transition/schedule.js\";\nimport {easeCubicInOut} from \"d3-ease\";\nimport {now} from \"d3-timer\";\n\nvar defaultTiming = {\n  time: null, // Set on use.\n  delay: 0,\n  duration: 250,\n  ease: easeCubicInOut\n};\n\nfunction inherit(node, id) {\n  var timing;\n  while (!(timing = node.__transition) || !(timing = timing[id])) {\n    if (!(node = node.parentNode)) {\n      throw new Error(`transition ${id} not found`);\n    }\n  }\n  return timing;\n}\n\nexport default function(name) {\n  var id,\n      timing;\n\n  if (name instanceof Transition) {\n    id = name._id, name = name._name;\n  } else {\n    id = newId(), (timing = defaultTiming).time = now(), name = name == null ? null : name + \"\";\n  }\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        schedule(node, name, id, i, group, timing || inherit(node, id));\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id);\n}\n","import {selection} from \"d3-selection\";\nimport selection_interrupt from \"./interrupt.js\";\nimport selection_transition from \"./transition.js\";\n\nselection.prototype.interrupt = selection_interrupt;\nselection.prototype.transition = selection_transition;\n","import interrupt from \"../interrupt.js\";\n\nexport default function(name) {\n  return this.each(function() {\n    interrupt(this, name);\n  });\n}\n","const pi = Math.PI,\n    tau = 2 * pi,\n    epsilon = 1e-6,\n    tauEpsilon = tau - epsilon;\n\nfunction Path() {\n  this._x0 = this._y0 = // start of current subpath\n  this._x1 = this._y1 = null; // end of current subpath\n  this._ = \"\";\n}\n\nfunction path() {\n  return new Path;\n}\n\nPath.prototype = path.prototype = {\n  constructor: Path,\n  moveTo: function(x, y) {\n    this._ += \"M\" + (this._x0 = this._x1 = +x) + \",\" + (this._y0 = this._y1 = +y);\n  },\n  closePath: function() {\n    if (this._x1 !== null) {\n      this._x1 = this._x0, this._y1 = this._y0;\n      this._ += \"Z\";\n    }\n  },\n  lineTo: function(x, y) {\n    this._ += \"L\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  quadraticCurveTo: function(x1, y1, x, y) {\n    this._ += \"Q\" + (+x1) + \",\" + (+y1) + \",\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  bezierCurveTo: function(x1, y1, x2, y2, x, y) {\n    this._ += \"C\" + (+x1) + \",\" + (+y1) + \",\" + (+x2) + \",\" + (+y2) + \",\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  arcTo: function(x1, y1, x2, y2, r) {\n    x1 = +x1, y1 = +y1, x2 = +x2, y2 = +y2, r = +r;\n    var x0 = this._x1,\n        y0 = this._y1,\n        x21 = x2 - x1,\n        y21 = y2 - y1,\n        x01 = x0 - x1,\n        y01 = y0 - y1,\n        l01_2 = x01 * x01 + y01 * y01;\n\n    // Is the radius negative? Error.\n    if (r < 0) throw new Error(\"negative radius: \" + r);\n\n    // Is this path empty? Move to (x1,y1).\n    if (this._x1 === null) {\n      this._ += \"M\" + (this._x1 = x1) + \",\" + (this._y1 = y1);\n    }\n\n    // Or, is (x1,y1) coincident with (x0,y0)? Do nothing.\n    else if (!(l01_2 > epsilon));\n\n    // Or, are (x0,y0), (x1,y1) and (x2,y2) collinear?\n    // Equivalently, is (x1,y1) coincident with (x2,y2)?\n    // Or, is the radius zero? Line to (x1,y1).\n    else if (!(Math.abs(y01 * x21 - y21 * x01) > epsilon) || !r) {\n      this._ += \"L\" + (this._x1 = x1) + \",\" + (this._y1 = y1);\n    }\n\n    // Otherwise, draw an arc!\n    else {\n      var x20 = x2 - x0,\n          y20 = y2 - y0,\n          l21_2 = x21 * x21 + y21 * y21,\n          l20_2 = x20 * x20 + y20 * y20,\n          l21 = Math.sqrt(l21_2),\n          l01 = Math.sqrt(l01_2),\n          l = r * Math.tan((pi - Math.acos((l21_2 + l01_2 - l20_2) / (2 * l21 * l01))) / 2),\n          t01 = l / l01,\n          t21 = l / l21;\n\n      // If the start tangent is not coincident with (x0,y0), line to.\n      if (Math.abs(t01 - 1) > epsilon) {\n        this._ += \"L\" + (x1 + t01 * x01) + \",\" + (y1 + t01 * y01);\n      }\n\n      this._ += \"A\" + r + \",\" + r + \",0,0,\" + (+(y01 * x20 > x01 * y20)) + \",\" + (this._x1 = x1 + t21 * x21) + \",\" + (this._y1 = y1 + t21 * y21);\n    }\n  },\n  arc: function(x, y, r, a0, a1, ccw) {\n    x = +x, y = +y, r = +r, ccw = !!ccw;\n    var dx = r * Math.cos(a0),\n        dy = r * Math.sin(a0),\n        x0 = x + dx,\n        y0 = y + dy,\n        cw = 1 ^ ccw,\n        da = ccw ? a0 - a1 : a1 - a0;\n\n    // Is the radius negative? Error.\n    if (r < 0) throw new Error(\"negative radius: \" + r);\n\n    // Is this path empty? Move to (x0,y0).\n    if (this._x1 === null) {\n      this._ += \"M\" + x0 + \",\" + y0;\n    }\n\n    // Or, is (x0,y0) not coincident with the previous point? Line to (x0,y0).\n    else if (Math.abs(this._x1 - x0) > epsilon || Math.abs(this._y1 - y0) > epsilon) {\n      this._ += \"L\" + x0 + \",\" + y0;\n    }\n\n    // Is this arc empty? We’re done.\n    if (!r) return;\n\n    // Does the angle go the wrong way? Flip the direction.\n    if (da < 0) da = da % tau + tau;\n\n    // Is this a complete circle? Draw two arcs to complete the circle.\n    if (da > tauEpsilon) {\n      this._ += \"A\" + r + \",\" + r + \",0,1,\" + cw + \",\" + (x - dx) + \",\" + (y - dy) + \"A\" + r + \",\" + r + \",0,1,\" + cw + \",\" + (this._x1 = x0) + \",\" + (this._y1 = y0);\n    }\n\n    // Is this arc non-empty? Draw an arc!\n    else if (da > epsilon) {\n      this._ += \"A\" + r + \",\" + r + \",0,\" + (+(da >= pi)) + \",\" + cw + \",\" + (this._x1 = x + r * Math.cos(a1)) + \",\" + (this._y1 = y + r * Math.sin(a1));\n    }\n  },\n  rect: function(x, y, w, h) {\n    this._ += \"M\" + (this._x0 = this._x1 = +x) + \",\" + (this._y0 = this._y1 = +y) + \"h\" + (+w) + \"v\" + (+h) + \"h\" + (-w) + \"Z\";\n  },\n  toString: function() {\n    return this._;\n  }\n};\n\nexport default path;\n","function responseJson(response) {\n  if (!response.ok) throw new Error(response.status + \" \" + response.statusText);\n  if (response.status === 204 || response.status === 205) return;\n  return response.json();\n}\n\nexport default function(input, init) {\n  return fetch(input, init).then(responseJson);\n}\n","export default function(d) {\n  const x = +this._x.call(null, d),\n      y = +this._y.call(null, d);\n  return add(this.cover(x, y), x, y, d);\n}\n\nfunction add(tree, x, y, d) {\n  if (isNaN(x) || isNaN(y)) return tree; // ignore invalid points\n\n  var parent,\n      node = tree._root,\n      leaf = {data: d},\n      x0 = tree._x0,\n      y0 = tree._y0,\n      x1 = tree._x1,\n      y1 = tree._y1,\n      xm,\n      ym,\n      xp,\n      yp,\n      right,\n      bottom,\n      i,\n      j;\n\n  // If the tree is empty, initialize the root as a leaf.\n  if (!node) return tree._root = leaf, tree;\n\n  // Find the existing leaf for the new point, or add it.\n  while (node.length) {\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm; else x1 = xm;\n    if (bottom = y >= (ym = (y0 + y1) / 2)) y0 = ym; else y1 = ym;\n    if (parent = node, !(node = node[i = bottom << 1 | right])) return parent[i] = leaf, tree;\n  }\n\n  // Is the new point is exactly coincident with the existing point?\n  xp = +tree._x.call(null, node.data);\n  yp = +tree._y.call(null, node.data);\n  if (x === xp && y === yp) return leaf.next = node, parent ? parent[i] = leaf : tree._root = leaf, tree;\n\n  // Otherwise, split the leaf node until the old and new point are separated.\n  do {\n    parent = parent ? parent[i] = new Array(4) : tree._root = new Array(4);\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm; else x1 = xm;\n    if (bottom = y >= (ym = (y0 + y1) / 2)) y0 = ym; else y1 = ym;\n  } while ((i = bottom << 1 | right) === (j = (yp >= ym) << 1 | (xp >= xm)));\n  return parent[j] = node, parent[i] = leaf, tree;\n}\n\nexport function addAll(data) {\n  var d, i, n = data.length,\n      x,\n      y,\n      xz = new Array(n),\n      yz = new Array(n),\n      x0 = Infinity,\n      y0 = Infinity,\n      x1 = -Infinity,\n      y1 = -Infinity;\n\n  // Compute the points and their extent.\n  for (i = 0; i < n; ++i) {\n    if (isNaN(x = +this._x.call(null, d = data[i])) || isNaN(y = +this._y.call(null, d))) continue;\n    xz[i] = x;\n    yz[i] = y;\n    if (x < x0) x0 = x;\n    if (x > x1) x1 = x;\n    if (y < y0) y0 = y;\n    if (y > y1) y1 = y;\n  }\n\n  // If there were no (valid) points, abort.\n  if (x0 > x1 || y0 > y1) return this;\n\n  // Expand the tree to cover the new points.\n  this.cover(x0, y0).cover(x1, y1);\n\n  // Add the new points.\n  for (i = 0; i < n; ++i) {\n    add(this, xz[i], yz[i], data[i]);\n  }\n\n  return this;\n}\n","export default function(node, x0, y0, x1, y1) {\n  this.node = node;\n  this.x0 = x0;\n  this.y0 = y0;\n  this.x1 = x1;\n  this.y1 = y1;\n}\n","export function defaultX(d) {\n  return d[0];\n}\n\nexport default function(_) {\n  return arguments.length ? (this._x = _, this) : this._x;\n}\n","export function defaultY(d) {\n  return d[1];\n}\n\nexport default function(_) {\n  return arguments.length ? (this._y = _, this) : this._y;\n}\n","import tree_add, {addAll as tree_addAll} from \"./add.js\";\nimport tree_cover from \"./cover.js\";\nimport tree_data from \"./data.js\";\nimport tree_extent from \"./extent.js\";\nimport tree_find from \"./find.js\";\nimport tree_remove, {removeAll as tree_removeAll} from \"./remove.js\";\nimport tree_root from \"./root.js\";\nimport tree_size from \"./size.js\";\nimport tree_visit from \"./visit.js\";\nimport tree_visitAfter from \"./visitAfter.js\";\nimport tree_x, {defaultX} from \"./x.js\";\nimport tree_y, {defaultY} from \"./y.js\";\n\nexport default function quadtree(nodes, x, y) {\n  var tree = new Quadtree(x == null ? defaultX : x, y == null ? defaultY : y, NaN, NaN, NaN, NaN);\n  return nodes == null ? tree : tree.addAll(nodes);\n}\n\nfunction Quadtree(x, y, x0, y0, x1, y1) {\n  this._x = x;\n  this._y = y;\n  this._x0 = x0;\n  this._y0 = y0;\n  this._x1 = x1;\n  this._y1 = y1;\n  this._root = undefined;\n}\n\nfunction leaf_copy(leaf) {\n  var copy = {data: leaf.data}, next = copy;\n  while (leaf = leaf.next) next = next.next = {data: leaf.data};\n  return copy;\n}\n\nvar treeProto = quadtree.prototype = Quadtree.prototype;\n\ntreeProto.copy = function() {\n  var copy = new Quadtree(this._x, this._y, this._x0, this._y0, this._x1, this._y1),\n      node = this._root,\n      nodes,\n      child;\n\n  if (!node) return copy;\n\n  if (!node.length) return copy._root = leaf_copy(node), copy;\n\n  nodes = [{source: node, target: copy._root = new Array(4)}];\n  while (node = nodes.pop()) {\n    for (var i = 0; i < 4; ++i) {\n      if (child = node.source[i]) {\n        if (child.length) nodes.push({source: child, target: node.target[i] = new Array(4)});\n        else node.target[i] = leaf_copy(child);\n      }\n    }\n  }\n\n  return copy;\n};\n\ntreeProto.add = tree_add;\ntreeProto.addAll = tree_addAll;\ntreeProto.cover = tree_cover;\ntreeProto.data = tree_data;\ntreeProto.extent = tree_extent;\ntreeProto.find = tree_find;\ntreeProto.remove = tree_remove;\ntreeProto.removeAll = tree_removeAll;\ntreeProto.root = tree_root;\ntreeProto.size = tree_size;\ntreeProto.visit = tree_visit;\ntreeProto.visitAfter = tree_visitAfter;\ntreeProto.x = tree_x;\ntreeProto.y = tree_y;\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","export default function(random) {\n  return (random() - 0.5) * 1e-6;\n}\n","import {quadtree} from \"d3-quadtree\";\nimport constant from \"./constant.js\";\nimport jiggle from \"./jiggle.js\";\n\nfunction x(d) {\n  return d.x + d.vx;\n}\n\nfunction y(d) {\n  return d.y + d.vy;\n}\n\nexport default function(radius) {\n  var nodes,\n      radii,\n      random,\n      strength = 1,\n      iterations = 1;\n\n  if (typeof radius !== \"function\") radius = constant(radius == null ? 1 : +radius);\n\n  function force() {\n    var i, n = nodes.length,\n        tree,\n        node,\n        xi,\n        yi,\n        ri,\n        ri2;\n\n    for (var k = 0; k < iterations; ++k) {\n      tree = quadtree(nodes, x, y).visitAfter(prepare);\n      for (i = 0; i < n; ++i) {\n        node = nodes[i];\n        ri = radii[node.index], ri2 = ri * ri;\n        xi = node.x + node.vx;\n        yi = node.y + node.vy;\n        tree.visit(apply);\n      }\n    }\n\n    function apply(quad, x0, y0, x1, y1) {\n      var data = quad.data, rj = quad.r, r = ri + rj;\n      if (data) {\n        if (data.index > node.index) {\n          var x = xi - data.x - data.vx,\n              y = yi - data.y - data.vy,\n              l = x * x + y * y;\n          if (l < r * r) {\n            if (x === 0) x = jiggle(random), l += x * x;\n            if (y === 0) y = jiggle(random), l += y * y;\n            l = (r - (l = Math.sqrt(l))) / l * strength;\n            node.vx += (x *= l) * (r = (rj *= rj) / (ri2 + rj));\n            node.vy += (y *= l) * r;\n            data.vx -= x * (r = 1 - r);\n            data.vy -= y * r;\n          }\n        }\n        return;\n      }\n      return x0 > xi + r || x1 < xi - r || y0 > yi + r || y1 < yi - r;\n    }\n  }\n\n  function prepare(quad) {\n    if (quad.data) return quad.r = radii[quad.data.index];\n    for (var i = quad.r = 0; i < 4; ++i) {\n      if (quad[i] && quad[i].r > quad.r) {\n        quad.r = quad[i].r;\n      }\n    }\n  }\n\n  function initialize() {\n    if (!nodes) return;\n    var i, n = nodes.length, node;\n    radii = new Array(n);\n    for (i = 0; i < n; ++i) node = nodes[i], radii[node.index] = +radius(node, i, nodes);\n  }\n\n  force.initialize = function(_nodes, _random) {\n    nodes = _nodes;\n    random = _random;\n    initialize();\n  };\n\n  force.iterations = function(_) {\n    return arguments.length ? (iterations = +_, force) : iterations;\n  };\n\n  force.strength = function(_) {\n    return arguments.length ? (strength = +_, force) : strength;\n  };\n\n  force.radius = function(_) {\n    return arguments.length ? (radius = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : radius;\n  };\n\n  return force;\n}\n","import constant from \"./constant.js\";\nimport jiggle from \"./jiggle.js\";\n\nfunction index(d) {\n  return d.index;\n}\n\nfunction find(nodeById, nodeId) {\n  var node = nodeById.get(nodeId);\n  if (!node) throw new Error(\"node not found: \" + nodeId);\n  return node;\n}\n\nexport default function(links) {\n  var id = index,\n      strength = defaultStrength,\n      strengths,\n      distance = constant(30),\n      distances,\n      nodes,\n      count,\n      bias,\n      random,\n      iterations = 1;\n\n  if (links == null) links = [];\n\n  function defaultStrength(link) {\n    return 1 / Math.min(count[link.source.index], count[link.target.index]);\n  }\n\n  function force(alpha) {\n    for (var k = 0, n = links.length; k < iterations; ++k) {\n      for (var i = 0, link, source, target, x, y, l, b; i < n; ++i) {\n        link = links[i], source = link.source, target = link.target;\n        x = target.x + target.vx - source.x - source.vx || jiggle(random);\n        y = target.y + target.vy - source.y - source.vy || jiggle(random);\n        l = Math.sqrt(x * x + y * y);\n        l = (l - distances[i]) / l * alpha * strengths[i];\n        x *= l, y *= l;\n        target.vx -= x * (b = bias[i]);\n        target.vy -= y * b;\n        source.vx += x * (b = 1 - b);\n        source.vy += y * b;\n      }\n    }\n  }\n\n  function initialize() {\n    if (!nodes) return;\n\n    var i,\n        n = nodes.length,\n        m = links.length,\n        nodeById = new Map(nodes.map((d, i) => [id(d, i, nodes), d])),\n        link;\n\n    for (i = 0, count = new Array(n); i < m; ++i) {\n      link = links[i], link.index = i;\n      if (typeof link.source !== \"object\") link.source = find(nodeById, link.source);\n      if (typeof link.target !== \"object\") link.target = find(nodeById, link.target);\n      count[link.source.index] = (count[link.source.index] || 0) + 1;\n      count[link.target.index] = (count[link.target.index] || 0) + 1;\n    }\n\n    for (i = 0, bias = new Array(m); i < m; ++i) {\n      link = links[i], bias[i] = count[link.source.index] / (count[link.source.index] + count[link.target.index]);\n    }\n\n    strengths = new Array(m), initializeStrength();\n    distances = new Array(m), initializeDistance();\n  }\n\n  function initializeStrength() {\n    if (!nodes) return;\n\n    for (var i = 0, n = links.length; i < n; ++i) {\n      strengths[i] = +strength(links[i], i, links);\n    }\n  }\n\n  function initializeDistance() {\n    if (!nodes) return;\n\n    for (var i = 0, n = links.length; i < n; ++i) {\n      distances[i] = +distance(links[i], i, links);\n    }\n  }\n\n  force.initialize = function(_nodes, _random) {\n    nodes = _nodes;\n    random = _random;\n    initialize();\n  };\n\n  force.links = function(_) {\n    return arguments.length ? (links = _, initialize(), force) : links;\n  };\n\n  force.id = function(_) {\n    return arguments.length ? (id = _, force) : id;\n  };\n\n  force.iterations = function(_) {\n    return arguments.length ? (iterations = +_, force) : iterations;\n  };\n\n  force.strength = function(_) {\n    return arguments.length ? (strength = typeof _ === \"function\" ? _ : constant(+_), initializeStrength(), force) : strength;\n  };\n\n  force.distance = function(_) {\n    return arguments.length ? (distance = typeof _ === \"function\" ? _ : constant(+_), initializeDistance(), force) : distance;\n  };\n\n  return force;\n}\n","export default function(x, y) {\n  if (isNaN(x = +x) || isNaN(y = +y)) return this; // ignore invalid points\n\n  var x0 = this._x0,\n      y0 = this._y0,\n      x1 = this._x1,\n      y1 = this._y1;\n\n  // If the quadtree has no extent, initialize them.\n  // Integer extent are necessary so that if we later double the extent,\n  // the existing quadrant boundaries don’t change due to floating point error!\n  if (isNaN(x0)) {\n    x1 = (x0 = Math.floor(x)) + 1;\n    y1 = (y0 = Math.floor(y)) + 1;\n  }\n\n  // Otherwise, double repeatedly to cover.\n  else {\n    var z = x1 - x0 || 1,\n        node = this._root,\n        parent,\n        i;\n\n    while (x0 > x || x >= x1 || y0 > y || y >= y1) {\n      i = (y < y0) << 1 | (x < x0);\n      parent = new Array(4), parent[i] = node, node = parent, z *= 2;\n      switch (i) {\n        case 0: x1 = x0 + z, y1 = y0 + z; break;\n        case 1: x0 = x1 - z, y1 = y0 + z; break;\n        case 2: x1 = x0 + z, y0 = y1 - z; break;\n        case 3: x0 = x1 - z, y0 = y1 - z; break;\n      }\n    }\n\n    if (this._root && this._root.length) this._root = node;\n  }\n\n  this._x0 = x0;\n  this._y0 = y0;\n  this._x1 = x1;\n  this._y1 = y1;\n  return this;\n}\n","export default function() {\n  var data = [];\n  this.visit(function(node) {\n    if (!node.length) do data.push(node.data); while (node = node.next)\n  });\n  return data;\n}\n","export default function(_) {\n  return arguments.length\n      ? this.cover(+_[0][0], +_[0][1]).cover(+_[1][0], +_[1][1])\n      : isNaN(this._x0) ? undefined : [[this._x0, this._y0], [this._x1, this._y1]];\n}\n","import Quad from \"./quad.js\";\n\nexport default function(x, y, radius) {\n  var data,\n      x0 = this._x0,\n      y0 = this._y0,\n      x1,\n      y1,\n      x2,\n      y2,\n      x3 = this._x1,\n      y3 = this._y1,\n      quads = [],\n      node = this._root,\n      q,\n      i;\n\n  if (node) quads.push(new Quad(node, x0, y0, x3, y3));\n  if (radius == null) radius = Infinity;\n  else {\n    x0 = x - radius, y0 = y - radius;\n    x3 = x + radius, y3 = y + radius;\n    radius *= radius;\n  }\n\n  while (q = quads.pop()) {\n\n    // Stop searching if this quadrant can’t contain a closer node.\n    if (!(node = q.node)\n        || (x1 = q.x0) > x3\n        || (y1 = q.y0) > y3\n        || (x2 = q.x1) < x0\n        || (y2 = q.y1) < y0) continue;\n\n    // Bisect the current quadrant.\n    if (node.length) {\n      var xm = (x1 + x2) / 2,\n          ym = (y1 + y2) / 2;\n\n      quads.push(\n        new Quad(node[3], xm, ym, x2, y2),\n        new Quad(node[2], x1, ym, xm, y2),\n        new Quad(node[1], xm, y1, x2, ym),\n        new Quad(node[0], x1, y1, xm, ym)\n      );\n\n      // Visit the closest quadrant first.\n      if (i = (y >= ym) << 1 | (x >= xm)) {\n        q = quads[quads.length - 1];\n        quads[quads.length - 1] = quads[quads.length - 1 - i];\n        quads[quads.length - 1 - i] = q;\n      }\n    }\n\n    // Visit this point. (Visiting coincident points isn’t necessary!)\n    else {\n      var dx = x - +this._x.call(null, node.data),\n          dy = y - +this._y.call(null, node.data),\n          d2 = dx * dx + dy * dy;\n      if (d2 < radius) {\n        var d = Math.sqrt(radius = d2);\n        x0 = x - d, y0 = y - d;\n        x3 = x + d, y3 = y + d;\n        data = node.data;\n      }\n    }\n  }\n\n  return data;\n}\n","export default function(d) {\n  if (isNaN(x = +this._x.call(null, d)) || isNaN(y = +this._y.call(null, d))) return this; // ignore invalid points\n\n  var parent,\n      node = this._root,\n      retainer,\n      previous,\n      next,\n      x0 = this._x0,\n      y0 = this._y0,\n      x1 = this._x1,\n      y1 = this._y1,\n      x,\n      y,\n      xm,\n      ym,\n      right,\n      bottom,\n      i,\n      j;\n\n  // If the tree is empty, initialize the root as a leaf.\n  if (!node) return this;\n\n  // Find the leaf node for the point.\n  // While descending, also retain the deepest parent with a non-removed sibling.\n  if (node.length) while (true) {\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm; else x1 = xm;\n    if (bottom = y >= (ym = (y0 + y1) / 2)) y0 = ym; else y1 = ym;\n    if (!(parent = node, node = node[i = bottom << 1 | right])) return this;\n    if (!node.length) break;\n    if (parent[(i + 1) & 3] || parent[(i + 2) & 3] || parent[(i + 3) & 3]) retainer = parent, j = i;\n  }\n\n  // Find the point to remove.\n  while (node.data !== d) if (!(previous = node, node = node.next)) return this;\n  if (next = node.next) delete node.next;\n\n  // If there are multiple coincident points, remove just the point.\n  if (previous) return (next ? previous.next = next : delete previous.next), this;\n\n  // If this is the root point, remove it.\n  if (!parent) return this._root = next, this;\n\n  // Remove this leaf.\n  next ? parent[i] = next : delete parent[i];\n\n  // If the parent now contains exactly one leaf, collapse superfluous parents.\n  if ((node = parent[0] || parent[1] || parent[2] || parent[3])\n      && node === (parent[3] || parent[2] || parent[1] || parent[0])\n      && !node.length) {\n    if (retainer) retainer[j] = node;\n    else this._root = node;\n  }\n\n  return this;\n}\n\nexport function removeAll(data) {\n  for (var i = 0, n = data.length; i < n; ++i) this.remove(data[i]);\n  return this;\n}\n","export default function() {\n  return this._root;\n}\n","export default function() {\n  var size = 0;\n  this.visit(function(node) {\n    if (!node.length) do ++size; while (node = node.next)\n  });\n  return size;\n}\n","import Quad from \"./quad.js\";\n\nexport default function(callback) {\n  var quads = [], q, node = this._root, child, x0, y0, x1, y1;\n  if (node) quads.push(new Quad(node, this._x0, this._y0, this._x1, this._y1));\n  while (q = quads.pop()) {\n    if (!callback(node = q.node, x0 = q.x0, y0 = q.y0, x1 = q.x1, y1 = q.y1) && node.length) {\n      var xm = (x0 + x1) / 2, ym = (y0 + y1) / 2;\n      if (child = node[3]) quads.push(new Quad(child, xm, ym, x1, y1));\n      if (child = node[2]) quads.push(new Quad(child, x0, ym, xm, y1));\n      if (child = node[1]) quads.push(new Quad(child, xm, y0, x1, ym));\n      if (child = node[0]) quads.push(new Quad(child, x0, y0, xm, ym));\n    }\n  }\n  return this;\n}\n","import Quad from \"./quad.js\";\n\nexport default function(callback) {\n  var quads = [], next = [], q;\n  if (this._root) quads.push(new Quad(this._root, this._x0, this._y0, this._x1, this._y1));\n  while (q = quads.pop()) {\n    var node = q.node;\n    if (node.length) {\n      var child, x0 = q.x0, y0 = q.y0, x1 = q.x1, y1 = q.y1, xm = (x0 + x1) / 2, ym = (y0 + y1) / 2;\n      if (child = node[0]) quads.push(new Quad(child, x0, y0, xm, ym));\n      if (child = node[1]) quads.push(new Quad(child, xm, y0, x1, ym));\n      if (child = node[2]) quads.push(new Quad(child, x0, ym, xm, y1));\n      if (child = node[3]) quads.push(new Quad(child, xm, ym, x1, y1));\n    }\n    next.push(q);\n  }\n  while (q = next.pop()) {\n    callback(q.node, q.x0, q.y0, q.x1, q.y1);\n  }\n  return this;\n}\n","// https://en.wikipedia.org/wiki/Linear_congruential_generator#Parameters_in_common_use\nconst a = 1664525;\nconst c = 1013904223;\nconst m = 4294967296; // 2^32\n\nexport default function() {\n  let s = 1;\n  return () => (s = (a * s + c) % m) / m;\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {timer} from \"d3-timer\";\nimport lcg from \"./lcg.js\";\n\nexport function x(d) {\n  return d.x;\n}\n\nexport function y(d) {\n  return d.y;\n}\n\nvar initialRadius = 10,\n    initialAngle = Math.PI * (3 - Math.sqrt(5));\n\nexport default function(nodes) {\n  var simulation,\n      alpha = 1,\n      alphaMin = 0.001,\n      alphaDecay = 1 - Math.pow(alphaMin, 1 / 300),\n      alphaTarget = 0,\n      velocityDecay = 0.6,\n      forces = new Map(),\n      stepper = timer(step),\n      event = dispatch(\"tick\", \"end\"),\n      random = lcg();\n\n  if (nodes == null) nodes = [];\n\n  function step() {\n    tick();\n    event.call(\"tick\", simulation);\n    if (alpha < alphaMin) {\n      stepper.stop();\n      event.call(\"end\", simulation);\n    }\n  }\n\n  function tick(iterations) {\n    var i, n = nodes.length, node;\n\n    if (iterations === undefined) iterations = 1;\n\n    for (var k = 0; k < iterations; ++k) {\n      alpha += (alphaTarget - alpha) * alphaDecay;\n\n      forces.forEach(function(force) {\n        force(alpha);\n      });\n\n      for (i = 0; i < n; ++i) {\n        node = nodes[i];\n        if (node.fx == null) node.x += node.vx *= velocityDecay;\n        else node.x = node.fx, node.vx = 0;\n        if (node.fy == null) node.y += node.vy *= velocityDecay;\n        else node.y = node.fy, node.vy = 0;\n      }\n    }\n\n    return simulation;\n  }\n\n  function initializeNodes() {\n    for (var i = 0, n = nodes.length, node; i < n; ++i) {\n      node = nodes[i], node.index = i;\n      if (node.fx != null) node.x = node.fx;\n      if (node.fy != null) node.y = node.fy;\n      if (isNaN(node.x) || isNaN(node.y)) {\n        var radius = initialRadius * Math.sqrt(0.5 + i), angle = i * initialAngle;\n        node.x = radius * Math.cos(angle);\n        node.y = radius * Math.sin(angle);\n      }\n      if (isNaN(node.vx) || isNaN(node.vy)) {\n        node.vx = node.vy = 0;\n      }\n    }\n  }\n\n  function initializeForce(force) {\n    if (force.initialize) force.initialize(nodes, random);\n    return force;\n  }\n\n  initializeNodes();\n\n  return simulation = {\n    tick: tick,\n\n    restart: function() {\n      return stepper.restart(step), simulation;\n    },\n\n    stop: function() {\n      return stepper.stop(), simulation;\n    },\n\n    nodes: function(_) {\n      return arguments.length ? (nodes = _, initializeNodes(), forces.forEach(initializeForce), simulation) : nodes;\n    },\n\n    alpha: function(_) {\n      return arguments.length ? (alpha = +_, simulation) : alpha;\n    },\n\n    alphaMin: function(_) {\n      return arguments.length ? (alphaMin = +_, simulation) : alphaMin;\n    },\n\n    alphaDecay: function(_) {\n      return arguments.length ? (alphaDecay = +_, simulation) : +alphaDecay;\n    },\n\n    alphaTarget: function(_) {\n      return arguments.length ? (alphaTarget = +_, simulation) : alphaTarget;\n    },\n\n    velocityDecay: function(_) {\n      return arguments.length ? (velocityDecay = 1 - _, simulation) : 1 - velocityDecay;\n    },\n\n    randomSource: function(_) {\n      return arguments.length ? (random = _, forces.forEach(initializeForce), simulation) : random;\n    },\n\n    force: function(name, _) {\n      return arguments.length > 1 ? ((_ == null ? forces.delete(name) : forces.set(name, initializeForce(_))), simulation) : forces.get(name);\n    },\n\n    find: function(x, y, radius) {\n      var i = 0,\n          n = nodes.length,\n          dx,\n          dy,\n          d2,\n          node,\n          closest;\n\n      if (radius == null) radius = Infinity;\n      else radius *= radius;\n\n      for (i = 0; i < n; ++i) {\n        node = nodes[i];\n        dx = x - node.x;\n        dy = y - node.y;\n        d2 = dx * dx + dy * dy;\n        if (d2 < radius) closest = node, radius = d2;\n      }\n\n      return closest;\n    },\n\n    on: function(name, _) {\n      return arguments.length > 1 ? (event.on(name, _), simulation) : event.on(name);\n    }\n  };\n}\n","import constant from \"./constant.js\";\n\nexport default function(x) {\n  var strength = constant(0.1),\n      nodes,\n      strengths,\n      xz;\n\n  if (typeof x !== \"function\") x = constant(x == null ? 0 : +x);\n\n  function force(alpha) {\n    for (var i = 0, n = nodes.length, node; i < n; ++i) {\n      node = nodes[i], node.vx += (xz[i] - node.x) * strengths[i] * alpha;\n    }\n  }\n\n  function initialize() {\n    if (!nodes) return;\n    var i, n = nodes.length;\n    strengths = new Array(n);\n    xz = new Array(n);\n    for (i = 0; i < n; ++i) {\n      strengths[i] = isNaN(xz[i] = +x(nodes[i], i, nodes)) ? 0 : +strength(nodes[i], i, nodes);\n    }\n  }\n\n  force.initialize = function(_) {\n    nodes = _;\n    initialize();\n  };\n\n  force.strength = function(_) {\n    return arguments.length ? (strength = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : strength;\n  };\n\n  force.x = function(_) {\n    return arguments.length ? (x = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : x;\n  };\n\n  return force;\n}\n","import constant from \"./constant.js\";\n\nexport default function(y) {\n  var strength = constant(0.1),\n      nodes,\n      strengths,\n      yz;\n\n  if (typeof y !== \"function\") y = constant(y == null ? 0 : +y);\n\n  function force(alpha) {\n    for (var i = 0, n = nodes.length, node; i < n; ++i) {\n      node = nodes[i], node.vy += (yz[i] - node.y) * strengths[i] * alpha;\n    }\n  }\n\n  function initialize() {\n    if (!nodes) return;\n    var i, n = nodes.length;\n    strengths = new Array(n);\n    yz = new Array(n);\n    for (i = 0; i < n; ++i) {\n      strengths[i] = isNaN(yz[i] = +y(nodes[i], i, nodes)) ? 0 : +strength(nodes[i], i, nodes);\n    }\n  }\n\n  force.initialize = function(_) {\n    nodes = _;\n    initialize();\n  };\n\n  force.strength = function(_) {\n    return arguments.length ? (strength = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : strength;\n  };\n\n  force.y = function(_) {\n    return arguments.length ? (y = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : y;\n  };\n\n  return force;\n}\n","export default function(x) {\n  return Math.abs(x = Math.round(x)) >= 1e21\n      ? x.toLocaleString(\"en\").replace(/,/g, \"\")\n      : x.toString(10);\n}\n\n// Computes the decimal coefficient and exponent of the specified number x with\n// significant digits p, where x is positive and p is in [1, 21] or undefined.\n// For example, formatDecimalParts(1.23) returns [\"123\", 0].\nexport function formatDecimalParts(x, p) {\n  if ((i = (x = p ? x.toExponential(p - 1) : x.toExponential()).indexOf(\"e\")) < 0) return null; // NaN, ±Infinity\n  var i, coefficient = x.slice(0, i);\n\n  // The string returned by toExponential either has the form \\d\\.\\d+e[-+]\\d+\n  // (e.g., 1.2e+3) or the form \\de[-+]\\d+ (e.g., 1e+3).\n  return [\n    coefficient.length > 1 ? coefficient[0] + coefficient.slice(2) : coefficient,\n    +x.slice(i + 1)\n  ];\n}\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport default function(x) {\n  return x = formatDecimalParts(Math.abs(x)), x ? x[1] : NaN;\n}\n","// [[fill]align][sign][symbol][0][width][,][.precision][~][type]\nvar re = /^(?:(.)?([<>=^]))?([+\\-( ])?([$#])?(0)?(\\d+)?(,)?(\\.\\d+)?(~)?([a-z%])?$/i;\n\nexport default function formatSpecifier(specifier) {\n  if (!(match = re.exec(specifier))) throw new Error(\"invalid format: \" + specifier);\n  var match;\n  return new FormatSpecifier({\n    fill: match[1],\n    align: match[2],\n    sign: match[3],\n    symbol: match[4],\n    zero: match[5],\n    width: match[6],\n    comma: match[7],\n    precision: match[8] && match[8].slice(1),\n    trim: match[9],\n    type: match[10]\n  });\n}\n\nformatSpecifier.prototype = FormatSpecifier.prototype; // instanceof\n\nexport function FormatSpecifier(specifier) {\n  this.fill = specifier.fill === undefined ? \" \" : specifier.fill + \"\";\n  this.align = specifier.align === undefined ? \">\" : specifier.align + \"\";\n  this.sign = specifier.sign === undefined ? \"-\" : specifier.sign + \"\";\n  this.symbol = specifier.symbol === undefined ? \"\" : specifier.symbol + \"\";\n  this.zero = !!specifier.zero;\n  this.width = specifier.width === undefined ? undefined : +specifier.width;\n  this.comma = !!specifier.comma;\n  this.precision = specifier.precision === undefined ? undefined : +specifier.precision;\n  this.trim = !!specifier.trim;\n  this.type = specifier.type === undefined ? \"\" : specifier.type + \"\";\n}\n\nFormatSpecifier.prototype.toString = function() {\n  return this.fill\n      + this.align\n      + this.sign\n      + this.symbol\n      + (this.zero ? \"0\" : \"\")\n      + (this.width === undefined ? \"\" : Math.max(1, this.width | 0))\n      + (this.comma ? \",\" : \"\")\n      + (this.precision === undefined ? \"\" : \".\" + Math.max(0, this.precision | 0))\n      + (this.trim ? \"~\" : \"\")\n      + this.type;\n};\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport var prefixExponent;\n\nexport default function(x, p) {\n  var d = formatDecimalParts(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1],\n      i = exponent - (prefixExponent = Math.max(-8, Math.min(8, Math.floor(exponent / 3))) * 3) + 1,\n      n = coefficient.length;\n  return i === n ? coefficient\n      : i > n ? coefficient + new Array(i - n + 1).join(\"0\")\n      : i > 0 ? coefficient.slice(0, i) + \".\" + coefficient.slice(i)\n      : \"0.\" + new Array(1 - i).join(\"0\") + formatDecimalParts(x, Math.max(0, p + i - 1))[0]; // less than 1y!\n}\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport default function(x, p) {\n  var d = formatDecimalParts(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1];\n  return exponent < 0 ? \"0.\" + new Array(-exponent).join(\"0\") + coefficient\n      : coefficient.length > exponent + 1 ? coefficient.slice(0, exponent + 1) + \".\" + coefficient.slice(exponent + 1)\n      : coefficient + new Array(exponent - coefficient.length + 2).join(\"0\");\n}\n","import formatDecimal from \"./formatDecimal.js\";\nimport formatPrefixAuto from \"./formatPrefixAuto.js\";\nimport formatRounded from \"./formatRounded.js\";\n\nexport default {\n  \"%\": (x, p) => (x * 100).toFixed(p),\n  \"b\": (x) => Math.round(x).toString(2),\n  \"c\": (x) => x + \"\",\n  \"d\": formatDecimal,\n  \"e\": (x, p) => x.toExponential(p),\n  \"f\": (x, p) => x.toFixed(p),\n  \"g\": (x, p) => x.toPrecision(p),\n  \"o\": (x) => Math.round(x).toString(8),\n  \"p\": (x, p) => formatRounded(x * 100, p),\n  \"r\": formatRounded,\n  \"s\": formatPrefixAuto,\n  \"X\": (x) => Math.round(x).toString(16).toUpperCase(),\n  \"x\": (x) => Math.round(x).toString(16)\n};\n","export default function(x) {\n  return x;\n}\n","import exponent from \"./exponent.js\";\nimport formatGroup from \"./formatGroup.js\";\nimport formatNumerals from \"./formatNumerals.js\";\nimport formatSpecifier from \"./formatSpecifier.js\";\nimport formatTrim from \"./formatTrim.js\";\nimport formatTypes from \"./formatTypes.js\";\nimport {prefixExponent} from \"./formatPrefixAuto.js\";\nimport identity from \"./identity.js\";\n\nvar map = Array.prototype.map,\n    prefixes = [\"y\",\"z\",\"a\",\"f\",\"p\",\"n\",\"µ\",\"m\",\"\",\"k\",\"M\",\"G\",\"T\",\"P\",\"E\",\"Z\",\"Y\"];\n\nexport default function(locale) {\n  var group = locale.grouping === undefined || locale.thousands === undefined ? identity : formatGroup(map.call(locale.grouping, Number), locale.thousands + \"\"),\n      currencyPrefix = locale.currency === undefined ? \"\" : locale.currency[0] + \"\",\n      currencySuffix = locale.currency === undefined ? \"\" : locale.currency[1] + \"\",\n      decimal = locale.decimal === undefined ? \".\" : locale.decimal + \"\",\n      numerals = locale.numerals === undefined ? identity : formatNumerals(map.call(locale.numerals, String)),\n      percent = locale.percent === undefined ? \"%\" : locale.percent + \"\",\n      minus = locale.minus === undefined ? \"−\" : locale.minus + \"\",\n      nan = locale.nan === undefined ? \"NaN\" : locale.nan + \"\";\n\n  function newFormat(specifier) {\n    specifier = formatSpecifier(specifier);\n\n    var fill = specifier.fill,\n        align = specifier.align,\n        sign = specifier.sign,\n        symbol = specifier.symbol,\n        zero = specifier.zero,\n        width = specifier.width,\n        comma = specifier.comma,\n        precision = specifier.precision,\n        trim = specifier.trim,\n        type = specifier.type;\n\n    // The \"n\" type is an alias for \",g\".\n    if (type === \"n\") comma = true, type = \"g\";\n\n    // The \"\" type, and any invalid type, is an alias for \".12~g\".\n    else if (!formatTypes[type]) precision === undefined && (precision = 12), trim = true, type = \"g\";\n\n    // If zero fill is specified, padding goes after sign and before digits.\n    if (zero || (fill === \"0\" && align === \"=\")) zero = true, fill = \"0\", align = \"=\";\n\n    // Compute the prefix and suffix.\n    // For SI-prefix, the suffix is lazily computed.\n    var prefix = symbol === \"$\" ? currencyPrefix : symbol === \"#\" && /[boxX]/.test(type) ? \"0\" + type.toLowerCase() : \"\",\n        suffix = symbol === \"$\" ? currencySuffix : /[%p]/.test(type) ? percent : \"\";\n\n    // What format function should we use?\n    // Is this an integer type?\n    // Can this type generate exponential notation?\n    var formatType = formatTypes[type],\n        maybeSuffix = /[defgprs%]/.test(type);\n\n    // Set the default precision if not specified,\n    // or clamp the specified precision to the supported range.\n    // For significant precision, it must be in [1, 21].\n    // For fixed precision, it must be in [0, 20].\n    precision = precision === undefined ? 6\n        : /[gprs]/.test(type) ? Math.max(1, Math.min(21, precision))\n        : Math.max(0, Math.min(20, precision));\n\n    function format(value) {\n      var valuePrefix = prefix,\n          valueSuffix = suffix,\n          i, n, c;\n\n      if (type === \"c\") {\n        valueSuffix = formatType(value) + valueSuffix;\n        value = \"\";\n      } else {\n        value = +value;\n\n        // Determine the sign. -0 is not less than 0, but 1 / -0 is!\n        var valueNegative = value < 0 || 1 / value < 0;\n\n        // Perform the initial formatting.\n        value = isNaN(value) ? nan : formatType(Math.abs(value), precision);\n\n        // Trim insignificant zeros.\n        if (trim) value = formatTrim(value);\n\n        // If a negative value rounds to zero after formatting, and no explicit positive sign is requested, hide the sign.\n        if (valueNegative && +value === 0 && sign !== \"+\") valueNegative = false;\n\n        // Compute the prefix and suffix.\n        valuePrefix = (valueNegative ? (sign === \"(\" ? sign : minus) : sign === \"-\" || sign === \"(\" ? \"\" : sign) + valuePrefix;\n        valueSuffix = (type === \"s\" ? prefixes[8 + prefixExponent / 3] : \"\") + valueSuffix + (valueNegative && sign === \"(\" ? \")\" : \"\");\n\n        // Break the formatted value into the integer “value” part that can be\n        // grouped, and fractional or exponential “suffix” part that is not.\n        if (maybeSuffix) {\n          i = -1, n = value.length;\n          while (++i < n) {\n            if (c = value.charCodeAt(i), 48 > c || c > 57) {\n              valueSuffix = (c === 46 ? decimal + value.slice(i + 1) : value.slice(i)) + valueSuffix;\n              value = value.slice(0, i);\n              break;\n            }\n          }\n        }\n      }\n\n      // If the fill character is not \"0\", grouping is applied before padding.\n      if (comma && !zero) value = group(value, Infinity);\n\n      // Compute the padding.\n      var length = valuePrefix.length + value.length + valueSuffix.length,\n          padding = length < width ? new Array(width - length + 1).join(fill) : \"\";\n\n      // If the fill character is \"0\", grouping is applied after padding.\n      if (comma && zero) value = group(padding + value, padding.length ? width - valueSuffix.length : Infinity), padding = \"\";\n\n      // Reconstruct the final output based on the desired alignment.\n      switch (align) {\n        case \"<\": value = valuePrefix + value + valueSuffix + padding; break;\n        case \"=\": value = valuePrefix + padding + value + valueSuffix; break;\n        case \"^\": value = padding.slice(0, length = padding.length >> 1) + valuePrefix + value + valueSuffix + padding.slice(length); break;\n        default: value = padding + valuePrefix + value + valueSuffix; break;\n      }\n\n      return numerals(value);\n    }\n\n    format.toString = function() {\n      return specifier + \"\";\n    };\n\n    return format;\n  }\n\n  function formatPrefix(specifier, value) {\n    var f = newFormat((specifier = formatSpecifier(specifier), specifier.type = \"f\", specifier)),\n        e = Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3,\n        k = Math.pow(10, -e),\n        prefix = prefixes[8 + e / 3];\n    return function(value) {\n      return f(k * value) + prefix;\n    };\n  }\n\n  return {\n    format: newFormat,\n    formatPrefix: formatPrefix\n  };\n}\n","import formatLocale from \"./locale.js\";\n\nvar locale;\nexport var format;\nexport var formatPrefix;\n\ndefaultLocale({\n  thousands: \",\",\n  grouping: [3],\n  currency: [\"$\", \"\"]\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  format = locale.format;\n  formatPrefix = locale.formatPrefix;\n  return locale;\n}\n","export default function(grouping, thousands) {\n  return function(value, width) {\n    var i = value.length,\n        t = [],\n        j = 0,\n        g = grouping[0],\n        length = 0;\n\n    while (i > 0 && g > 0) {\n      if (length + g + 1 > width) g = Math.max(1, width - length);\n      t.push(value.substring(i -= g, i + g));\n      if ((length += g + 1) > width) break;\n      g = grouping[j = (j + 1) % grouping.length];\n    }\n\n    return t.reverse().join(thousands);\n  };\n}\n","export default function(numerals) {\n  return function(value) {\n    return value.replace(/[0-9]/g, function(i) {\n      return numerals[+i];\n    });\n  };\n}\n","// Trims insignificant zeros, e.g., replaces 1.2000k with 1.2k.\nexport default function(s) {\n  out: for (var n = s.length, i = 1, i0 = -1, i1; i < n; ++i) {\n    switch (s[i]) {\n      case \".\": i0 = i1 = i; break;\n      case \"0\": if (i0 === 0) i0 = i; i1 = i; break;\n      default: if (!+s[i]) break out; if (i0 > 0) i0 = 0; break;\n    }\n  }\n  return i0 > 0 ? s.slice(0, i0) + s.slice(i1 + 1) : s;\n}\n","function count(node) {\n  var sum = 0,\n      children = node.children,\n      i = children && children.length;\n  if (!i) sum = 1;\n  else while (--i >= 0) sum += children[i].value;\n  node.value = sum;\n}\n\nexport default function() {\n  return this.eachAfter(count);\n}\n","import node_count from \"./count.js\";\nimport node_each from \"./each.js\";\nimport node_eachBefore from \"./eachBefore.js\";\nimport node_eachAfter from \"./eachAfter.js\";\nimport node_find from \"./find.js\";\nimport node_sum from \"./sum.js\";\nimport node_sort from \"./sort.js\";\nimport node_path from \"./path.js\";\nimport node_ancestors from \"./ancestors.js\";\nimport node_descendants from \"./descendants.js\";\nimport node_leaves from \"./leaves.js\";\nimport node_links from \"./links.js\";\nimport node_iterator from \"./iterator.js\";\n\nexport default function hierarchy(data, children) {\n  if (data instanceof Map) {\n    data = [undefined, data];\n    if (children === undefined) children = mapChildren;\n  } else if (children === undefined) {\n    children = objectChildren;\n  }\n\n  var root = new Node(data),\n      node,\n      nodes = [root],\n      child,\n      childs,\n      i,\n      n;\n\n  while (node = nodes.pop()) {\n    if ((childs = children(node.data)) && (n = (childs = Array.from(childs)).length)) {\n      node.children = childs;\n      for (i = n - 1; i >= 0; --i) {\n        nodes.push(child = childs[i] = new Node(childs[i]));\n        child.parent = node;\n        child.depth = node.depth + 1;\n      }\n    }\n  }\n\n  return root.eachBefore(computeHeight);\n}\n\nfunction node_copy() {\n  return hierarchy(this).eachBefore(copyData);\n}\n\nfunction objectChildren(d) {\n  return d.children;\n}\n\nfunction mapChildren(d) {\n  return Array.isArray(d) ? d[1] : null;\n}\n\nfunction copyData(node) {\n  if (node.data.value !== undefined) node.value = node.data.value;\n  node.data = node.data.data;\n}\n\nexport function computeHeight(node) {\n  var height = 0;\n  do node.height = height;\n  while ((node = node.parent) && (node.height < ++height));\n}\n\nexport function Node(data) {\n  this.data = data;\n  this.depth =\n  this.height = 0;\n  this.parent = null;\n}\n\nNode.prototype = hierarchy.prototype = {\n  constructor: Node,\n  count: node_count,\n  each: node_each,\n  eachAfter: node_eachAfter,\n  eachBefore: node_eachBefore,\n  find: node_find,\n  sum: node_sum,\n  sort: node_sort,\n  path: node_path,\n  ancestors: node_ancestors,\n  descendants: node_descendants,\n  leaves: node_leaves,\n  links: node_links,\n  copy: node_copy,\n  [Symbol.iterator]: node_iterator\n};\n","export function optional(f) {\n  return f == null ? null : required(f);\n}\n\nexport function required(f) {\n  if (typeof f !== \"function\") throw new Error;\n  return f;\n}\n","export default function(callback, that) {\n  let index = -1;\n  for (const node of this) {\n    callback.call(that, node, ++index, this);\n  }\n  return this;\n}\n","export default function(callback, that) {\n  var node = this, nodes = [node], next = [], children, i, n, index = -1;\n  while (node = nodes.pop()) {\n    next.push(node);\n    if (children = node.children) {\n      for (i = 0, n = children.length; i < n; ++i) {\n        nodes.push(children[i]);\n      }\n    }\n  }\n  while (node = next.pop()) {\n    callback.call(that, node, ++index, this);\n  }\n  return this;\n}\n","export default function(callback, that) {\n  var node = this, nodes = [node], children, i, index = -1;\n  while (node = nodes.pop()) {\n    callback.call(that, node, ++index, this);\n    if (children = node.children) {\n      for (i = children.length - 1; i >= 0; --i) {\n        nodes.push(children[i]);\n      }\n    }\n  }\n  return this;\n}\n","export default function(callback, that) {\n  let index = -1;\n  for (const node of this) {\n    if (callback.call(that, node, ++index, this)) {\n      return node;\n    }\n  }\n}\n","export default function(value) {\n  return this.eachAfter(function(node) {\n    var sum = +value(node.data) || 0,\n        children = node.children,\n        i = children && children.length;\n    while (--i >= 0) sum += children[i].value;\n    node.value = sum;\n  });\n}\n","export default function(compare) {\n  return this.eachBefore(function(node) {\n    if (node.children) {\n      node.children.sort(compare);\n    }\n  });\n}\n","export default function(end) {\n  var start = this,\n      ancestor = leastCommonAncestor(start, end),\n      nodes = [start];\n  while (start !== ancestor) {\n    start = start.parent;\n    nodes.push(start);\n  }\n  var k = nodes.length;\n  while (end !== ancestor) {\n    nodes.splice(k, 0, end);\n    end = end.parent;\n  }\n  return nodes;\n}\n\nfunction leastCommonAncestor(a, b) {\n  if (a === b) return a;\n  var aNodes = a.ancestors(),\n      bNodes = b.ancestors(),\n      c = null;\n  a = aNodes.pop();\n  b = bNodes.pop();\n  while (a === b) {\n    c = a;\n    a = aNodes.pop();\n    b = bNodes.pop();\n  }\n  return c;\n}\n","export default function() {\n  var node = this, nodes = [node];\n  while (node = node.parent) {\n    nodes.push(node);\n  }\n  return nodes;\n}\n","export default function() {\n  return Array.from(this);\n}\n","export default function() {\n  var leaves = [];\n  this.eachBefore(function(node) {\n    if (!node.children) {\n      leaves.push(node);\n    }\n  });\n  return leaves;\n}\n","export default function() {\n  var root = this, links = [];\n  root.each(function(node) {\n    if (node !== root) { // Don’t include the root’s parent, if any.\n      links.push({source: node.parent, target: node});\n    }\n  });\n  return links;\n}\n","export default function*() {\n  var node = this, current, next = [node], children, i, n;\n  do {\n    current = next.reverse(), next = [];\n    while (node = current.pop()) {\n      yield node;\n      if (children = node.children) {\n        for (i = 0, n = children.length; i < n; ++i) {\n          next.push(children[i]);\n        }\n      }\n    }\n  } while (next.length);\n}\n","import {required} from \"./accessors.js\";\nimport {Node, computeHeight} from \"./hierarchy/index.js\";\n\nvar preroot = {depth: -1},\n    ambiguous = {};\n\nfunction defaultId(d) {\n  return d.id;\n}\n\nfunction defaultParentId(d) {\n  return d.parentId;\n}\n\nexport default function() {\n  var id = defaultId,\n      parentId = defaultParentId;\n\n  function stratify(data) {\n    var nodes = Array.from(data),\n        n = nodes.length,\n        d,\n        i,\n        root,\n        parent,\n        node,\n        nodeId,\n        nodeKey,\n        nodeByKey = new Map;\n\n    for (i = 0; i < n; ++i) {\n      d = nodes[i], node = nodes[i] = new Node(d);\n      if ((nodeId = id(d, i, data)) != null && (nodeId += \"\")) {\n        nodeKey = node.id = nodeId;\n        nodeByKey.set(nodeKey, nodeByKey.has(nodeKey) ? ambiguous : node);\n      }\n      if ((nodeId = parentId(d, i, data)) != null && (nodeId += \"\")) {\n        node.parent = nodeId;\n      }\n    }\n\n    for (i = 0; i < n; ++i) {\n      node = nodes[i];\n      if (nodeId = node.parent) {\n        parent = nodeByKey.get(nodeId);\n        if (!parent) throw new Error(\"missing: \" + nodeId);\n        if (parent === ambiguous) throw new Error(\"ambiguous: \" + nodeId);\n        if (parent.children) parent.children.push(node);\n        else parent.children = [node];\n        node.parent = parent;\n      } else {\n        if (root) throw new Error(\"multiple roots\");\n        root = node;\n      }\n    }\n\n    if (!root) throw new Error(\"no root\");\n    root.parent = preroot;\n    root.eachBefore(function(node) { node.depth = node.parent.depth + 1; --n; }).eachBefore(computeHeight);\n    root.parent = null;\n    if (n > 0) throw new Error(\"cycle\");\n\n    return root;\n  }\n\n  stratify.id = function(x) {\n    return arguments.length ? (id = required(x), stratify) : id;\n  };\n\n  stratify.parentId = function(x) {\n    return arguments.length ? (parentId = required(x), stratify) : parentId;\n  };\n\n  return stratify;\n}\n","import {Node} from \"./hierarchy/index.js\";\n\nfunction defaultSeparation(a, b) {\n  return a.parent === b.parent ? 1 : 2;\n}\n\n// function radialSeparation(a, b) {\n//   return (a.parent === b.parent ? 1 : 2) / a.depth;\n// }\n\n// This function is used to traverse the left contour of a subtree (or\n// subforest). It returns the successor of v on this contour. This successor is\n// either given by the leftmost child of v or by the thread of v. The function\n// returns null if and only if v is on the highest level of its subtree.\nfunction nextLeft(v) {\n  var children = v.children;\n  return children ? children[0] : v.t;\n}\n\n// This function works analogously to nextLeft.\nfunction nextRight(v) {\n  var children = v.children;\n  return children ? children[children.length - 1] : v.t;\n}\n\n// Shifts the current subtree rooted at w+. This is done by increasing\n// prelim(w+) and mod(w+) by shift.\nfunction moveSubtree(wm, wp, shift) {\n  var change = shift / (wp.i - wm.i);\n  wp.c -= change;\n  wp.s += shift;\n  wm.c += change;\n  wp.z += shift;\n  wp.m += shift;\n}\n\n// All other shifts, applied to the smaller subtrees between w- and w+, are\n// performed by this function. To prepare the shifts, we have to adjust\n// change(w+), shift(w+), and change(w-).\nfunction executeShifts(v) {\n  var shift = 0,\n      change = 0,\n      children = v.children,\n      i = children.length,\n      w;\n  while (--i >= 0) {\n    w = children[i];\n    w.z += shift;\n    w.m += shift;\n    shift += w.s + (change += w.c);\n  }\n}\n\n// If vi-’s ancestor is a sibling of v, returns vi-’s ancestor. Otherwise,\n// returns the specified (default) ancestor.\nfunction nextAncestor(vim, v, ancestor) {\n  return vim.a.parent === v.parent ? vim.a : ancestor;\n}\n\nfunction TreeNode(node, i) {\n  this._ = node;\n  this.parent = null;\n  this.children = null;\n  this.A = null; // default ancestor\n  this.a = this; // ancestor\n  this.z = 0; // prelim\n  this.m = 0; // mod\n  this.c = 0; // change\n  this.s = 0; // shift\n  this.t = null; // thread\n  this.i = i; // number\n}\n\nTreeNode.prototype = Object.create(Node.prototype);\n\nfunction treeRoot(root) {\n  var tree = new TreeNode(root, 0),\n      node,\n      nodes = [tree],\n      child,\n      children,\n      i,\n      n;\n\n  while (node = nodes.pop()) {\n    if (children = node._.children) {\n      node.children = new Array(n = children.length);\n      for (i = n - 1; i >= 0; --i) {\n        nodes.push(child = node.children[i] = new TreeNode(children[i], i));\n        child.parent = node;\n      }\n    }\n  }\n\n  (tree.parent = new TreeNode(null, 0)).children = [tree];\n  return tree;\n}\n\n// Node-link tree diagram using the Reingold-Tilford \"tidy\" algorithm\nexport default function() {\n  var separation = defaultSeparation,\n      dx = 1,\n      dy = 1,\n      nodeSize = null;\n\n  function tree(root) {\n    var t = treeRoot(root);\n\n    // Compute the layout using Buchheim et al.’s algorithm.\n    t.eachAfter(firstWalk), t.parent.m = -t.z;\n    t.eachBefore(secondWalk);\n\n    // If a fixed node size is specified, scale x and y.\n    if (nodeSize) root.eachBefore(sizeNode);\n\n    // If a fixed tree size is specified, scale x and y based on the extent.\n    // Compute the left-most, right-most, and depth-most nodes for extents.\n    else {\n      var left = root,\n          right = root,\n          bottom = root;\n      root.eachBefore(function(node) {\n        if (node.x < left.x) left = node;\n        if (node.x > right.x) right = node;\n        if (node.depth > bottom.depth) bottom = node;\n      });\n      var s = left === right ? 1 : separation(left, right) / 2,\n          tx = s - left.x,\n          kx = dx / (right.x + s + tx),\n          ky = dy / (bottom.depth || 1);\n      root.eachBefore(function(node) {\n        node.x = (node.x + tx) * kx;\n        node.y = node.depth * ky;\n      });\n    }\n\n    return root;\n  }\n\n  // Computes a preliminary x-coordinate for v. Before that, FIRST WALK is\n  // applied recursively to the children of v, as well as the function\n  // APPORTION. After spacing out the children by calling EXECUTE SHIFTS, the\n  // node v is placed to the midpoint of its outermost children.\n  function firstWalk(v) {\n    var children = v.children,\n        siblings = v.parent.children,\n        w = v.i ? siblings[v.i - 1] : null;\n    if (children) {\n      executeShifts(v);\n      var midpoint = (children[0].z + children[children.length - 1].z) / 2;\n      if (w) {\n        v.z = w.z + separation(v._, w._);\n        v.m = v.z - midpoint;\n      } else {\n        v.z = midpoint;\n      }\n    } else if (w) {\n      v.z = w.z + separation(v._, w._);\n    }\n    v.parent.A = apportion(v, w, v.parent.A || siblings[0]);\n  }\n\n  // Computes all real x-coordinates by summing up the modifiers recursively.\n  function secondWalk(v) {\n    v._.x = v.z + v.parent.m;\n    v.m += v.parent.m;\n  }\n\n  // The core of the algorithm. Here, a new subtree is combined with the\n  // previous subtrees. Threads are used to traverse the inside and outside\n  // contours of the left and right subtree up to the highest common level. The\n  // vertices used for the traversals are vi+, vi-, vo-, and vo+, where the\n  // superscript o means outside and i means inside, the subscript - means left\n  // subtree and + means right subtree. For summing up the modifiers along the\n  // contour, we use respective variables si+, si-, so-, and so+. Whenever two\n  // nodes of the inside contours conflict, we compute the left one of the\n  // greatest uncommon ancestors using the function ANCESTOR and call MOVE\n  // SUBTREE to shift the subtree and prepare the shifts of smaller subtrees.\n  // Finally, we add a new thread (if necessary).\n  function apportion(v, w, ancestor) {\n    if (w) {\n      var vip = v,\n          vop = v,\n          vim = w,\n          vom = vip.parent.children[0],\n          sip = vip.m,\n          sop = vop.m,\n          sim = vim.m,\n          som = vom.m,\n          shift;\n      while (vim = nextRight(vim), vip = nextLeft(vip), vim && vip) {\n        vom = nextLeft(vom);\n        vop = nextRight(vop);\n        vop.a = v;\n        shift = vim.z + sim - vip.z - sip + separation(vim._, vip._);\n        if (shift > 0) {\n          moveSubtree(nextAncestor(vim, v, ancestor), v, shift);\n          sip += shift;\n          sop += shift;\n        }\n        sim += vim.m;\n        sip += vip.m;\n        som += vom.m;\n        sop += vop.m;\n      }\n      if (vim && !nextRight(vop)) {\n        vop.t = vim;\n        vop.m += sim - sop;\n      }\n      if (vip && !nextLeft(vom)) {\n        vom.t = vip;\n        vom.m += sip - som;\n        ancestor = v;\n      }\n    }\n    return ancestor;\n  }\n\n  function sizeNode(node) {\n    node.x *= dx;\n    node.y = node.depth * dy;\n  }\n\n  tree.separation = function(x) {\n    return arguments.length ? (separation = x, tree) : separation;\n  };\n\n  tree.size = function(x) {\n    return arguments.length ? (nodeSize = false, dx = +x[0], dy = +x[1], tree) : (nodeSize ? null : [dx, dy]);\n  };\n\n  tree.nodeSize = function(x) {\n    return arguments.length ? (nodeSize = true, dx = +x[0], dy = +x[1], tree) : (nodeSize ? [dx, dy] : null);\n  };\n\n  return tree;\n}\n","export function initRange(domain, range) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: this.range(domain); break;\n    default: this.range(range).domain(domain); break;\n  }\n  return this;\n}\n\nexport function initInterpolator(domain, interpolator) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: {\n      if (typeof domain === \"function\") this.interpolator(domain);\n      else this.range(domain);\n      break;\n    }\n    default: {\n      this.domain(domain);\n      if (typeof interpolator === \"function\") this.interpolator(interpolator);\n      else this.range(interpolator);\n      break;\n    }\n  }\n  return this;\n}\n","export default function number(x) {\n  return +x;\n}\n","import {bisect} from \"d3-array\";\nimport {interpolate as interpolateValue, interpolateNumber, interpolateRound} from \"d3-interpolate\";\nimport constant from \"./constant.js\";\nimport number from \"./number.js\";\n\nvar unit = [0, 1];\n\nexport function identity(x) {\n  return x;\n}\n\nfunction normalize(a, b) {\n  return (b -= (a = +a))\n      ? function(x) { return (x - a) / b; }\n      : constant(isNaN(b) ? NaN : 0.5);\n}\n\nfunction clamper(a, b) {\n  var t;\n  if (a > b) t = a, a = b, b = t;\n  return function(x) { return Math.max(a, Math.min(b, x)); };\n}\n\n// normalize(a, b)(x) takes a domain value x in [a,b] and returns the corresponding parameter t in [0,1].\n// interpolate(a, b)(t) takes a parameter t in [0,1] and returns the corresponding range value x in [a,b].\nfunction bimap(domain, range, interpolate) {\n  var d0 = domain[0], d1 = domain[1], r0 = range[0], r1 = range[1];\n  if (d1 < d0) d0 = normalize(d1, d0), r0 = interpolate(r1, r0);\n  else d0 = normalize(d0, d1), r0 = interpolate(r0, r1);\n  return function(x) { return r0(d0(x)); };\n}\n\nfunction polymap(domain, range, interpolate) {\n  var j = Math.min(domain.length, range.length) - 1,\n      d = new Array(j),\n      r = new Array(j),\n      i = -1;\n\n  // Reverse descending domains.\n  if (domain[j] < domain[0]) {\n    domain = domain.slice().reverse();\n    range = range.slice().reverse();\n  }\n\n  while (++i < j) {\n    d[i] = normalize(domain[i], domain[i + 1]);\n    r[i] = interpolate(range[i], range[i + 1]);\n  }\n\n  return function(x) {\n    var i = bisect(domain, x, 1, j) - 1;\n    return r[i](d[i](x));\n  };\n}\n\nexport function copy(source, target) {\n  return target\n      .domain(source.domain())\n      .range(source.range())\n      .interpolate(source.interpolate())\n      .clamp(source.clamp())\n      .unknown(source.unknown());\n}\n\nexport function transformer() {\n  var domain = unit,\n      range = unit,\n      interpolate = interpolateValue,\n      transform,\n      untransform,\n      unknown,\n      clamp = identity,\n      piecewise,\n      output,\n      input;\n\n  function rescale() {\n    var n = Math.min(domain.length, range.length);\n    if (clamp !== identity) clamp = clamper(domain[0], domain[n - 1]);\n    piecewise = n > 2 ? polymap : bimap;\n    output = input = null;\n    return scale;\n  }\n\n  function scale(x) {\n    return isNaN(x = +x) ? unknown : (output || (output = piecewise(domain.map(transform), range, interpolate)))(transform(clamp(x)));\n  }\n\n  scale.invert = function(y) {\n    return clamp(untransform((input || (input = piecewise(range, domain.map(transform), interpolateNumber)))(y)));\n  };\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain = Array.from(_, number), rescale()) : domain.slice();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = Array.from(_), rescale()) : range.slice();\n  };\n\n  scale.rangeRound = function(_) {\n    return range = Array.from(_), interpolate = interpolateRound, rescale();\n  };\n\n  scale.clamp = function(_) {\n    return arguments.length ? (clamp = _ ? true : identity, rescale()) : clamp !== identity;\n  };\n\n  scale.interpolate = function(_) {\n    return arguments.length ? (interpolate = _, rescale()) : interpolate;\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  return function(t, u) {\n    transform = t, untransform = u;\n    return rescale();\n  };\n}\n\nexport default function continuous() {\n  return transformer()(identity, identity);\n}\n","export default function constants(x) {\n  return function() {\n    return x;\n  };\n}\n","import {tickStep} from \"d3-array\";\nimport {format, formatPrefix, formatSpecifier, precisionFixed, precisionPrefix, precisionRound} from \"d3-format\";\n\nexport default function tickFormat(start, stop, count, specifier) {\n  var step = tickStep(start, stop, count),\n      precision;\n  specifier = formatSpecifier(specifier == null ? \",f\" : specifier);\n  switch (specifier.type) {\n    case \"s\": {\n      var value = Math.max(Math.abs(start), Math.abs(stop));\n      if (specifier.precision == null && !isNaN(precision = precisionPrefix(step, value))) specifier.precision = precision;\n      return formatPrefix(specifier, value);\n    }\n    case \"\":\n    case \"e\":\n    case \"g\":\n    case \"p\":\n    case \"r\": {\n      if (specifier.precision == null && !isNaN(precision = precisionRound(step, Math.max(Math.abs(start), Math.abs(stop))))) specifier.precision = precision - (specifier.type === \"e\");\n      break;\n    }\n    case \"f\":\n    case \"%\": {\n      if (specifier.precision == null && !isNaN(precision = precisionFixed(step))) specifier.precision = precision - (specifier.type === \"%\") * 2;\n      break;\n    }\n  }\n  return format(specifier);\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step, value) {\n  return Math.max(0, Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3 - exponent(Math.abs(step)));\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step, max) {\n  step = Math.abs(step), max = Math.abs(max) - step;\n  return Math.max(0, exponent(max) - exponent(step)) + 1;\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step) {\n  return Math.max(0, -exponent(Math.abs(step)));\n}\n","import {ticks, tickIncrement} from \"d3-array\";\nimport continuous, {copy} from \"./continuous.js\";\nimport {initRange} from \"./init.js\";\nimport tickFormat from \"./tickFormat.js\";\n\nexport function linearish(scale) {\n  var domain = scale.domain;\n\n  scale.ticks = function(count) {\n    var d = domain();\n    return ticks(d[0], d[d.length - 1], count == null ? 10 : count);\n  };\n\n  scale.tickFormat = function(count, specifier) {\n    var d = domain();\n    return tickFormat(d[0], d[d.length - 1], count == null ? 10 : count, specifier);\n  };\n\n  scale.nice = function(count) {\n    if (count == null) count = 10;\n\n    var d = domain();\n    var i0 = 0;\n    var i1 = d.length - 1;\n    var start = d[i0];\n    var stop = d[i1];\n    var prestep;\n    var step;\n    var maxIter = 10;\n\n    if (stop < start) {\n      step = start, start = stop, stop = step;\n      step = i0, i0 = i1, i1 = step;\n    }\n    \n    while (maxIter-- > 0) {\n      step = tickIncrement(start, stop, count);\n      if (step === prestep) {\n        d[i0] = start\n        d[i1] = stop\n        return domain(d);\n      } else if (step > 0) {\n        start = Math.floor(start / step) * step;\n        stop = Math.ceil(stop / step) * step;\n      } else if (step < 0) {\n        start = Math.ceil(start * step) / step;\n        stop = Math.floor(stop * step) / step;\n      } else {\n        break;\n      }\n      prestep = step;\n    }\n\n    return scale;\n  };\n\n  return scale;\n}\n\nexport default function linear() {\n  var scale = continuous();\n\n  scale.copy = function() {\n    return copy(scale, linear());\n  };\n\n  initRange.apply(scale, arguments);\n\n  return linearish(scale);\n}\n","export default function(x) {\n  return function constant() {\n    return x;\n  };\n}\n","export var abs = Math.abs;\nexport var atan2 = Math.atan2;\nexport var cos = Math.cos;\nexport var max = Math.max;\nexport var min = Math.min;\nexport var sin = Math.sin;\nexport var sqrt = Math.sqrt;\n\nexport var epsilon = 1e-12;\nexport var pi = Math.PI;\nexport var halfPi = pi / 2;\nexport var tau = 2 * pi;\n\nexport function acos(x) {\n  return x > 1 ? 0 : x < -1 ? pi : Math.acos(x);\n}\n\nexport function asin(x) {\n  return x >= 1 ? halfPi : x <= -1 ? -halfPi : Math.asin(x);\n}\n","import {path} from \"d3-path\";\nimport constant from \"./constant.js\";\nimport {abs, acos, asin, atan2, cos, epsilon, halfPi, max, min, pi, sin, sqrt, tau} from \"./math.js\";\n\nfunction arcInnerRadius(d) {\n  return d.innerRadius;\n}\n\nfunction arcOuterRadius(d) {\n  return d.outerRadius;\n}\n\nfunction arcStartAngle(d) {\n  return d.startAngle;\n}\n\nfunction arcEndAngle(d) {\n  return d.endAngle;\n}\n\nfunction arcPadAngle(d) {\n  return d && d.padAngle; // Note: optional!\n}\n\nfunction intersect(x0, y0, x1, y1, x2, y2, x3, y3) {\n  var x10 = x1 - x0, y10 = y1 - y0,\n      x32 = x3 - x2, y32 = y3 - y2,\n      t = y32 * x10 - x32 * y10;\n  if (t * t < epsilon) return;\n  t = (x32 * (y0 - y2) - y32 * (x0 - x2)) / t;\n  return [x0 + t * x10, y0 + t * y10];\n}\n\n// Compute perpendicular offset line of length rc.\n// http://mathworld.wolfram.com/Circle-LineIntersection.html\nfunction cornerTangents(x0, y0, x1, y1, r1, rc, cw) {\n  var x01 = x0 - x1,\n      y01 = y0 - y1,\n      lo = (cw ? rc : -rc) / sqrt(x01 * x01 + y01 * y01),\n      ox = lo * y01,\n      oy = -lo * x01,\n      x11 = x0 + ox,\n      y11 = y0 + oy,\n      x10 = x1 + ox,\n      y10 = y1 + oy,\n      x00 = (x11 + x10) / 2,\n      y00 = (y11 + y10) / 2,\n      dx = x10 - x11,\n      dy = y10 - y11,\n      d2 = dx * dx + dy * dy,\n      r = r1 - rc,\n      D = x11 * y10 - x10 * y11,\n      d = (dy < 0 ? -1 : 1) * sqrt(max(0, r * r * d2 - D * D)),\n      cx0 = (D * dy - dx * d) / d2,\n      cy0 = (-D * dx - dy * d) / d2,\n      cx1 = (D * dy + dx * d) / d2,\n      cy1 = (-D * dx + dy * d) / d2,\n      dx0 = cx0 - x00,\n      dy0 = cy0 - y00,\n      dx1 = cx1 - x00,\n      dy1 = cy1 - y00;\n\n  // Pick the closer of the two intersection points.\n  // TODO Is there a faster way to determine which intersection to use?\n  if (dx0 * dx0 + dy0 * dy0 > dx1 * dx1 + dy1 * dy1) cx0 = cx1, cy0 = cy1;\n\n  return {\n    cx: cx0,\n    cy: cy0,\n    x01: -ox,\n    y01: -oy,\n    x11: cx0 * (r1 / r - 1),\n    y11: cy0 * (r1 / r - 1)\n  };\n}\n\nexport default function() {\n  var innerRadius = arcInnerRadius,\n      outerRadius = arcOuterRadius,\n      cornerRadius = constant(0),\n      padRadius = null,\n      startAngle = arcStartAngle,\n      endAngle = arcEndAngle,\n      padAngle = arcPadAngle,\n      context = null;\n\n  function arc() {\n    var buffer,\n        r,\n        r0 = +innerRadius.apply(this, arguments),\n        r1 = +outerRadius.apply(this, arguments),\n        a0 = startAngle.apply(this, arguments) - halfPi,\n        a1 = endAngle.apply(this, arguments) - halfPi,\n        da = abs(a1 - a0),\n        cw = a1 > a0;\n\n    if (!context) context = buffer = path();\n\n    // Ensure that the outer radius is always larger than the inner radius.\n    if (r1 < r0) r = r1, r1 = r0, r0 = r;\n\n    // Is it a point?\n    if (!(r1 > epsilon)) context.moveTo(0, 0);\n\n    // Or is it a circle or annulus?\n    else if (da > tau - epsilon) {\n      context.moveTo(r1 * cos(a0), r1 * sin(a0));\n      context.arc(0, 0, r1, a0, a1, !cw);\n      if (r0 > epsilon) {\n        context.moveTo(r0 * cos(a1), r0 * sin(a1));\n        context.arc(0, 0, r0, a1, a0, cw);\n      }\n    }\n\n    // Or is it a circular or annular sector?\n    else {\n      var a01 = a0,\n          a11 = a1,\n          a00 = a0,\n          a10 = a1,\n          da0 = da,\n          da1 = da,\n          ap = padAngle.apply(this, arguments) / 2,\n          rp = (ap > epsilon) && (padRadius ? +padRadius.apply(this, arguments) : sqrt(r0 * r0 + r1 * r1)),\n          rc = min(abs(r1 - r0) / 2, +cornerRadius.apply(this, arguments)),\n          rc0 = rc,\n          rc1 = rc,\n          t0,\n          t1;\n\n      // Apply padding? Note that since r1 ≥ r0, da1 ≥ da0.\n      if (rp > epsilon) {\n        var p0 = asin(rp / r0 * sin(ap)),\n            p1 = asin(rp / r1 * sin(ap));\n        if ((da0 -= p0 * 2) > epsilon) p0 *= (cw ? 1 : -1), a00 += p0, a10 -= p0;\n        else da0 = 0, a00 = a10 = (a0 + a1) / 2;\n        if ((da1 -= p1 * 2) > epsilon) p1 *= (cw ? 1 : -1), a01 += p1, a11 -= p1;\n        else da1 = 0, a01 = a11 = (a0 + a1) / 2;\n      }\n\n      var x01 = r1 * cos(a01),\n          y01 = r1 * sin(a01),\n          x10 = r0 * cos(a10),\n          y10 = r0 * sin(a10);\n\n      // Apply rounded corners?\n      if (rc > epsilon) {\n        var x11 = r1 * cos(a11),\n            y11 = r1 * sin(a11),\n            x00 = r0 * cos(a00),\n            y00 = r0 * sin(a00),\n            oc;\n\n        // Restrict the corner radius according to the sector angle.\n        if (da < pi && (oc = intersect(x01, y01, x00, y00, x11, y11, x10, y10))) {\n          var ax = x01 - oc[0],\n              ay = y01 - oc[1],\n              bx = x11 - oc[0],\n              by = y11 - oc[1],\n              kc = 1 / sin(acos((ax * bx + ay * by) / (sqrt(ax * ax + ay * ay) * sqrt(bx * bx + by * by))) / 2),\n              lc = sqrt(oc[0] * oc[0] + oc[1] * oc[1]);\n          rc0 = min(rc, (r0 - lc) / (kc - 1));\n          rc1 = min(rc, (r1 - lc) / (kc + 1));\n        }\n      }\n\n      // Is the sector collapsed to a line?\n      if (!(da1 > epsilon)) context.moveTo(x01, y01);\n\n      // Does the sector’s outer ring have rounded corners?\n      else if (rc1 > epsilon) {\n        t0 = cornerTangents(x00, y00, x01, y01, r1, rc1, cw);\n        t1 = cornerTangents(x11, y11, x10, y10, r1, rc1, cw);\n\n        context.moveTo(t0.cx + t0.x01, t0.cy + t0.y01);\n\n        // Have the corners merged?\n        if (rc1 < rc) context.arc(t0.cx, t0.cy, rc1, atan2(t0.y01, t0.x01), atan2(t1.y01, t1.x01), !cw);\n\n        // Otherwise, draw the two corners and the ring.\n        else {\n          context.arc(t0.cx, t0.cy, rc1, atan2(t0.y01, t0.x01), atan2(t0.y11, t0.x11), !cw);\n          context.arc(0, 0, r1, atan2(t0.cy + t0.y11, t0.cx + t0.x11), atan2(t1.cy + t1.y11, t1.cx + t1.x11), !cw);\n          context.arc(t1.cx, t1.cy, rc1, atan2(t1.y11, t1.x11), atan2(t1.y01, t1.x01), !cw);\n        }\n      }\n\n      // Or is the outer ring just a circular arc?\n      else context.moveTo(x01, y01), context.arc(0, 0, r1, a01, a11, !cw);\n\n      // Is there no inner ring, and it’s a circular sector?\n      // Or perhaps it’s an annular sector collapsed due to padding?\n      if (!(r0 > epsilon) || !(da0 > epsilon)) context.lineTo(x10, y10);\n\n      // Does the sector’s inner ring (or point) have rounded corners?\n      else if (rc0 > epsilon) {\n        t0 = cornerTangents(x10, y10, x11, y11, r0, -rc0, cw);\n        t1 = cornerTangents(x01, y01, x00, y00, r0, -rc0, cw);\n\n        context.lineTo(t0.cx + t0.x01, t0.cy + t0.y01);\n\n        // Have the corners merged?\n        if (rc0 < rc) context.arc(t0.cx, t0.cy, rc0, atan2(t0.y01, t0.x01), atan2(t1.y01, t1.x01), !cw);\n\n        // Otherwise, draw the two corners and the ring.\n        else {\n          context.arc(t0.cx, t0.cy, rc0, atan2(t0.y01, t0.x01), atan2(t0.y11, t0.x11), !cw);\n          context.arc(0, 0, r0, atan2(t0.cy + t0.y11, t0.cx + t0.x11), atan2(t1.cy + t1.y11, t1.cx + t1.x11), cw);\n          context.arc(t1.cx, t1.cy, rc0, atan2(t1.y11, t1.x11), atan2(t1.y01, t1.x01), !cw);\n        }\n      }\n\n      // Or is the inner ring just a circular arc?\n      else context.arc(0, 0, r0, a10, a00, cw);\n    }\n\n    context.closePath();\n\n    if (buffer) return context = null, buffer + \"\" || null;\n  }\n\n  arc.centroid = function() {\n    var r = (+innerRadius.apply(this, arguments) + +outerRadius.apply(this, arguments)) / 2,\n        a = (+startAngle.apply(this, arguments) + +endAngle.apply(this, arguments)) / 2 - pi / 2;\n    return [cos(a) * r, sin(a) * r];\n  };\n\n  arc.innerRadius = function(_) {\n    return arguments.length ? (innerRadius = typeof _ === \"function\" ? _ : constant(+_), arc) : innerRadius;\n  };\n\n  arc.outerRadius = function(_) {\n    return arguments.length ? (outerRadius = typeof _ === \"function\" ? _ : constant(+_), arc) : outerRadius;\n  };\n\n  arc.cornerRadius = function(_) {\n    return arguments.length ? (cornerRadius = typeof _ === \"function\" ? _ : constant(+_), arc) : cornerRadius;\n  };\n\n  arc.padRadius = function(_) {\n    return arguments.length ? (padRadius = _ == null ? null : typeof _ === \"function\" ? _ : constant(+_), arc) : padRadius;\n  };\n\n  arc.startAngle = function(_) {\n    return arguments.length ? (startAngle = typeof _ === \"function\" ? _ : constant(+_), arc) : startAngle;\n  };\n\n  arc.endAngle = function(_) {\n    return arguments.length ? (endAngle = typeof _ === \"function\" ? _ : constant(+_), arc) : endAngle;\n  };\n\n  arc.padAngle = function(_) {\n    return arguments.length ? (padAngle = typeof _ === \"function\" ? _ : constant(+_), arc) : padAngle;\n  };\n\n  arc.context = function(_) {\n    return arguments.length ? ((context = _ == null ? null : _), arc) : context;\n  };\n\n  return arc;\n}\n","export var slice = Array.prototype.slice;\n\nexport default function(x) {\n  return typeof x === \"object\" && \"length\" in x\n    ? x // Array, TypedArray, NodeList, array-like\n    : Array.from(x); // Map, Set, iterable, string, or anything else\n}\n","export function x(p) {\n  return p[0];\n}\n\nexport function y(p) {\n  return p[1];\n}\n","import {path} from \"d3-path\";\nimport {slice} from \"../array.js\";\nimport constant from \"../constant.js\";\nimport {x as pointX, y as pointY} from \"../point.js\";\nimport pointRadial from \"../pointRadial.js\";\n\nfunction linkSource(d) {\n  return d.source;\n}\n\nfunction linkTarget(d) {\n  return d.target;\n}\n\nfunction link(curve) {\n  var source = linkSource,\n      target = linkTarget,\n      x = pointX,\n      y = pointY,\n      context = null;\n\n  function link() {\n    var buffer, argv = slice.call(arguments), s = source.apply(this, argv), t = target.apply(this, argv);\n    if (!context) context = buffer = path();\n    curve(context, +x.apply(this, (argv[0] = s, argv)), +y.apply(this, argv), +x.apply(this, (argv[0] = t, argv)), +y.apply(this, argv));\n    if (buffer) return context = null, buffer + \"\" || null;\n  }\n\n  link.source = function(_) {\n    return arguments.length ? (source = _, link) : source;\n  };\n\n  link.target = function(_) {\n    return arguments.length ? (target = _, link) : target;\n  };\n\n  link.x = function(_) {\n    return arguments.length ? (x = typeof _ === \"function\" ? _ : constant(+_), link) : x;\n  };\n\n  link.y = function(_) {\n    return arguments.length ? (y = typeof _ === \"function\" ? _ : constant(+_), link) : y;\n  };\n\n  link.context = function(_) {\n    return arguments.length ? ((context = _ == null ? null : _), link) : context;\n  };\n\n  return link;\n}\n\nfunction curveHorizontal(context, x0, y0, x1, y1) {\n  context.moveTo(x0, y0);\n  context.bezierCurveTo(x0 = (x0 + x1) / 2, y0, x0, y1, x1, y1);\n}\n\nfunction curveVertical(context, x0, y0, x1, y1) {\n  context.moveTo(x0, y0);\n  context.bezierCurveTo(x0, y0 = (y0 + y1) / 2, x1, y0, x1, y1);\n}\n\nfunction curveRadial(context, x0, y0, x1, y1) {\n  var p0 = pointRadial(x0, y0),\n      p1 = pointRadial(x0, y0 = (y0 + y1) / 2),\n      p2 = pointRadial(x1, y0),\n      p3 = pointRadial(x1, y1);\n  context.moveTo(p0[0], p0[1]);\n  context.bezierCurveTo(p1[0], p1[1], p2[0], p2[1], p3[0], p3[1]);\n}\n\nexport function linkHorizontal() {\n  return link(curveHorizontal);\n}\n\nexport function linkVertical() {\n  return link(curveVertical);\n}\n\nexport function linkRadial() {\n  var l = link(curveRadial);\n  l.angle = l.x, delete l.x;\n  l.radius = l.y, delete l.y;\n  return l;\n}\n","export default x => () => x;\n","export default function ZoomEvent(type, {\n  sourceEvent,\n  target,\n  transform,\n  dispatch\n}) {\n  Object.defineProperties(this, {\n    type: {value: type, enumerable: true, configurable: true},\n    sourceEvent: {value: sourceEvent, enumerable: true, configurable: true},\n    target: {value: target, enumerable: true, configurable: true},\n    transform: {value: transform, enumerable: true, configurable: true},\n    _: {value: dispatch}\n  });\n}\n","export function Transform(k, x, y) {\n  this.k = k;\n  this.x = x;\n  this.y = y;\n}\n\nTransform.prototype = {\n  constructor: Transform,\n  scale: function(k) {\n    return k === 1 ? this : new Transform(this.k * k, this.x, this.y);\n  },\n  translate: function(x, y) {\n    return x === 0 & y === 0 ? this : new Transform(this.k, this.x + this.k * x, this.y + this.k * y);\n  },\n  apply: function(point) {\n    return [point[0] * this.k + this.x, point[1] * this.k + this.y];\n  },\n  applyX: function(x) {\n    return x * this.k + this.x;\n  },\n  applyY: function(y) {\n    return y * this.k + this.y;\n  },\n  invert: function(location) {\n    return [(location[0] - this.x) / this.k, (location[1] - this.y) / this.k];\n  },\n  invertX: function(x) {\n    return (x - this.x) / this.k;\n  },\n  invertY: function(y) {\n    return (y - this.y) / this.k;\n  },\n  rescaleX: function(x) {\n    return x.copy().domain(x.range().map(this.invertX, this).map(x.invert, x));\n  },\n  rescaleY: function(y) {\n    return y.copy().domain(y.range().map(this.invertY, this).map(y.invert, y));\n  },\n  toString: function() {\n    return \"translate(\" + this.x + \",\" + this.y + \") scale(\" + this.k + \")\";\n  }\n};\n\nexport var identity = new Transform(1, 0, 0);\n\ntransform.prototype = Transform.prototype;\n\nexport default function transform(node) {\n  while (!node.__zoom) if (!(node = node.parentNode)) return identity;\n  return node.__zoom;\n}\n","export function nopropagation(event) {\n  event.stopImmediatePropagation();\n}\n\nexport default function(event) {\n  event.preventDefault();\n  event.stopImmediatePropagation();\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {dragDisable, dragEnable} from \"d3-drag\";\nimport {interpolateZoom} from \"d3-interpolate\";\nimport {select, pointer} from \"d3-selection\";\nimport {interrupt} from \"d3-transition\";\nimport constant from \"./constant.js\";\nimport ZoomEvent from \"./event.js\";\nimport {Transform, identity} from \"./transform.js\";\nimport noevent, {nopropagation} from \"./noevent.js\";\n\n// Ignore right-click, since that should open the context menu.\n// except for pinch-to-zoom, which is sent as a wheel+ctrlKey event\nfunction defaultFilter(event) {\n  return (!event.ctrlKey || event.type === 'wheel') && !event.button;\n}\n\nfunction defaultExtent() {\n  var e = this;\n  if (e instanceof SVGElement) {\n    e = e.ownerSVGElement || e;\n    if (e.hasAttribute(\"viewBox\")) {\n      e = e.viewBox.baseVal;\n      return [[e.x, e.y], [e.x + e.width, e.y + e.height]];\n    }\n    return [[0, 0], [e.width.baseVal.value, e.height.baseVal.value]];\n  }\n  return [[0, 0], [e.clientWidth, e.clientHeight]];\n}\n\nfunction defaultTransform() {\n  return this.__zoom || identity;\n}\n\nfunction defaultWheelDelta(event) {\n  return -event.deltaY * (event.deltaMode === 1 ? 0.05 : event.deltaMode ? 1 : 0.002) * (event.ctrlKey ? 10 : 1);\n}\n\nfunction defaultTouchable() {\n  return navigator.maxTouchPoints || (\"ontouchstart\" in this);\n}\n\nfunction defaultConstrain(transform, extent, translateExtent) {\n  var dx0 = transform.invertX(extent[0][0]) - translateExtent[0][0],\n      dx1 = transform.invertX(extent[1][0]) - translateExtent[1][0],\n      dy0 = transform.invertY(extent[0][1]) - translateExtent[0][1],\n      dy1 = transform.invertY(extent[1][1]) - translateExtent[1][1];\n  return transform.translate(\n    dx1 > dx0 ? (dx0 + dx1) / 2 : Math.min(0, dx0) || Math.max(0, dx1),\n    dy1 > dy0 ? (dy0 + dy1) / 2 : Math.min(0, dy0) || Math.max(0, dy1)\n  );\n}\n\nexport default function() {\n  var filter = defaultFilter,\n      extent = defaultExtent,\n      constrain = defaultConstrain,\n      wheelDelta = defaultWheelDelta,\n      touchable = defaultTouchable,\n      scaleExtent = [0, Infinity],\n      translateExtent = [[-Infinity, -Infinity], [Infinity, Infinity]],\n      duration = 250,\n      interpolate = interpolateZoom,\n      listeners = dispatch(\"start\", \"zoom\", \"end\"),\n      touchstarting,\n      touchfirst,\n      touchending,\n      touchDelay = 500,\n      wheelDelay = 150,\n      clickDistance2 = 0,\n      tapDistance = 10;\n\n  function zoom(selection) {\n    selection\n        .property(\"__zoom\", defaultTransform)\n        .on(\"wheel.zoom\", wheeled)\n        .on(\"mousedown.zoom\", mousedowned)\n        .on(\"dblclick.zoom\", dblclicked)\n      .filter(touchable)\n        .on(\"touchstart.zoom\", touchstarted)\n        .on(\"touchmove.zoom\", touchmoved)\n        .on(\"touchend.zoom touchcancel.zoom\", touchended)\n        .style(\"-webkit-tap-highlight-color\", \"rgba(0,0,0,0)\");\n  }\n\n  zoom.transform = function(collection, transform, point, event) {\n    var selection = collection.selection ? collection.selection() : collection;\n    selection.property(\"__zoom\", defaultTransform);\n    if (collection !== selection) {\n      schedule(collection, transform, point, event);\n    } else {\n      selection.interrupt().each(function() {\n        gesture(this, arguments)\n          .event(event)\n          .start()\n          .zoom(null, typeof transform === \"function\" ? transform.apply(this, arguments) : transform)\n          .end();\n      });\n    }\n  };\n\n  zoom.scaleBy = function(selection, k, p, event) {\n    zoom.scaleTo(selection, function() {\n      var k0 = this.__zoom.k,\n          k1 = typeof k === \"function\" ? k.apply(this, arguments) : k;\n      return k0 * k1;\n    }, p, event);\n  };\n\n  zoom.scaleTo = function(selection, k, p, event) {\n    zoom.transform(selection, function() {\n      var e = extent.apply(this, arguments),\n          t0 = this.__zoom,\n          p0 = p == null ? centroid(e) : typeof p === \"function\" ? p.apply(this, arguments) : p,\n          p1 = t0.invert(p0),\n          k1 = typeof k === \"function\" ? k.apply(this, arguments) : k;\n      return constrain(translate(scale(t0, k1), p0, p1), e, translateExtent);\n    }, p, event);\n  };\n\n  zoom.translateBy = function(selection, x, y, event) {\n    zoom.transform(selection, function() {\n      return constrain(this.__zoom.translate(\n        typeof x === \"function\" ? x.apply(this, arguments) : x,\n        typeof y === \"function\" ? y.apply(this, arguments) : y\n      ), extent.apply(this, arguments), translateExtent);\n    }, null, event);\n  };\n\n  zoom.translateTo = function(selection, x, y, p, event) {\n    zoom.transform(selection, function() {\n      var e = extent.apply(this, arguments),\n          t = this.__zoom,\n          p0 = p == null ? centroid(e) : typeof p === \"function\" ? p.apply(this, arguments) : p;\n      return constrain(identity.translate(p0[0], p0[1]).scale(t.k).translate(\n        typeof x === \"function\" ? -x.apply(this, arguments) : -x,\n        typeof y === \"function\" ? -y.apply(this, arguments) : -y\n      ), e, translateExtent);\n    }, p, event);\n  };\n\n  function scale(transform, k) {\n    k = Math.max(scaleExtent[0], Math.min(scaleExtent[1], k));\n    return k === transform.k ? transform : new Transform(k, transform.x, transform.y);\n  }\n\n  function translate(transform, p0, p1) {\n    var x = p0[0] - p1[0] * transform.k, y = p0[1] - p1[1] * transform.k;\n    return x === transform.x && y === transform.y ? transform : new Transform(transform.k, x, y);\n  }\n\n  function centroid(extent) {\n    return [(+extent[0][0] + +extent[1][0]) / 2, (+extent[0][1] + +extent[1][1]) / 2];\n  }\n\n  function schedule(transition, transform, point, event) {\n    transition\n        .on(\"start.zoom\", function() { gesture(this, arguments).event(event).start(); })\n        .on(\"interrupt.zoom end.zoom\", function() { gesture(this, arguments).event(event).end(); })\n        .tween(\"zoom\", function() {\n          var that = this,\n              args = arguments,\n              g = gesture(that, args).event(event),\n              e = extent.apply(that, args),\n              p = point == null ? centroid(e) : typeof point === \"function\" ? point.apply(that, args) : point,\n              w = Math.max(e[1][0] - e[0][0], e[1][1] - e[0][1]),\n              a = that.__zoom,\n              b = typeof transform === \"function\" ? transform.apply(that, args) : transform,\n              i = interpolate(a.invert(p).concat(w / a.k), b.invert(p).concat(w / b.k));\n          return function(t) {\n            if (t === 1) t = b; // Avoid rounding error on end.\n            else { var l = i(t), k = w / l[2]; t = new Transform(k, p[0] - l[0] * k, p[1] - l[1] * k); }\n            g.zoom(null, t);\n          };\n        });\n  }\n\n  function gesture(that, args, clean) {\n    return (!clean && that.__zooming) || new Gesture(that, args);\n  }\n\n  function Gesture(that, args) {\n    this.that = that;\n    this.args = args;\n    this.active = 0;\n    this.sourceEvent = null;\n    this.extent = extent.apply(that, args);\n    this.taps = 0;\n  }\n\n  Gesture.prototype = {\n    event: function(event) {\n      if (event) this.sourceEvent = event;\n      return this;\n    },\n    start: function() {\n      if (++this.active === 1) {\n        this.that.__zooming = this;\n        this.emit(\"start\");\n      }\n      return this;\n    },\n    zoom: function(key, transform) {\n      if (this.mouse && key !== \"mouse\") this.mouse[1] = transform.invert(this.mouse[0]);\n      if (this.touch0 && key !== \"touch\") this.touch0[1] = transform.invert(this.touch0[0]);\n      if (this.touch1 && key !== \"touch\") this.touch1[1] = transform.invert(this.touch1[0]);\n      this.that.__zoom = transform;\n      this.emit(\"zoom\");\n      return this;\n    },\n    end: function() {\n      if (--this.active === 0) {\n        delete this.that.__zooming;\n        this.emit(\"end\");\n      }\n      return this;\n    },\n    emit: function(type) {\n      var d = select(this.that).datum();\n      listeners.call(\n        type,\n        this.that,\n        new ZoomEvent(type, {\n          sourceEvent: this.sourceEvent,\n          target: zoom,\n          type,\n          transform: this.that.__zoom,\n          dispatch: listeners\n        }),\n        d\n      );\n    }\n  };\n\n  function wheeled(event, ...args) {\n    if (!filter.apply(this, arguments)) return;\n    var g = gesture(this, args).event(event),\n        t = this.__zoom,\n        k = Math.max(scaleExtent[0], Math.min(scaleExtent[1], t.k * Math.pow(2, wheelDelta.apply(this, arguments)))),\n        p = pointer(event);\n\n    // If the mouse is in the same location as before, reuse it.\n    // If there were recent wheel events, reset the wheel idle timeout.\n    if (g.wheel) {\n      if (g.mouse[0][0] !== p[0] || g.mouse[0][1] !== p[1]) {\n        g.mouse[1] = t.invert(g.mouse[0] = p);\n      }\n      clearTimeout(g.wheel);\n    }\n\n    // If this wheel event won’t trigger a transform change, ignore it.\n    else if (t.k === k) return;\n\n    // Otherwise, capture the mouse point and location at the start.\n    else {\n      g.mouse = [p, t.invert(p)];\n      interrupt(this);\n      g.start();\n    }\n\n    noevent(event);\n    g.wheel = setTimeout(wheelidled, wheelDelay);\n    g.zoom(\"mouse\", constrain(translate(scale(t, k), g.mouse[0], g.mouse[1]), g.extent, translateExtent));\n\n    function wheelidled() {\n      g.wheel = null;\n      g.end();\n    }\n  }\n\n  function mousedowned(event, ...args) {\n    if (touchending || !filter.apply(this, arguments)) return;\n    var g = gesture(this, args, true).event(event),\n        v = select(event.view).on(\"mousemove.zoom\", mousemoved, true).on(\"mouseup.zoom\", mouseupped, true),\n        p = pointer(event, currentTarget),\n        currentTarget = event.currentTarget,\n        x0 = event.clientX,\n        y0 = event.clientY;\n\n    dragDisable(event.view);\n    nopropagation(event);\n    g.mouse = [p, this.__zoom.invert(p)];\n    interrupt(this);\n    g.start();\n\n    function mousemoved(event) {\n      noevent(event);\n      if (!g.moved) {\n        var dx = event.clientX - x0, dy = event.clientY - y0;\n        g.moved = dx * dx + dy * dy > clickDistance2;\n      }\n      g.event(event)\n       .zoom(\"mouse\", constrain(translate(g.that.__zoom, g.mouse[0] = pointer(event, currentTarget), g.mouse[1]), g.extent, translateExtent));\n    }\n\n    function mouseupped(event) {\n      v.on(\"mousemove.zoom mouseup.zoom\", null);\n      dragEnable(event.view, g.moved);\n      noevent(event);\n      g.event(event).end();\n    }\n  }\n\n  function dblclicked(event, ...args) {\n    if (!filter.apply(this, arguments)) return;\n    var t0 = this.__zoom,\n        p0 = pointer(event.changedTouches ? event.changedTouches[0] : event, this),\n        p1 = t0.invert(p0),\n        k1 = t0.k * (event.shiftKey ? 0.5 : 2),\n        t1 = constrain(translate(scale(t0, k1), p0, p1), extent.apply(this, args), translateExtent);\n\n    noevent(event);\n    if (duration > 0) select(this).transition().duration(duration).call(schedule, t1, p0, event);\n    else select(this).call(zoom.transform, t1, p0, event);\n  }\n\n  function touchstarted(event, ...args) {\n    if (!filter.apply(this, arguments)) return;\n    var touches = event.touches,\n        n = touches.length,\n        g = gesture(this, args, event.changedTouches.length === n).event(event),\n        started, i, t, p;\n\n    nopropagation(event);\n    for (i = 0; i < n; ++i) {\n      t = touches[i], p = pointer(t, this);\n      p = [p, this.__zoom.invert(p), t.identifier];\n      if (!g.touch0) g.touch0 = p, started = true, g.taps = 1 + !!touchstarting;\n      else if (!g.touch1 && g.touch0[2] !== p[2]) g.touch1 = p, g.taps = 0;\n    }\n\n    if (touchstarting) touchstarting = clearTimeout(touchstarting);\n\n    if (started) {\n      if (g.taps < 2) touchfirst = p[0], touchstarting = setTimeout(function() { touchstarting = null; }, touchDelay);\n      interrupt(this);\n      g.start();\n    }\n  }\n\n  function touchmoved(event, ...args) {\n    if (!this.__zooming) return;\n    var g = gesture(this, args).event(event),\n        touches = event.changedTouches,\n        n = touches.length, i, t, p, l;\n\n    noevent(event);\n    for (i = 0; i < n; ++i) {\n      t = touches[i], p = pointer(t, this);\n      if (g.touch0 && g.touch0[2] === t.identifier) g.touch0[0] = p;\n      else if (g.touch1 && g.touch1[2] === t.identifier) g.touch1[0] = p;\n    }\n    t = g.that.__zoom;\n    if (g.touch1) {\n      var p0 = g.touch0[0], l0 = g.touch0[1],\n          p1 = g.touch1[0], l1 = g.touch1[1],\n          dp = (dp = p1[0] - p0[0]) * dp + (dp = p1[1] - p0[1]) * dp,\n          dl = (dl = l1[0] - l0[0]) * dl + (dl = l1[1] - l0[1]) * dl;\n      t = scale(t, Math.sqrt(dp / dl));\n      p = [(p0[0] + p1[0]) / 2, (p0[1] + p1[1]) / 2];\n      l = [(l0[0] + l1[0]) / 2, (l0[1] + l1[1]) / 2];\n    }\n    else if (g.touch0) p = g.touch0[0], l = g.touch0[1];\n    else return;\n\n    g.zoom(\"touch\", constrain(translate(t, p, l), g.extent, translateExtent));\n  }\n\n  function touchended(event, ...args) {\n    if (!this.__zooming) return;\n    var g = gesture(this, args).event(event),\n        touches = event.changedTouches,\n        n = touches.length, i, t;\n\n    nopropagation(event);\n    if (touchending) clearTimeout(touchending);\n    touchending = setTimeout(function() { touchending = null; }, touchDelay);\n    for (i = 0; i < n; ++i) {\n      t = touches[i];\n      if (g.touch0 && g.touch0[2] === t.identifier) delete g.touch0;\n      else if (g.touch1 && g.touch1[2] === t.identifier) delete g.touch1;\n    }\n    if (g.touch1 && !g.touch0) g.touch0 = g.touch1, delete g.touch1;\n    if (g.touch0) g.touch0[1] = this.__zoom.invert(g.touch0[0]);\n    else {\n      g.end();\n      // If this was a dbltap, reroute to the (optional) dblclick.zoom handler.\n      if (g.taps === 2) {\n        t = pointer(t, this);\n        if (Math.hypot(touchfirst[0] - t[0], touchfirst[1] - t[1]) < tapDistance) {\n          var p = select(this).on(\"dblclick.zoom\");\n          if (p) p.apply(this, arguments);\n        }\n      }\n    }\n  }\n\n  zoom.wheelDelta = function(_) {\n    return arguments.length ? (wheelDelta = typeof _ === \"function\" ? _ : constant(+_), zoom) : wheelDelta;\n  };\n\n  zoom.filter = function(_) {\n    return arguments.length ? (filter = typeof _ === \"function\" ? _ : constant(!!_), zoom) : filter;\n  };\n\n  zoom.touchable = function(_) {\n    return arguments.length ? (touchable = typeof _ === \"function\" ? _ : constant(!!_), zoom) : touchable;\n  };\n\n  zoom.extent = function(_) {\n    return arguments.length ? (extent = typeof _ === \"function\" ? _ : constant([[+_[0][0], +_[0][1]], [+_[1][0], +_[1][1]]]), zoom) : extent;\n  };\n\n  zoom.scaleExtent = function(_) {\n    return arguments.length ? (scaleExtent[0] = +_[0], scaleExtent[1] = +_[1], zoom) : [scaleExtent[0], scaleExtent[1]];\n  };\n\n  zoom.translateExtent = function(_) {\n    return arguments.length ? (translateExtent[0][0] = +_[0][0], translateExtent[1][0] = +_[1][0], translateExtent[0][1] = +_[0][1], translateExtent[1][1] = +_[1][1], zoom) : [[translateExtent[0][0], translateExtent[0][1]], [translateExtent[1][0], translateExtent[1][1]]];\n  };\n\n  zoom.constrain = function(_) {\n    return arguments.length ? (constrain = _, zoom) : constrain;\n  };\n\n  zoom.duration = function(_) {\n    return arguments.length ? (duration = +_, zoom) : duration;\n  };\n\n  zoom.interpolate = function(_) {\n    return arguments.length ? (interpolate = _, zoom) : interpolate;\n  };\n\n  zoom.on = function() {\n    var value = listeners.on.apply(listeners, arguments);\n    return value === listeners ? zoom : value;\n  };\n\n  zoom.clickDistance = function(_) {\n    return arguments.length ? (clickDistance2 = (_ = +_) * _, zoom) : Math.sqrt(clickDistance2);\n  };\n\n  zoom.tapDistance = function(_) {\n    return arguments.length ? (tapDistance = +_, zoom) : tapDistance;\n  };\n\n  return zoom;\n}\n","<script>\n  import { graphViewConfigStore, hoverTokenStore, wordToSubwordMapStore,\n    instanceIDStore, mapHeadStore } from './store';\n  import * as d3 from 'd3';\n  import { onMount } from 'svelte';\n  \n  // Shared states\n  let graphViewCompConfig = undefined;\n  let instanceID = 1562;\n  let curLayer = 9;\n  let curHead = 8;\n  let mapHead = {layer: 9, head: 8};\n\n  let graphSVG = null;\n  let graphData = null;\n  let saliencyData = null;\n  let wordToSubwordMap = null;\n\n  let SVGWidth = undefined;\n  let SVGHeight = undefined;\n\n  let curHoverToken = null;\n  \n  // View configs\n  const SVGPadding = {top: 3, left: 3, right: 3, bottom: 3};\n\n  const minNodeRadius = 19;\n  const maxNodeRadius = 40;\n\n  // const minNodeRadius = 10;\n  // const maxNodeRadius = 20;\n  \n  const radialRadius = 225;\n  const radialCurveAlpha = 0.3;\n\n  const gridRowSize = 8;\n  const gridRowGap = 35;\n  const gridColumnGap = 35;\n\n  // Graph vis variables\n  let tokenSize = null;\n  let originalNodes = null;\n\n  let curLinkI = 1;\n  let weightThresholdMin = 0.02;\n  let weightThresholdMax = 0.1;\n  let weightThresholdSteps = 6;\n  let weightThresholdGap = (weightThresholdMax - weightThresholdMin) / (weightThresholdSteps - 1);\n  let weightThreshold = weightThresholdMin + weightThresholdGap * curLinkI;\n\n  let linkArrays = {};\n  let simulation = null;\n  let intermediateNodeMap = new Map();\n  let linkWidth = null;\n\n  let linkColor = 'hsl(0, 0%, 76%)';\n  let linkHoverColor = 'hsl(36, 100%, 55%)';\n  let nodeRadiusScale = null;\n  // linkHoverColor = 'hsl(174, 65%, 48%)';\n\n  // Control panel variables\n  let settingIconActive = false;\n\n  // Data\n  let mounted = false;\n  let attentionData = null;\n\n  const ease = d3.easeCubicInOut;\n  const animationTime = 300;\n\n  const layoutOptions = {\n    force: {\n      value: 'force',\n      name: 'Force Layout'\n    },\n    radial: {\n      value: 'radial',\n      name: 'Radial Layout'\n    },\n    grid: {\n      value: 'grid',\n      name: 'Grid Layout'\n    } \n  };\n\n  let config = {\n    borderConstraint: true,\n    showHiddenLink: false,\n    showHiddenNode: false,\n    autoAttention: true,\n    defaultLayout: layoutOptions.radial\n  };\n\n  let forceStrength = {\n    force: {\n      manyBody: -840,\n      attention: 0.5,\n      textOrder: 1.6,\n      collideRadius: 1\n    },\n    radial: {\n      textOrder: 0.5,\n      radial: 1\n    },\n    grid: {\n      collideRadius: 7\n    }\n  };\n\n  let currentLayout = config.defaultLayout;\n\n  const round = (num, decimal) => {\n    return Math.round((num + Number.EPSILON) * (10 ** decimal)) / (10 ** decimal);\n  };\n\n  const padZeroLeft = (num, digit) => {\n    return Array(Math.max(digit - String(num).length + 1, 0)).join(0) + num;\n  };\n\n  const drag = () => {\n  \n    const dragstarted = (event) => {\n      if (!event.active) simulation.alphaTarget(0.3).restart();\n      event.subject.fx = event.subject.x;\n      event.subject.fy = event.subject.y;\n\n      // Add a marker to indicate that the node is fixed\n      d3.select(event.sourceEvent.originalTarget.parentNode)\n        .append('rect')\n        .attr('class', 'fixed-marker')\n        .attr('x', -3)\n        .attr('y', 6)\n        .attr('width', 6)\n        .attr('height', 5)\n        .style('fill', 'white');\n    };\n    \n    const dragged = (event) => {\n      event.subject.fx = event.x;\n      event.subject.fy = event.y;\n    };\n    \n    const dragended = (event) => {\n      if (!event.active) simulation.alphaTarget(0);\n      // event.subject.fx = null;\n      // event.subject.fy = null;\n    };\n    \n    return d3.drag()\n      .on('start', dragstarted)\n      .on('drag', dragged)\n      .on('end', dragended);\n  };\n\n  const borderConstraint = (d, nodeRadiusScale) => {\n    let curRadius = minNodeRadius;\n    if (!d.hidden) {\n      curRadius = nodeRadiusScale(+d.saliency);\n    }\n\n    let width = SVGWidth - SVGPadding.left - SVGPadding.right;\n    let height = SVGHeight - SVGPadding.top - SVGPadding.bottom;\n\n    const left = Math.max(SVGPadding.left + curRadius, Math.min(width - curRadius, d.x));\n    const top = Math.max(SVGPadding.top + curRadius, Math.min(height - curRadius, d.y));\n\n    if (config.borderConstraint) {\n      return {top: top, left: left};\n    } else {\n      return {top: d.y, left: d.x};\n    }\n  };\n\n  const bindSlider = (name, min, max, defaultValue, nodeRadiusScale=null) => {\n    let slider = d3.select(`#${name}`)\n      .property('value', ((defaultValue - min) / (max - min)) * 1000);\n\n    slider.on('input', () => {\n      let sliderValue = +slider.property('value');\n      let value = (sliderValue / 1000) * (max - min) + min;\n      let step = sliderValue / 200;\n      forceStrength.force[name] = value;\n\n      switch (name) {\n      case 'attention':\n        simulation.force('attentionLink').strength(value);\n        // Disable the auto attention\n        d3.select('#checkbox-auto-attention')\n          .property('checked', false);\n        config.autoAttention = false;\n        break;\n      case 'textOrder':\n        simulation.force('textLink').strength(d => d.target.index === 0 ? 0 : value);\n        break;\n      case 'manyBody':\n        simulation.force('charge').strength(value);\n        break;\n      case 'collideRadius':\n        simulation.force('collide').radius(d => nodeRadiusScale(d.saliency) + value);\n        break;\n      case 'threshold':\n        weightThreshold = weightThresholdMin + step * weightThresholdGap;\n        weightThresholdUpdated(step, nodeRadiusScale);\n        break;\n      }\n\n      simulation.restart();\n    });\n\n    slider.on('mousedown', (event) => {\n      if (!event.active) simulation.alphaTarget(0.2).restart();\n    });\n\n    slider.on('mouseup', (event) => {\n      if (!event.active) simulation.alphaTarget(0);\n    });\n  };\n\n  const resetSimulation = () => {\n    simulation.force('collide', null);\n    simulation.force('attentionLink', null);\n    simulation.force('charge', null);\n    simulation.force('center', null);\n    simulation.force('textLink', null);\n    simulation.force('hiddenTextLink', null);\n    simulation.force('posX', null);\n    simulation.force('posY', null);\n    simulation.force('grid', null);\n  };\n\n  const bindSelect = (nodeRadiusScale) => {\n\n    currentLayout = config.defaultLayout;\n    let selectOption = d3.select('#select-layout')\n      .property('value', config.defaultLayout.value);\n\n    selectOption.on('change', () => {\n      let newLayoutValue = selectOption.property('value');\n\n      // Need to switch layout\n      if (newLayoutValue !== currentLayout.value) {\n        resetSimulation();\n        \n        switch(newLayoutValue) {\n        case 'force':\n          currentLayout = layoutOptions.force;\n          initForceSim(nodeRadiusScale);\n          simulation.alpha(1).restart();\n          break;\n\n        case 'radial':\n          currentLayout = layoutOptions.radial;\n          initRadialSim();\n          simulation.alpha(1).restart();\n          break;\n\n        case 'grid':\n          currentLayout = layoutOptions.grid;\n          initGridSim();\n          simulation.alpha(1).restart();\n          break;\n        }\n\n        updateNodeRadius(nodeRadiusScale);\n      }\n      simulation.alpha(1).restart();\n    });\n  };\n\n  const bindLayerHeadSelect = () => {\n\n    let layerSelectOption = d3.select('#select-layer')\n      .property('value', curLayer);\n\n    let headSelectOption = d3.select('#select-head')\n      .property('value', curHead);\n\n    layerSelectOption.on('change', () => {\n      let newLayerValue = layerSelectOption.property('value');\n\n      // Need to switch layout\n      if (newLayerValue !== curLayer) {\n        // console.log(newLayerValue);\n        curLayer = newLayerValue;\n        updateLayerHead();\n\n        mapHead.layer = +curLayer;\n        mapHead.head = +curHead;\n        mapHeadStore.set(mapHead);\n      }\n    });\n\n    headSelectOption.on('change', () => {\n      let newHeadValue = headSelectOption.property('value');\n\n      // Need to switch layout\n      if (newHeadValue !== curHead) {\n        // console.log(newHeadValue);\n        curHead = newHeadValue;\n        updateLayerHead();\n\n        mapHead.layer = +curLayer;\n        mapHead.head = +curHead;\n        mapHeadStore.set(mapHead);\n      }\n    });\n  };\n\n  mapHeadStore.subscribe(value => {\n    mapHead = value;\n\n    if (mapHead.layer !== curLayer || mapHead.head !== curHead) {\n      // console.log('change');\n      d3.select('#select-layer')\n        .property('value', mapHead.layer);\n\n      d3.select('#select-head')\n        .property('value', mapHead.head);\n\n      curLayer = mapHead.layer;\n      curHead = mapHead.head;\n\n      updateLayerHead();\n    }\n\n  });\n  \n\n  const updateNodeRadius = (nodeRadiusScale) => {\n    d3.select(graphSVG)\n      .select('g.node-group')\n      .selectAll('circle')\n      .transition('node-radius')\n      .duration(animationTime)\n      .ease(ease)\n      .attr('r', d => currentLayout.value === 'force' ?\n        nodeRadiusScale(+d.saliency) : minNodeRadius);\n  };\n\n  const initForceSim = (nodeRadiusScale) => {\n    // Force 1 (ManyBody force)\n    simulation.force('charge', d3.forceManyBody()\n      .strength(forceStrength.force.manyBody)\n    );\n\n    // Force 2 (Center force)\n    simulation.force('center', d3.forceCenter(SVGWidth / 2, SVGHeight / 2));\n\n    // Force 3 (Link force)\n    simulation.force('attentionLink', d3.forceLink(linkArrays[curLinkI].links)\n      .id(d => d.id)\n    );\n    \n    // Force 4 (Text order link force)\n    simulation.force('textLink', d3.forceLink(linkArrays[curLinkI].hiddenLinks)\n      .id(d => d.id)\n      .strength(d => d.target.index === 0 ? 0 : forceStrength.force.textOrder)\n    );\n    \n    // Force 5 (Collide force)\n    simulation.force('collide', d3.forceCollide()\n      .radius(d => nodeRadiusScale(d.saliency) + forceStrength.force.collideRadius)\n    );\n  };\n\n  const initRadialSim = () => {\n    // Force 1 (Tex order link force)\n    simulation.force('textLink', d3.forceLink(linkArrays[curLinkI].hiddenLinks)\n      .id(d => d.id)\n      .strength(forceStrength.radial.textOrder)\n    );\n\n    // Force 2 (Custom radial force)\n    simulation.force('posY', d3.forceY()\n      .y((d, i) => {\n        let curLen = originalNodes.filter(d => !d.hidden).length;\n        let curAngle = -Math.PI / 2 + i * (Math.PI * 2 / curLen);\n        return SVGHeight / 2 + Math.sin(curAngle) * radialRadius;\n      })\n      .strength(forceStrength.radial.radial)\n    );\n\n    simulation.force('posX', d3.forceX()\n      .x((d, i) => {\n        let curLen = originalNodes.filter(d => !d.hidden).length;\n        let curAngle = -Math.PI / 2 + i * (Math.PI * 2 / curLen);\n        return SVGWidth / 2 + Math.cos(curAngle) * radialRadius;\n      })\n      .strength(forceStrength.radial.radial)\n    );\n  };\n\n  const initGridSim = () => {\n    let curGridRowSize = gridRowSize;\n    let gridColumnSize = Math.ceil(tokenSize / curGridRowSize);\n\n    let rowLength = gridRowSize * 2 * minNodeRadius + (gridRowSize - 1) * gridColumnGap;\n    let columnLength = gridColumnSize * 2 * minNodeRadius + (gridColumnSize - 1) * gridRowGap;\n\n    // Check if we need to increase the row size\n    while (columnLength > SVGHeight) {\n      curGridRowSize = gridRowSize + 1;\n      rowLength = gridRowSize * 2 * minNodeRadius + (gridRowSize - 1) * gridColumnGap;\n      columnLength = gridColumnSize * 2 * minNodeRadius + (gridColumnSize - 1) * gridRowGap;\n\n      if (rowLength > SVGWidth) {\n        console.log('Failed to initialize grid layout');\n        break;\n      }\n    }\n\n    let xs = Math.floor((SVGWidth - rowLength) / 2);\n    let ys = Math.floor((SVGHeight - columnLength) / 2);\n    \n    // Force 3 (Grid force)\n    simulation.force('grid', d3.forceLink(linkArrays[curLinkI].gridLinks)\n      .iterations(80)\n      .distance(50)\n      .id(d => d.id)\n    );\n\n    // Force 4 (Orientation force)\n    simulation.force('posX', d3.forceX()\n      .x((d, i) => xs + (i % gridRowSize) * (2 * minNodeRadius + gridColumnGap) + minNodeRadius)\n      .strength(d => d.id === undefined ? 0 : 1)\n    );\n\n    simulation.force('posY', d3.forceY()\n      .y((d, i) => ys + Math.floor(i / gridRowSize) * (2 * minNodeRadius + gridRowGap) + minNodeRadius)\n      .strength(d => d.id === undefined ? 0 : 1)\n    );\n  };\n\n  const initCurrentSim = (nodeRadiusScale) => {\n    switch(currentLayout.value) {\n    case 'force':\n      initForceSim(nodeRadiusScale);\n      break;\n    case 'radial':\n      initRadialSim();\n      break;\n    case 'grid':\n      initGridSim();\n      break;\n    }\n  };\n  \n  const tickLinkForce = (d, nodeRadiusScale) => {\n    const sCoord = borderConstraint(d[0], nodeRadiusScale);\n    const tCoord = borderConstraint(d[1], nodeRadiusScale);\n\n    if (d.selfLoop) {\n      const iCoord = borderConstraint(d[2], nodeRadiusScale);\n\n      // Shorten the distance from source to intermediate point\n      let interLen = Math.sqrt((tCoord.left - iCoord.left) ** 2 +\n        (tCoord.top - iCoord.top) ** 2) - nodeRadiusScale(d[0].saliency);\n\n      iCoord.left = tCoord.left + (iCoord.left - tCoord.left) / interLen * 80;\n      iCoord.top = tCoord.top + (iCoord.top - tCoord.top) / interLen * 80;\n\n      // Need to handle the arc manually if there is a self loop\n      const iVec = [iCoord.left - sCoord.left, iCoord.top - sCoord.top];\n      const iVecNorm = Math.sqrt((iVec[0] ** 2 + iVec[1] ** 2));\n\n      // Rotate 90 degree\n      // Normalized the rotate direction, use alpha to control magnitude\n      const alpha = 50;\n      const iVecClock90 = [-iVec[1] / iVecNorm * alpha, iVec[0] / iVecNorm * alpha];\n      const iVecCounterClock90 = [iVec[1] / iVecNorm * alpha, -iVec[0] / iVecNorm * alpha];\n\n      const leftControl = [sCoord.left + iVec[0] + iVecClock90[0],\n        sCoord.top + iVec[1] + iVecClock90[1]];\n      const rightControl = [sCoord.left + iVec[0] + iVecCounterClock90[0],\n        sCoord.top + iVec[1] + iVecCounterClock90[1]];\n\n      // We need to shorten the path to leave space for arrow\n      let halfLen = Math.sqrt((tCoord.left - rightControl[0]) ** 2 + (tCoord.top - rightControl[1]) ** 2);\n      let theta = (nodeRadiusScale(d[0].saliency) + 10)/ halfLen;\n      let modTCoord = {\n        left: tCoord.left + (rightControl[0] - tCoord.left) * theta,\n        top: tCoord.top + (rightControl[1] - tCoord.top) * theta,\n      };\n\n      // Draw a bezier curve with two control points (which are left and right\n      // perpendicular to the self loop node -> intermediate node vector)\n      return 'M' + sCoord.left + ',' + sCoord.top\n        + 'C' + leftControl[0] + ',' + leftControl[1]\n        + ' ' + rightControl[0] + ',' + rightControl[1]\n        + ' ' + modTCoord.left + ',' + modTCoord.top;\n\n    } else {\n      // We need to shorten the path to leave space for arrow\n      let vecLen = Math.sqrt((tCoord.left - sCoord.left) ** 2 + (tCoord.top - sCoord.top) ** 2);\n      let theta = (nodeRadiusScale(d[1].saliency) + 10) / vecLen;\n      let modTCoord = {\n        left: tCoord.left + (sCoord.left  - tCoord.left) * theta,\n        top: tCoord.top + (sCoord.top - tCoord.top) * theta,\n      };\n      return 'M' + sCoord.left + ',' + sCoord.top + 'L' + modTCoord.left + ',' + modTCoord.top;\n    }\n  };\n\n  const tickNodeForce = (d, nodeRadiusScale) => {\n    // Maker sure the nodes are inside the box\n    const coord = borderConstraint(d, nodeRadiusScale);\n    return `translate(${coord.left}, ${coord.top})`;\n  };\n\n  const tickLinkRadial = (d, nodeRadiusScale) => {\n    const sCoord = borderConstraint(d[0], nodeRadiusScale);\n    const tCoord = borderConstraint(d[1], nodeRadiusScale);\n\n    let source = {x: sCoord.left, y: sCoord.top};\n    let target = {x: tCoord.left, y: tCoord.top};\n    let center = {x: SVGWidth / 2, y: SVGHeight / 2 + 40};\n\n    // We need to shorten the path to leave space for arrow\n    let theta = 1 - (minNodeRadius + 10) / radialRadius;\n    let modTarget = {\n      x: center.x + (target.x - center.x) * theta,\n      y: center.y + (target.y - center.y) * theta,\n    };\n\n    let modSource = {\n      x: center.x + (source.x - center.x) * theta,\n      y: center.y + (source.y - center.y) * theta,\n    };\n    \n    // Two control points symmetric regarding the center point\n    let controlP1 = {\n      x: center.x + (modSource.x - center.x) * radialCurveAlpha,\n      y: center.y + (modSource.y - center.x) * radialCurveAlpha\n    };\n\n    let controlP2 = {\n      x: center.x + (modTarget.x - center.x) * radialCurveAlpha,\n      y: center.y + (modTarget.y - center.x) * radialCurveAlpha\n    };\n\n    return `M ${modSource.x},${modSource.y} C${controlP1.x}, ${controlP1.y},\n      ${controlP2.x}, ${controlP2.y}, ${modTarget.x},${modTarget.y}`;\n  };\n  \n  const tickLinkGrid = (d, nodeRadiusScale) => {\n    const sCoord = borderConstraint(d[0], nodeRadiusScale);\n    const tCoord = borderConstraint(d[1], nodeRadiusScale);\n\n    // We need to shorten the path to leave space for arrow\n    let halfLen = Math.sqrt((tCoord.left - sCoord.left) ** 2 + (tCoord.top - sCoord.top) ** 2);\n\n    let theta = (minNodeRadius + 10) / halfLen;\n    let modTCoord = {\n      left: tCoord.left + (sCoord.left - tCoord.left) * theta,\n      top: tCoord.top + (sCoord.top - tCoord.top) * theta,\n    };\n\n    return 'M' + sCoord.left + ',' + sCoord.top\n      + 'L' + modTCoord.left + ',' + modTCoord.top;\n  };\n\n  const weightThresholdUpdated = (step) => {\n    curLinkI = step;\n\n    // Update the svg\n    let linkLines = d3.select(graphSVG)\n      .select('g.attention-link-group')\n      .selectAll('path.link')\n      .data(linkArrays[curLinkI].biLinks, d => `${d[0].id}-${d[1].id}`);\n\n    // Enter\n    linkLines.enter()\n      .append('path')\n      .attr('marker-end', 'url(#arrow)')\n      .attr('class', 'link')\n      .attr('id', d => `link-${d[0].id}-${d[1].id}`)\n      .style('stroke', 'hsl(150, 74%, 51%)')\n      .style('stroke-width', d => linkWidth(d.attention))\n      .transition()\n      .duration(animationTime * 3)\n      .ease(ease)\n      .style('stroke', linkColor);\n    \n    // Exit\n    linkLines.exit()\n      .style('stroke', 'hsl(349, 81%, 57%)')\n      .transition()\n      .duration(animationTime * 3)\n      .ease(ease)\n      .style('opacity', 0)\n      .on('end', (d, i, g) => {\n        d3.select(g[i]).remove();\n      });\n    \n    // Update the simulation\n    simulation.nodes(linkArrays[curLinkI].nodes);\n    simulation.alpha(1).restart();\n  };\n\n  // Create related link arrays (hiddenLinks, biLinks, and gridLinks)\n  const createGraphLinks = (curLinks, nodeByID, nodeIndexArray) => {\n    curLinks = curLinks.map(d => Object.create(d));\n    let curNodes = originalNodes.slice();\n\n    // Add text order hidden links\n    let curHiddenLinks = [];\n    for (let i = 0; i < curNodes.length - 1; i++) {\n      let hiddenLink = {\n        source: +curNodes[i].id,\n        target: +curNodes[i + 1].id\n      };\n      curHiddenLinks.push(hiddenLink);\n    }\n\n    // Add a connection between the first and last token\n    curHiddenLinks.push({\n      source: +curNodes[curNodes.length - 1].id,\n      target: curNodes[0].id\n    });\n\n    curHiddenLinks = curHiddenLinks.map(d => Object.create(d));\n\n    // Add intermediate nodes to create bezier curves\n    let curBiLinks = [];\n\n    curLinks.forEach(d => {\n      let source = nodeByID.get(d.source);\n      let target = nodeByID.get(d.target);\n      let curBilink = [source, target];\n      curBilink.selfLoop = false;\n      curBilink.attention = +d.weight;\n\n      // Add a hidden node if there is a self-loop\n      if (source === target) {\n        curBilink.selfLoop = true;\n\n        // We cannot keep creating new intermediate nodes (need to be the same\n        // object for each source across different threshold)\n        let intermediate = {hidden: true};\n\n        if (intermediateNodeMap.has(source)) {\n          intermediate = intermediateNodeMap.get(source);\n        } else {\n          intermediateNodeMap.set(source, intermediate);\n        }\n\n        curBilink.push(intermediate);\n        curNodes.push(intermediate);\n        curLinks.push(\n          {source: intermediate, target: source}\n        );\n      }\n\n      curBiLinks.push(curBilink);\n    });\n\n    // Create grid links\n    let curGridLinks = [];\n    nodeIndexArray.sort((a, b) => +a - +b);\n    for (let i = 0; i < curNodes.length; i++) {\n      if (i % gridRowSize !== gridRowSize - 1 & nodeByID.has(i + 1)) {\n        curGridLinks.push({source: nodeByID.get(i), target: nodeByID.get(i + 1)});\n      }\n      if (nodeByID.has(i + gridRowSize)) {\n        curGridLinks.push({source: nodeByID.get(i), target: nodeByID.get(i + gridRowSize)});\n      }\n    }\n\n    return {\n      links: curLinks,\n      hiddenLinks: curHiddenLinks,\n      biLinks: curBiLinks,\n      gridLinks: curGridLinks,\n      nodes: curNodes\n    };\n  };\n\n  const graphNodeDoubleClickHandler = (e, nodeGroup, linkLineGroup, nodeIndexArray,\n    nodeIndices, nodeRadiusScale, nodeByID, simulation) => {\n    let curNode = d3.select(e.target);\n    let curID = curNode.data()[0].id;\n\n    // Delete the node from the nodes array\n    for (let i = linkArrays[curLinkI].nodes.length - 1; i >= 0; i--) {\n      if (linkArrays[curLinkI].nodes[i].id === curID) {\n        linkArrays[curLinkI].nodes.splice(i, 1);\n      }\n    }\n\n    // Remove the node element on screen\n    nodeGroup.selectAll('g.node')\n      .data(linkArrays[curLinkI].nodes.filter(d => d.id !== undefined), d => d.id)\n      .exit()\n      .remove();\n\n    // Delete all links connecting to this node\n    for (let i = linkArrays[curLinkI].biLinks.length - 1; i >= 0; i--) {\n      if (linkArrays[curLinkI].biLinks[i][0].id === curID |\n        linkArrays[curLinkI].biLinks[i][1].id === curID) {\n        linkArrays[curLinkI].biLinks.splice(i, 1);\n      }\n    }\n\n    // Delete all attention links connecting to this node\n    for (let i = linkArrays[curLinkI].links.length - 1; i >= 0; i--) {\n      if (linkArrays[curLinkI].links[i].source.id === curID |\n        linkArrays[curLinkI].links[i].target.id === curID) {\n        linkArrays[curLinkI].links.splice(i, 1);\n      }\n    }\n\n    // Rewire the text order link array\n    for (let i = linkArrays[curLinkI].hiddenLinks.length - 1; i >= 0; i--) {\n      if (linkArrays[curLinkI].hiddenLinks[i].source.id === curID) {\n        linkArrays[curLinkI].hiddenLinks.splice(i, 1);\n      } else if (linkArrays[curLinkI].hiddenLinks[i].target.id === curID) {\n        if (i + 1 < linkArrays[curLinkI].hiddenLinks.length) {\n          linkArrays[curLinkI].hiddenLinks[i].target = linkArrays[curLinkI].hiddenLinks[i + 1].source;\n        } else {\n          linkArrays[curLinkI].hiddenLinks[i].target = linkArrays[curLinkI].hiddenLinks[0].source;\n        }\n      }\n    }\n\n    // Need to reconstruct the grid links\n    linkArrays[curLinkI].gridLinks = [];\n    nodeIndices = new Set();\n    linkArrays[curLinkI].nodes.forEach(d => {if (d.id !== undefined) nodeIndices.add(+d.id);});\n    nodeIndexArray = Array.from(nodeIndices);\n    nodeIndexArray.sort((a, b) => +a - +b);\n\n    for (let i = 0; i < nodeIndexArray.length - 1; i++) {\n      let curI = nodeIndexArray[i];\n      if (i % gridRowSize !== gridRowSize - 1 & nodeByID.has(nodeIndexArray[i + 1])) {\n        linkArrays[curLinkI].gridLinks.push({source: nodeByID.get(curI),\n          target: nodeByID.get(nodeIndexArray[i + 1])});\n      }\n      if (nodeByID.has(nodeIndexArray[i + gridRowSize])) {\n        linkArrays[curLinkI].gridLinks.push({source: nodeByID.get(curI),\n          target: nodeByID.get(nodeIndexArray[i + gridRowSize])});\n      }\n    }\n\n    linkLineGroup.selectAll('path.link')\n      .data(linkArrays[curLinkI].biLinks, d => `${d[0].id}-${d[1].id}`)\n      .exit()\n      .remove();\n\n    initCurrentSim(nodeRadiusScale);\n    simulation.alpha(0.3).restart();\n  };\n\n  const simulationTick = (nodeRadiusScale) => {\n    // console.log('Tick');\n\n    let linkLines = d3.select(graphSVG)\n      .select('g.attention-link-group')\n      .selectAll('path.link');\n\n    // Update the attention links\n    switch (currentLayout.value) {\n    case 'force':\n      linkLines.attr('d', d => tickLinkForce(d, nodeRadiusScale));\n      break;\n    case 'radial':\n      linkLines.attr('d', d => tickLinkRadial(d, nodeRadiusScale));\n      break;\n    case 'grid':\n      linkLines.attr('d', d => tickLinkGrid(d, nodeRadiusScale));\n      break;\n    default:\n      console.log('Unexpected case.');\n    }\n\n    // Update the nodes\n    d3.select(graphSVG)\n      .select('g.node-group')\n      .selectAll('g.node')\n      .attr('transform', d => tickNodeForce(d, nodeRadiusScale));\n  };\n\n  const drawSaliencyLegend = (legendGroup, legendPos, largestAbs,\n    leftColor='#eb2f06', rightColor='#4690C2') => {\n    // Define the gradient\n    let legendGradientDef = legendGroup.append('defs')\n      .append('linearGradient')\n      .attr('x1', 0)\n      .attr('y1', 1)\n      .attr('x2', 0)\n      .attr('y2', 0)\n      .attr('id', 'legend-gradient-graph');\n\n    legendGradientDef.append('stop')\n      .attr('stop-color', leftColor)\n      .attr('offset', 0);\n\n    legendGradientDef.append('stop')\n      .attr('stop-color', rightColor)\n      .attr('offset', 1);\n\n    legendGroup.append('rect')\n      .attr('x', 0)\n      .attr('y', 0)\n      .attr('width', legendPos.width)\n      .attr('height', legendPos.height)\n      .style('fill', 'url(#legend-gradient-graph)')\n      .style('stroke', 'black');\n\n    // Draw the legend axis\n    let legendScale = d3.scaleLinear()\n      .domain([0, largestAbs])\n      .range([legendPos.height, 0])\n      .nice();\n\n    legendGroup.append('g')\n      .attr('transform', `translate(${legendPos.width}, ${0})`)\n      .call(d3.axisRight(legendScale).ticks(5));\n\n    legendGroup.append('text')\n      .attr('x', 0)\n      .attr('y', legendPos.height + 8)\n      .style('font-size', '12px')\n      .style('fill', 'hsl(0, 0%, 40%)')\n      .style('dominant-baseline', 'hanging')\n      .style('text-anchor', 'left')\n      .text('Semantic Saliency Score');\n  };\n\n  const initGraph = () => {\n    let svg = d3.select(graphSVG);\n\n    // Map nodes and links to arrays of objects\n    let nodes = graphData.nodes.map(d => Object.create(d));\n    nodes.sort((a, b) => +a.id - +b.id);\n    \n    // Give each saliency token a unique name\n    let tokenCount = {};\n    nodes.forEach(d => {\n      let curCount = 0;\n      if (tokenCount[d.token] === undefined) {\n        tokenCount[d.token] = curCount + 1;\n      } else {\n        curCount = tokenCount[d.token];\n        tokenCount[d.token] += 1;\n      }\n      d.name = `${tokenIDName(d.token)}-${curCount}`;\n    });\n\n    originalNodes = nodes.slice();\n\n    // Maintain a set of all existing node indices\n    let nodeIndices = new Set();\n    graphData.nodes.forEach(d => nodeIndices.add(+d.id));\n    let nodeIndexArray = Array.from(nodeIndices);\n\n    let nodeByID = new Map(nodes.map(d => [d.id, d]));\n\n    // Create link arrays at different range steps\n    linkArrays = {};\n    for (let i  = 0; i < weightThresholdSteps; i++) {\n      let curWeightThreshold = round(weightThresholdMin + i * weightThresholdGap, 2);\n      let links = graphData.links.filter(d => d.weight > curWeightThreshold);\n      let linkResult = createGraphLinks(links, nodeByID, nodeIndexArray);\n\n      linkArrays[i] = {\n        links: linkResult.links.slice(),\n        hiddenLinks: linkResult.hiddenLinks.slice(),\n        biLinks: linkResult.biLinks.slice(),\n        gridLinks: linkResult.gridLinks.slice(),\n        nodes: linkResult.nodes.slice()\n      };\n    }\n\n    // Create a scale for the node radius\n    let allSaliencyScores = nodes.map(d => +d.saliency);\n    // console.log(d3.extent(allSaliencyScores));\n    nodeRadiusScale = d3.scaleLinear()\n      .domain(d3.extent(allSaliencyScores))\n      .range([minNodeRadius, maxNodeRadius])\n      .unknown(0)\n      .nice();\n    \n    // Create a scale for the node color\n    let largestAbs = d3.max(allSaliencyScores.map(Math.abs));\n    let rightColor = '#E50035';\n    let leftColor = '#ffffff';\n\n    let nodeSaliencyColorScale = d3.scaleLinear()\n      .domain([0, largestAbs])\n      .range([d3.rgb(leftColor), d3.rgb(rightColor)])\n      .unknown(d3.rgb('white'));\n\n    // Create a scale for link stroke width\n    let attentionWeights = linkArrays[0].links.map(d => +d.weight);\n    linkWidth = d3.scaleLinear()\n      .domain(d3.extent(attentionWeights))\n      .range([0.5, 3])\n      .nice();\n\n    // Add attention links\n    let linkLineGroup = svg.append('g')\n      .attr('class', 'attention-link-group')\n      .attr('stroke', linkColor);\n\n    linkLineGroup.selectAll('path.link')\n      .data(linkArrays[curLinkI].biLinks, d => `${d[0].id}-${d[1].id}`)\n      .join('path')\n      .attr('class', 'link')\n      .attr('id', d => `link-${d[0].name}-${d[1].name}`)\n      .attr('marker-end', 'url(#arrow)')\n      .style('stroke-width', d => linkWidth(d.attention));\n\n    // Add token nodes\n    let nodeGroup = svg.append('g')\n      .attr('class', 'node-group');\n\n    let nodeGroups = nodeGroup.selectAll('g.node')\n      // Need to filter out intermediate nodes\n      .data(linkArrays[curLinkI].nodes.filter(d => d.id !== undefined), d => d.id)\n      .join('g')\n      .attr('class', 'node')\n      .attr('id', d => `node-${d.name}`)\n      .attr('transform', `translate(${SVGWidth / 2}, ${SVGHeight / 2})`)\n      .call(drag())\n      // Hover over effect\n      .on('mouseover', (e, d) => {\n        curHoverToken = d.name;\n        hoverTokenStore.set(curHoverToken);\n        highLightLink(curHoverToken);\n      })\n      .on('mouseleave', () => {\n        dehighlightLink(curHoverToken);\n        curHoverToken = null;\n        hoverTokenStore.set(curHoverToken);\n      })\n      // Single click to remove fixing\n      .on('click', (e, d) => {\n        if (d.fx !== null && d.fy !== null) {\n          // Unfix the node\n          delete d.fx;\n          delete d.fy;\n\n          // Remove the fixing marker\n          d3.select(e.target.parentNode)\n            .selectAll('rect.fixed-marker')\n            .remove();\n          \n          simulation.alpha(0.2).restart();\n        }\n      })\n      // Double click to remove the node\n      .on('dblclick', e => graphNodeDoubleClickHandler(\n        e, nodeGroup, linkLineGroup, nodeIndexArray, nodeIndices,\n        nodeRadiusScale, nodeByID, simulation\n      ));\n\n    // Add circle to each node\n    // Create a color scale to represent the text order\n    let colorScale = d3.scaleLinear()\n      .domain(d3.extent(nodeIndices))\n      .range([d3.rgb('#D4E5F4'), d3.rgb('#1E6CB0')]);\n    \n    nodeGroups.append('circle')\n      .attr('class', 'node-circle')\n      .attr('r', d => currentLayout.value === 'force' ?\n        nodeRadiusScale(+d.saliency) : minNodeRadius)\n      // .style('fill', d => colorScale(d.id))\n      .style('fill', d => nodeSaliencyColorScale(+d.saliency))\n      .style('opacity', 1)\n      .clone(true)\n      .attr('r', d => currentLayout.value === 'force' ?\n        nodeRadiusScale(+d.saliency) : minNodeRadius)\n      .style('fill', linkHoverColor)\n      .attr('class', 'shadow-circle');\n\n    // Create legend for the saliency map view\n    let legendGroup = svg.append('g')\n      .attr('class', 'legend-group')\n      .attr('transform', `translate(${SVGPadding.left + 3}, ${SVGHeight - 130})`);\n\n    let legendPos = {width: 10, height: 100};\n\n    drawSaliencyLegend(legendGroup, legendPos, largestAbs, leftColor, rightColor);\n    \n    // Add token text to each node\n    let texts = nodeGroups.append('text')\n      .attr('class', 'node-text')\n      .style('font-weight', 600)\n      .text(d => d.token);\n\n    texts.filter(d => d3.hcl(nodeSaliencyColorScale(+d.saliency)).l < 66)\n      .clone(true)\n      .lower()\n      .style('stroke-linejoin', 'round')\n      .attr('stroke-width', 4)\n      .attr('stroke', 'white');\n    \n    nodeGroups.selectAll('circle').lower();\n\n    nodeGroups.append('title')\n      .text(d => d.token);\n\n    // Define the force\n    // Use the min threshold to init the simulation (it includes the most hidden nodes)\n    if (simulation == null) {\n      simulation = d3.forceSimulation(linkArrays[curLinkI].nodes);\n      // Change the min alpha so that the nodes do not shake at the end (end earlier)\n      // The default alphaMin is 0.000\n      // simulation.alphaMin(0.001);\n    } else {\n      simulation.nodes(linkArrays[curLinkI].nodes);\n      simulation.alpha(1).restart();\n    }\n\n    switch(currentLayout.value) {\n    case 'force':\n      initForceSim(nodeRadiusScale);\n      break;\n    case 'radial':\n      initRadialSim();\n      break;\n    case 'grid':\n      initGridSim();\n      break;\n    }\n\n    // Simulation tick updates\n    simulation.on('tick', () => simulationTick(nodeRadiusScale));\n\n    return nodeRadiusScale;\n  };\n\n  const drawGraph = () => {\n    // Filter the links based on the weight\n    // weightThreshold = 0.05;\n\n    let svg = d3.select(graphSVG)\n      .attr('width', SVGWidth)\n      .attr('height', SVGHeight);\n\n    // Add a border\n    svg.append('rect')\n      .attr('class', 'border-rect')\n      .attr('width', SVGWidth)\n      .attr('height', SVGHeight)\n      .style('stroke', 'black')\n      .style('fill', 'none');\n\n    // Add arrow markers\n    svg.append('defs')\n      .append('marker')\n      .attr('id', 'arrow')\n      .attr('viewBox', [0, 0, 10, 10])\n      .attr('refX', 0)\n      .attr('refY', 5)\n      .attr('markerWidth', 12)\n      .attr('markerHeight', 9)\n      .attr('orient', 'auto')\n      .attr('stroke-width', 1)\n      .attr('markerUnits', 'userSpaceOnUse')\n      .append('path')\n      .attr('d', 'M 0 0 L 10 5 L 0 10 z')\n      .attr('stroke', linkColor)\n      .attr('fill', linkColor);\n    \n    // Create a different arrow marked used when user hovers over a node\n    svg.append('defs')\n      .append('marker')\n      .attr('id', 'arrow-hover')\n      .attr('viewBox', [0, 0, 10, 10])\n      .attr('refX', 0)\n      .attr('refY', 5)\n      .attr('markerWidth', 12)\n      .attr('markerHeight', 9)\n      .attr('orient', 'auto')\n      .attr('stroke-width', 1)\n      .attr('markerUnits', 'userSpaceOnUse')\n      .append('path')\n      .attr('d', 'M 0 0 L 10 5 L 0 10 z')\n      .attr('stroke', linkHoverColor)\n      .attr('fill', linkHoverColor);\n\n    nodeRadiusScale = initGraph();\n\n    // Register UI elements from the control panel\n    bindSlider('attention', 0, 10, forceStrength.force.attention);\n    bindSlider('textOrder', 0, 10, forceStrength.force.textOrder);\n    bindSlider('manyBody', -2000, 0, forceStrength.force.manyBody);\n    bindSlider('collideRadius', 0, 20, forceStrength.force.collideRadius, nodeRadiusScale);\n    bindSlider('threshold', weightThresholdMin, weightThresholdMax, weightThreshold, nodeRadiusScale);\n\n    bindSelect(nodeRadiusScale);\n\n    // Bind the layer and head selects\n    bindLayerHeadSelect();\n  };\n\n\n  const updateLayerHead = () => {\n\n    // Remove nodes and links\n    d3.select(graphSVG)\n      .select('g.node-group')\n      .remove();\n    \n    d3.select(graphSVG)\n      .select('g.attention-link-group')\n      .remove();\n    \n    d3.select(graphSVG)\n      .select('g.legend-group')\n      .remove();\n\n    // Update the graph data\n    graphData = createGraphData(curLayer, curHead);\n\n    initGraph();\n  };\n\n  /** Create CSS selector compatible name */\n  const tokenIDName = (tokenID) => {\n    if (tokenID == null) {\n      return null;\n    } else {\n      return tokenID.replace(/\\./g, '\\\\.')\n        .replace(/,/g, '\\\\,')\n        .replace(/#/g, '')\n        .replace(/\\[/g, '\\\\[')\n        .replace(/\\]/g, '\\\\]');\n    }\n  };\n\n  const highLightLink = (hoverToken) => {\n\n    d3.select(graphSVG)\n      .select('.attention-link-group')\n      .selectAll('path.link')\n      // TODO\n      // .style('opacity', 0.05);\n      .style('opacity', 0.2);\n\n    d3.select(graphSVG)\n      .select('.attention-link-group')\n      .selectAll('path.link')\n      .filter((d, i, g) => d3.select(g[i]).attr('id').includes(`-${hoverToken}`))\n      .attr('marker-end', 'url(#arrow-hover)')\n      .classed('highlighted', true)\n      .style('stroke', null)\n      .style('stroke-width', 2)\n      .style('opacity', 0.8)\n      .raise();\n      // TODO\n      // .style('opacity', 0.9)\n      // .style('stroke-width', 2)\n      // .raise();\n\n    d3.select(graphSVG)\n      .select('.node-group')\n      .selectAll('.node')\n      .filter((d, i, g) => d3.select(g[i]).attr('id').includes(`-${hoverToken}`))\n      .raise()\n      .select('.shadow-circle')\n      .attr('r', d => currentLayout.value === 'force' ?\n        nodeRadiusScale(+d.saliency) + 5 : minNodeRadius + 5)\n      .style('stroke', 'white')\n      .style('stroke-width', 1.5);\n  };\n\n  const dehighlightLink = (hoverToken) => {\n\n    // TODO\n    // return;\n    // if (hoverToken.includes('jagged')) {\n    //   return;\n    // }\n\n    d3.select(graphSVG)\n      .select('.attention-link-group')\n      .selectAll('path.link')\n      .style('opacity', null);\n\n    d3.select(graphSVG)\n      .select('.attention-link-group')\n      .selectAll('path.link')\n      .filter((d, i, g) => d3.select(g[i]).attr('id').includes(`-${hoverToken}`))\n      .classed('highlighted', false)\n      .attr('marker-end', 'url(#arrow)')\n      .style('stroke', linkColor)\n      .style('stroke-width', d => linkWidth(d.attention))\n      .style('opacity', null);\n\n    d3.select(graphSVG)\n      .select('.node-group')\n      .selectAll('.node')\n      .filter((d, i, g) => d3.select(g[i]).attr('id').includes(`-${hoverToken}`))\n      .select('.shadow-circle')\n      .attr('r', d => currentLayout.value === 'force' ?\n        nodeRadiusScale(+d.saliency) : minNodeRadius)\n      .style('stroke', null)\n      .style('stroke-width', null)\n      .lower();\n  };\n\n  const createGraphData = (layer, head) => {\n    let curAttention = attentionData[layer][head];\n    let curAttentionData = {'nodes': [], 'links': []};\n    let curPredictedLabel = saliencyData[String(instanceID)]['meta']['predicted_label'];\n\n    // Add nodes\n    saliencyData[String(instanceID)]['tokens'].forEach((d, i) => {\n      curAttentionData.nodes.push({\n        token: d.token,\n        saliency: d[curPredictedLabel],\n        id: i\n      });\n    });\n\n    // Add links\n    for (let i = 0; i < curAttentionData.nodes.length; i++) {\n      for (let j = 0; j < curAttentionData.nodes.length; j++) {\n        curAttentionData.links.push({\n          source: i,\n          target: j,\n          weight: curAttention[i][j]\n        });\n      }\n    }\n\n    return curAttentionData;\n  };\n\n  const settingIconClicked = () => {\n    if (settingIconActive) {\n      settingIconActive = false;\n    } else {\n      settingIconActive = true;\n    }\n  };\n\n  hoverTokenStore.subscribe(value => {\n\n    if (value != null) {\n      curHoverToken = value;\n\n      // Check if the coming word has split subwords in graph vis\n      if (wordToSubwordMap[curHoverToken.replace(/(.*)-\\d*/, '$1')] !== undefined) {\n        wordToSubwordMap[curHoverToken.replace(/(.*)-\\d*/, '$1')].forEach(t => {\n          highLightLink(t);\n        });\n      } else {\n        highLightLink(curHoverToken);\n      }\n      \n    } else {\n\n      if (curHoverToken != null) {\n        // Check if the coming word has split subwords in graph vis\n        if (wordToSubwordMap[curHoverToken.replace(/(.*)-\\d*/, '$1')] !== undefined) {\n          wordToSubwordMap[curHoverToken.replace(/(.*)-\\d*/, '$1')].forEach(t => {\n            dehighlightLink(t);\n          });\n        } else {\n          dehighlightLink(curHoverToken);\n        }\n      }\n\n      curHoverToken = value;\n    }\n\n  });\n\n  const renderGraph = async () => {\n    // console.log('loading matrix');\n\n    // Load data from files if they have not been loaded\n    if (attentionData == null) {\n      attentionData = await d3.json(`PUBLIC_URL/data/sst2-attention-data/attention-${padZeroLeft(instanceID, 4)}.json`);\n    }\n    if (saliencyData == null) {\n      saliencyData = await d3.json('PUBLIC_URL/data/sst2-saliency-list-grad-l1.json');\n      tokenSize = saliencyData[instanceID].tokens.length;\n    }\n\n    // Create graph data\n    graphData = createGraphData(curLayer, curHead);\n\n    // graphData = await d3.json('PUBLIC_URL/data/twitter_graph_800_9_7.json');\n    // console.log('loaded matrix');\n\n    drawGraph();\n  };\n\n  onMount(async() => {\n    if (attentionData == null) {\n      attentionData = await d3.json(`PUBLIC_URL/data/sst2-attention-data/attention-${padZeroLeft(instanceID, 4)}.json`);\n    }\n\n    if (saliencyData == null) {\n      saliencyData = await d3.json('PUBLIC_URL/data/sst2-saliency-list-grad-l1.json');\n      tokenSize = saliencyData[instanceID].tokens.length;\n    }\n\n    // gradSortedIndexes = await d3.json('PUBLIC_URL/data/sst2-sorted-grad-heads.json');\n    // gradSortedIndexes = gradSortedIndexes[instanceID];\n    // relevantAttentions = loadAttentionMatrix();\n    // console.log(relevantAttentions, saliencyData);\n    // console.log(tokenSize);\n\n    mounted = true;\n  });\n\n  graphViewConfigStore.subscribe(value => {\n    if (value.compHeight !== undefined && value.compWidth !== undefined){\n      if (graphViewCompConfig === undefined ||\n        (graphViewCompConfig.compHeight !== value.compHeight &&\n        graphViewCompConfig.compWidth !== value.compWidth)\n      ){\n        // Update the height and width\n        graphViewCompConfig = value;\n        SVGHeight = graphViewCompConfig.compHeight;\n        SVGWidth = graphViewCompConfig.compWidth;\n        renderGraph();\n      }\n    }\n  });\n\n  wordToSubwordMapStore.subscribe(value => {\n    wordToSubwordMap = value;\n  });\n\n  instanceIDStore.subscribe(value => {\n    // console.log('Instance changed!!');\n    if (value !== instanceID) {\n\n      d3.select(graphSVG).selectAll('*').remove();\n\n      attentionData = null;\n      saliencyData = null;\n\n      instanceID = value;\n\n      renderGraph();\n    }\n    \n  });\n\n\n</script>\n\n<style type=\"text/scss\">\n  @import 'define';\n\n  .graph-view {\n    display: flex;\n    flex-direction: row;\n    width: 100%;\n    height: 100%;\n  }\n\n  :global(.node-circle) {\n    stroke: #fff;\n    stroke-width: 1.5; \n  }\n  \n  :global(.node-text) {\n    dominant-baseline: middle;\n    text-anchor: middle;\n    font-size: 10px;\n    cursor: default;\n  }\n\n  :global(.link) {\n    fill: none;\n  }\n\n  :global(.link.highlighted) {\n    stroke: hsl(36, 100%, 55%);\n  }\n\n  :global(.border-rect) {\n    display: none;\n  }\n\n  .graph-label {\n    position: absolute;\n    color: hsl(0, 0%, 50%);\n    font-size: 1.3rem;\n    margin: 5px 20px 0 20px;\n  }\n  \n  .svg-container {\n    position: relative;\n  }\n\n  .svg-control-panel {\n    position: absolute;\n    top: 40px;\n    left: 0;\n    width: 200px;\n    cursor: default;\n\n    display: flex;\n    flex-direction: column;\n    align-items: center;;\n    justify-content: flex-start;\n\n    font-size: 0.9em;\n    border-radius: 5px;\n    border: 1px solid change-color($brown-dark, $lightness: 90%);\n    box-shadow: 0 3px 3px change-color($brown-dark, $alpha: 0.05);\n    background: hsla(0, 0%, 100%, 0.65);\n\n    .name {\n      font-size: 1em;\n      width: 94%;\n      padding: 5px 0px;\n      display: flex;\n      flex-direction: row;\n      justify-content: space-around;\n    }\n  }\n\n  .sep-line-horizontal {\n    height: 0;\n    width: 95%;\n    border: 1px solid $gray-sep;\n  }\n\n  .sep-line-vertical {\n    height: 20px;\n    width: 0;\n    border: 1px solid $gray-sep;\n  }\n\n  select {\n    height: 1.8em;\n    background: inherit;\n    border-color: hsla(0, 0%, 0%, 0);\n    padding: 0 1em 0 0.4em;\n\n    &.select-num {\n      padding: 0 8px 0 0;\n      height: auto;\n      border-bottom: 3px solid change-color($brown-icon, $alpha: 0.2);\n    }\n  }\n\n  .select-num-div::after {\n    top: 50%;\n    z-index: 0;\n  }\n\n  .select:not(.is-multiple) {\n    height: 1.8em;\n  }\n\n  .select:not(.is-multiple):not(.is-loading)::after {\n    right: 0.2em;\n    border-color: $brown-icon;\n    z-index: 0;\n  }\n\n  .select:not(.is-multiple).select-num-div {\n    height: auto;\n\n    select {\n      margin: 0;\n    }\n  }\n\n  .select:not(.is-multiple).select-num-div::after {\n    right: 0.1em;\n    z-index: 0;\n  }\n\n  .select-row {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: space-around;\n    width: 94%;\n    padding: 3px 0;\n  }\n\n  .setting-icon {\n    padding: 0.1em 0.4em;\n    margin: 0 0.2em;\n    font-size: 1.1em;\n    color: $brown-icon;\n    cursor: pointer;\n    border-radius: 3px;\n\n    transition: background 100ms ease-in-out;\n\n    &:hover {\n      background: change-color($brown-icon, $alpha: 0.1);\n    }\n\n    &.active {\n      background: change-color($brown-icon, $alpha: 0.2);\n\n      &:hover {\n        background: change-color($brown-icon, $alpha: 0.2);\n      }\n    }\n  }\n\n  .slider-container {\n    font-size: 0.9em;\n    padding: 0 15px 0 15px;\n\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n\n    max-height: 0;\n    overflow: hidden;\n    transition: max-height 150ms ease-in-out;\n\n    input {\n      width: 130px;\n    }\n\n    .sep-line-horizontal {\n      width: 70%;\n      margin: 3px 0 10px 0;\n\n      &.longer-line {\n        width: 115%;\n        margin: 0 0 10px 0;\n      }\n    }\n\n    &.active {\n      max-height: 500px;\n      transition: max-height 300ms ease-in-out;\n    }\n  }\n\n  .slider {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n  }\n\n  .slider-title {\n    color: change-color(black, $alpha: 0.5);\n  }\n\n  .slider-text {\n    display: flex;\n    flex-direction: row;\n\n    label {\n      margin-right: 5px;\n    }\n  }\n\n  .slider-value {\n    border-radius: 3px;\n    padding: 0 3px;\n    background: change-color($brown-icon, $alpha: 0.2);\n    color: change-color($brown-icon, $lightness: 40%);\n  }\n\n</style>\n\n\n<div class='graph-view'>\n\n  <div class='svg-container'>\n\n    <div class='graph-label'>\n      Semantic Attention Graph\n    </div>\n\n    <!-- Control panel on top of the SVG -->\n    <div class='svg-control-panel'>\n      <div class='name'>\n        <div>\n          Layer \n          <div class='select select-num-div'>\n            <select name='layer' class='select-num' id='select-layer'>\n              {#each [...Array(12).keys()] as num}\n                <option value={num}>{num + 1}</option>\n              {/each}\n            </select>\n          </div>\n        </div>\n\n        <div>\n          Head\n          <div class='select select-num-div'>\n            <select name='layer' class='select-num' id='select-head'>\n              {#each [...Array(12).keys()] as num}\n                <option value={num}>{num + 1}</option>\n              {/each}\n            </select>\n          </div>\n        </div>\n\n      </div>\n\n      <div class='sep-line-horizontal'></div>\n\n      <div class='select-row'>\n\n        <div class='setting-icon'\n          on:click={settingIconClicked}\n          class:active={settingIconActive}\n        >\n          <i class=\"fas fa-sliders-h\"></i>\n        </div>\n\n        <div class='sep-line-vertical'></div>\n\n        <div class='select'>\n          <select name='layout' id='select-layout'>\n            {#each Object.values(layoutOptions) as opt}\n              <option value={opt.value}>{opt.name}</option>\n            {/each}\n          </select>\n        </div>\n\n      </div>\n\n      <!-- Slider panel -->\n      <div class='slider-container'\n        class:active={settingIconActive}\n      >\n        <div class='sep-line-horizontal longer-line'></div>\n\n        <div class='slider-title'>Edge Force</div>\n\n        <div class='sep-line-horizontal'></div>\n\n        <div class='slider'>\n\n          <div class='slider-text'>\n            <label for='attention'>Attention</label>\n            <div class='slider-value'>\n              {config.autoAttention ? 'auto' : round(forceStrength.force.attention, 2)}\n            </div>\n          </div>\n\n          <input type=\"range\" min=\"0\" max=\"1000\" value=\"500\" class=\"slider\" id=\"attention\">\n        </div>\n\n        <div class='slider'>\n\n          <div class='slider-text'>\n            <label for='textOrder'>Text Order</label>\n            <div class='slider-value'>\n              {round(forceStrength.force.textOrder, 2)}\n            </div>\n          </div>\n\n          <input type=\"range\" min=\"0\" max=\"1000\" value=\"500\" class=\"slider\" id=\"textOrder\">\n        </div>\n\n        <div class='slider'>\n\n          <div class='slider-text'>\n            <label for='manyBody'>ManyBody</label>\n            <div class='slider-value'>\n              {round(forceStrength.force.manyBody, 2)}\n            </div>\n          </div>\n\n          <input type=\"range\" min=\"0\" max=\"1000\" value=\"500\" class=\"slider\" id=\"manyBody\">\n        </div>\n\n        <div class='slider'>\n\n          <div class='slider-text'>\n            <label for='collide'>Node Distance</label>\n            <div class='slider-value'>\n              {round(forceStrength.force.collideRadius, 2)}\n            </div>\n          </div>\n\n          <input type=\"range\" min=\"0\" max=\"1000\" value=\"500\" class=\"slider\" id=\"collideRadius\">\n        </div>\n\n        <div class='slider-title'>Edge Threshold</div>\n\n        <div class='sep-line-horizontal'></div>\n\n        <div class='slider'>\n\n          <div class='slider-text'>\n            <label for='threshold'>Attention > </label>\n            <div class='slider-value'>\n              {round(weightThreshold, 2)}\n            </div>\n          </div>\n\n          <input type=\"range\" min=\"0\" max=\"1000\" value=\"500\" step=\"200\" class=\"slider\" id=\"threshold\">\n        </div>\n        \n      </div>\n\n    </div>\n\n    <svg class='graph-svg' bind:this={graphSVG}></svg>\n  </div>\n\n</div>\n","import {quadtree} from \"d3-quadtree\";\nimport constant from \"./constant.js\";\nimport jiggle from \"./jiggle.js\";\nimport {x, y} from \"./simulation.js\";\n\nexport default function() {\n  var nodes,\n      node,\n      random,\n      alpha,\n      strength = constant(-30),\n      strengths,\n      distanceMin2 = 1,\n      distanceMax2 = Infinity,\n      theta2 = 0.81;\n\n  function force(_) {\n    var i, n = nodes.length, tree = quadtree(nodes, x, y).visitAfter(accumulate);\n    for (alpha = _, i = 0; i < n; ++i) node = nodes[i], tree.visit(apply);\n  }\n\n  function initialize() {\n    if (!nodes) return;\n    var i, n = nodes.length, node;\n    strengths = new Array(n);\n    for (i = 0; i < n; ++i) node = nodes[i], strengths[node.index] = +strength(node, i, nodes);\n  }\n\n  function accumulate(quad) {\n    var strength = 0, q, c, weight = 0, x, y, i;\n\n    // For internal nodes, accumulate forces from child quadrants.\n    if (quad.length) {\n      for (x = y = i = 0; i < 4; ++i) {\n        if ((q = quad[i]) && (c = Math.abs(q.value))) {\n          strength += q.value, weight += c, x += c * q.x, y += c * q.y;\n        }\n      }\n      quad.x = x / weight;\n      quad.y = y / weight;\n    }\n\n    // For leaf nodes, accumulate forces from coincident quadrants.\n    else {\n      q = quad;\n      q.x = q.data.x;\n      q.y = q.data.y;\n      do strength += strengths[q.data.index];\n      while (q = q.next);\n    }\n\n    quad.value = strength;\n  }\n\n  function apply(quad, x1, _, x2) {\n    if (!quad.value) return true;\n\n    var x = quad.x - node.x,\n        y = quad.y - node.y,\n        w = x2 - x1,\n        l = x * x + y * y;\n\n    // Apply the Barnes-Hut approximation if possible.\n    // Limit forces for very close nodes; randomize direction if coincident.\n    if (w * w / theta2 < l) {\n      if (l < distanceMax2) {\n        if (x === 0) x = jiggle(random), l += x * x;\n        if (y === 0) y = jiggle(random), l += y * y;\n        if (l < distanceMin2) l = Math.sqrt(distanceMin2 * l);\n        node.vx += x * quad.value * alpha / l;\n        node.vy += y * quad.value * alpha / l;\n      }\n      return true;\n    }\n\n    // Otherwise, process points directly.\n    else if (quad.length || l >= distanceMax2) return;\n\n    // Limit forces for very close nodes; randomize direction if coincident.\n    if (quad.data !== node || quad.next) {\n      if (x === 0) x = jiggle(random), l += x * x;\n      if (y === 0) y = jiggle(random), l += y * y;\n      if (l < distanceMin2) l = Math.sqrt(distanceMin2 * l);\n    }\n\n    do if (quad.data !== node) {\n      w = strengths[quad.data.index] * alpha / l;\n      node.vx += x * w;\n      node.vy += y * w;\n    } while (quad = quad.next);\n  }\n\n  force.initialize = function(_nodes, _random) {\n    nodes = _nodes;\n    random = _random;\n    initialize();\n  };\n\n  force.strength = function(_) {\n    return arguments.length ? (strength = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : strength;\n  };\n\n  force.distanceMin = function(_) {\n    return arguments.length ? (distanceMin2 = _ * _, force) : Math.sqrt(distanceMin2);\n  };\n\n  force.distanceMax = function(_) {\n    return arguments.length ? (distanceMax2 = _ * _, force) : Math.sqrt(distanceMax2);\n  };\n\n  force.theta = function(_) {\n    return arguments.length ? (theta2 = _ * _, force) : Math.sqrt(theta2);\n  };\n\n  return force;\n}\n","export default function(x, y) {\n  var nodes, strength = 1;\n\n  if (x == null) x = 0;\n  if (y == null) y = 0;\n\n  function force() {\n    var i,\n        n = nodes.length,\n        node,\n        sx = 0,\n        sy = 0;\n\n    for (i = 0; i < n; ++i) {\n      node = nodes[i], sx += node.x, sy += node.y;\n    }\n\n    for (sx = (sx / n - x) * strength, sy = (sy / n - y) * strength, i = 0; i < n; ++i) {\n      node = nodes[i], node.x -= sx, node.y -= sy;\n    }\n  }\n\n  force.initialize = function(_) {\n    nodes = _;\n  };\n\n  force.x = function(_) {\n    return arguments.length ? (x = +_, force) : x;\n  };\n\n  force.y = function(_) {\n    return arguments.length ? (y = +_, force) : y;\n  };\n\n  force.strength = function(_) {\n    return arguments.length ? (strength = +_, force) : strength;\n  };\n\n  return force;\n}\n","import * as d3 from 'd3';\n\nexport const getTokenWidth = (tokens, svg, fontSize='1em') => {\n  let textTokenWidths = {};\n  let textTokenHeight = null;\n\n  let hiddenTextGroup = svg.append('g')\n    .attr('class', 'hidden-text')\n    .style('opacity', 0);\n\n  let hiddenTexts = hiddenTextGroup.selectAll('.text-token')\n    .data(tokens)\n    .join('text')\n    .attr('class', 'text-token')\n    .style('font-size', fontSize)\n    .text(d => d);\n\n  // After the text elements are created, we need to query again to get the\n  // length and width of these elements\n  hiddenTexts.each(function (_, i) {\n    let bbox = this.getBBox();\n    textTokenWidths[i] = +Number(bbox.width).toFixed(2);\n    if (textTokenHeight == null) {\n      textTokenHeight = bbox.height;\n    }\n  });\n\n  hiddenTextGroup.remove();\n  hiddenTexts.remove();\n\n  return { textTokenWidths: textTokenWidths, textTokenHeight: textTokenHeight };\n};\n\n/** Create CSS selector compatible name */\nexport const tokenIDName = (tokenID) => {\n  if (tokenID == null) {\n    return null;\n  } else {\n    return tokenID.replace(/\\./g, '\\\\.')\n      .replace(/,/g, '\\\\,')\n      .replace(/#/g, '')\n      .replace(/\\[/g, '\\\\[')\n      .replace(/\\]/g, '\\\\]');\n  }\n};\n\nexport const isSpecialToken = (t) => {\n  if (t === '[CLS]' || t === '[SEP]' || t === '[PAD]') {\n    return true;\n  } else {\n    return false;\n  }\n};\n\nexport const updateSVGWidth = (svg, width) => {\n  // Change svg width to fit the single line\n  svg.attr('width', width)\n    .select('rect.border-rect')\n    .attr('width', width);\n\n  // Also need to change the svg-container's width to make sticky DIV work\n  d3.select('.instance-container')\n    .select('.panel-container')\n    .style('width', `${width}px`);\n};\n\nexport const round = (num, decimal) => {\n  return Math.round((num + Number.EPSILON) * (10 ** decimal)) / (10 ** decimal);\n};\n\nexport const padZeroLeft = (num, digit) => {\n  return Array(Math.max(digit - String(num).length + 1, 0)).join(0) + num;\n};","import * as d3 from 'd3';\nimport { tokenIDName, getTokenWidth } from './utils.js';\n\nexport const drawParagraph = (saliencies, svg, SVGWidth,\n  SVGPadding, textTokenPadding, wordToSubwordMap, tokenNodeMouseover,\n  tokenNodeMouseleave) => {\n\n  // Give each saliency token a unique name\n  if (saliencies.tokens[0].id !== undefined) {\n    let tokenCount = {};\n    saliencies.tokens.forEach(d => {\n      let curCount = 0;\n      if (tokenCount[d.token] === undefined) {\n        tokenCount[d.token] = curCount + 1;\n      } else {\n        curCount = tokenCount[d.token];\n        tokenCount[d.token] += 1;\n      }\n      d.id = `${tokenIDName(d.token)}-${curCount}`;\n    });\n  }\n  let tokens = saliencies.tokens;\n  \n  let key = saliencies.meta['predicted_label'];\n  let largestAbs = d3.max(saliencies.tokens.map(d => Math.abs(d[key])));\n\n  let tokenColorScale = d3.scaleLinear()\n    .domain([0, largestAbs])\n    .range([d3.rgb('#ffffff'), d3.rgb('#E50035')]);\n\n  // Before drawing the texts, pre-render all texts to figure out their widths\n  let textTokenSize = getTokenWidth(tokens.map(d => d.token), svg);\n  let textTokenWidths = textTokenSize.textTokenWidths;\n  let textTokenHeight = textTokenSize.textTokenHeight;\n  let containerWidthFactor = 4 / 5;\n  let containerWidth = SVGWidth * containerWidthFactor;\n\n  const tokenGap = 5;\n  const rowGap = textTokenHeight + textTokenPadding.top + textTokenPadding.bottom + 10;\n\n  // Add tokens\n  let tokenGroup = svg.append('g')\n    .attr('class', 'token-group-saliency')\n    .attr('transform', `translate(${SVGPadding.left + SVGWidth * (1 - containerWidthFactor) / 2},\n      ${SVGPadding.top + 70})`);\n  \n  let nodes = tokenGroup.append('g')\n    .attr('class', 'node-group')\n    .selectAll('g')\n    .data(tokens, d => d.id)\n    .join('g')\n    .attr('class', d => {\n      let cls = `node node-${d.id}`;\n      if (wordToSubwordMap[d.token] !== undefined) {\n        wordToSubwordMap[d.token].forEach(n => {\n          cls += ` node-${n}`;\n        });\n      }\n      return cls;\n    })\n    .attr('id', d => `node-${d.id}`)\n    .on('mouseover', tokenNodeMouseover)\n    .on('mouseleave', tokenNodeMouseleave);\n\n  // Dynamically change the position of each token node\n  // Change the positions of tokens based on their width\n  let curPos = {x: 0, y: 0};\n  let tokenNum = Object.keys(textTokenWidths).length;\n  let textTokenPositions = {};\n\n  // Change the position of the text token\n  nodes.each(function(_, i) {\n    d3.select(this)\n      .attr('transform', `translate(${curPos.x}, ${curPos.y})`);\n    \n    // Record the new position\n    textTokenPositions[i] = {x: curPos.x, y: curPos.y};\n\n    // Update the next position\n    let curLineLength = curPos.x + textTokenWidths[i] + textTokenPadding.left +\n                        textTokenPadding.right + tokenGap;\n    if (i + 1 < tokenNum) {\n      curLineLength += textTokenWidths[i + 1];\n    }\n\n    // Shift to next row if needed\n    if (curLineLength > containerWidth) {\n      curPos.y += rowGap;\n      curPos.x = 0;\n    } else {\n      curPos.x = curPos.x + textTokenWidths[i] + textTokenPadding.left + textTokenPadding.right + tokenGap;\n    }\n  });\n\n  nodes.append('rect')\n    .attr('width', (d, i) => textTokenWidths[i] + textTokenPadding.left + textTokenPadding.right)\n    .attr('height', textTokenHeight + textTokenPadding.top + textTokenPadding.bottom)\n    .attr('rx', 5)\n    .style('fill', d => tokenColorScale(+d[key]))\n    .style('stroke', 'hsl(180, 1%, 80%)');\n\n  nodes.append('text')\n    .attr('class', 'text-token-arc')\n    .attr('x', textTokenPadding.left)\n    .attr('y', textTokenPadding.top + 2)\n    .style('pointer-events', 'none')\n    .text(d => d.token);\n  \n  // Create legend for the saliency map view\n  let legendGroup = svg.append('g')\n    .attr('class', 'legend-group')\n    .attr('transform', `translate(${SVGPadding.left + 10 + SVGWidth * (1/2 * containerWidthFactor + 1/2)},\n      ${SVGPadding.top + 50})`);\n\n  let legendPos = {width: 10, height: 150};\n\n  drawSaliencyLegend(legendGroup, legendPos, largestAbs);\n\n};\n\nconst drawSaliencyLegend = (legendGroup, legendPos, largestAbs) => {\n  // Define the gradient\n  let legentGradientDef = legendGroup.append('defs')\n    .append('linearGradient')\n    .attr('x1', 0)\n    .attr('y1', 1)\n    .attr('x2', 0)\n    .attr('y2', 0)\n    .attr('id', 'legend-gradient');\n\n  legentGradientDef.append('stop')\n    .attr('stop-color', '#FFFFFF')\n    .attr('offset', 0);\n\n  legentGradientDef.append('stop')\n    .attr('stop-color', '#E50035')\n    .attr('offset', 1);\n\n  legendGroup.append('rect')\n    .attr('x', 0)\n    .attr('y', 0)\n    .attr('width', legendPos.width)\n    .attr('height', legendPos.height)\n    .style('fill', 'url(#legend-gradient)')\n    .style('stroke', 'black');\n\n  // Draw the legend axis\n  let legendScale = d3.scaleLinear()\n    .domain([0, largestAbs])\n    .range([legendPos.height, 0])\n    .nice();\n\n  legendGroup.append('g')\n    .attr('transform', `translate(${legendPos.width}, ${0})`)\n    .call(d3.axisRight(legendScale).ticks(10));\n\n  legendGroup.append('text')\n    .attr('x', 5)\n    .attr('y', -15)\n    .style('font-size', '12px')\n    .style('dominant-baseline', 'end')\n    .style('text-anchor', 'middle')\n    .text('Saliency Score');\n};","import { tokenIDName, getTokenWidth, updateSVGWidth } from './utils.js';\n\nexport const drawGraph = (data, saliencies, wordToSubwordMap, svg, tokenXs,\n  textTokenPadding, SVGPadding, SVGHeight, tokenNodeMouseover, tokenNodeMouseleave,\n  initWordToSubwordMap) => {\n\n  const depList = data.list;\n\n  // Need to split the original words into sub-words if applicable\n  let tokens = data.words.map(d => { return { 'token': d }; });\n\n  // Give each saliency token a unique name\n  if (saliencies.tokens[0].id === undefined) {\n    let tokenCount = {};\n    saliencies.tokens.forEach(d => {\n      let curCount = 0;\n      if (tokenCount[d.token] === undefined) {\n        tokenCount[d.token] = curCount + 1;\n      } else {\n        curCount = tokenCount[d.token];\n        tokenCount[d.token] += 1;\n      }\n      d.id = `${tokenIDName(d.token)}-${curCount}`;\n    });\n  }\n\n  console.log(saliencies, tokens);\n\n  if (wordToSubwordMap == null) {\n    wordToSubwordMap = initWordToSubwordMap(tokens, saliencies);\n  }\n\n  console.log(wordToSubwordMap);\n\n  // Give each saliency token a unique name\n  let tokenCount = {};\n  tokens.forEach(d => {\n    let curCount = 0;\n    if (tokenCount[d.token] === undefined) {\n      tokenCount[d.token] = curCount + 1;\n    } else {\n      curCount = tokenCount[d.token];\n      tokenCount[d.token] += 1;\n    }\n    d.id = `${tokenIDName(d.token)}-${curCount}`;\n  });\n\n  // Before drawing the tree, pre-render all texts to figure out their widths\n  let textTokenSize = getTokenWidth(tokens.map(d => d.token), svg);\n  let textTokenWidths = textTokenSize.textTokenWidths;\n  let textTokenHeight = textTokenSize.textTokenHeight;\n\n  // console.log(textTokenWidths, textTokenHeight);\n\n  const minTokenGap = 5;\n\n  // Compute the x positions for all tokens\n  tokenXs = {};\n  let curX = 0;\n  tokens.forEach((d, i) => {\n    tokenXs[i] = curX;\n    curX += textTokenWidths[i] + minTokenGap + textTokenPadding.left + textTokenPadding.right;\n  });\n\n  let fullWidth = curX + SVGPadding.left + SVGPadding.right - minTokenGap;\n\n  // Change svg width to fit the single line\n  updateSVGWidth(svg, fullWidth);\n\n  // Add tokens\n  let tokenGroup = svg.append('g')\n    .attr('class', 'token-group')\n    .attr('transform', `translate(${SVGPadding.left}, ${SVGPadding.top})`);\n\n  let nodes = tokenGroup.append('g')\n    .attr('class', 'node-group')\n    .selectAll('g')\n    .data(tokens)\n    .join('g')\n    .attr('class', d => {\n      let cls = `node node-${d.id}`;\n      if (wordToSubwordMap[d.token] !== undefined) {\n        wordToSubwordMap[d.token].forEach(n => {\n          cls += ` node-${n}`;\n        });\n      }\n      return cls;\n    })\n    .attr('id', d => `node-${d.id}`)\n    .attr('data-id', d => d.id)\n    .attr('transform', (d, i) => `translate(${tokenXs[i]}, ${0})`)\n    .on('mouseover', tokenNodeMouseover)\n    .on('mouseleave', tokenNodeMouseleave);\n\n  nodes.append('rect')\n    .attr('width', (d, i) => textTokenWidths[i] + textTokenPadding.left + textTokenPadding.right)\n    .attr('height', textTokenHeight + textTokenPadding.top + textTokenPadding.bottom)\n    .attr('rx', 5);\n\n  nodes.append('text')\n    .attr('class', 'text-token-arc')\n    .attr('x', textTokenPadding.left)\n    .attr('y', textTokenPadding.top + 2)\n    .style('pointer-events', 'none')\n    .text(d => d.token);\n\n  // Compute dependency link hierarchy based on the gaps between two tokens\n  let rankedDepList = [];\n\n  depList.forEach(d => {\n    let gap = Math.abs(d.child - d.parent);\n\n    // Compute the middle point of the link for adding the text later\n    let middleX = undefined;\n    let sourceX = undefined;\n    let targetX = undefined;\n\n    if (d.parent < d.child) {\n      sourceX = tokenXs[d.parent] + textTokenPadding.left + textTokenPadding.right\n        + textTokenWidths[d.parent] - 5;\n      targetX = tokenXs[d.child] + 5;\n\n      middleX = sourceX + (targetX - sourceX) / 2;\n    } else {\n      sourceX = tokenXs[d.parent] + 5;\n      targetX = tokenXs[d.child] + textTokenPadding.left + textTokenPadding.right\n        + textTokenWidths[d.child] - 5;\n\n      middleX = targetX + (sourceX - targetX) / 2;\n    }\n\n    d.sourceX = sourceX;\n    d.targetX = targetX;\n    d.middleX = Number.isNaN(middleX) ? 0 : middleX;\n    d.gap = gap;\n\n    rankedDepList.push(d);\n  });\n\n  rankedDepList.sort((a, b) => a.gap - b.gap);\n\n  // Need to pre-fill 1 because the first level (line) is reserved for\n  // consecutive tokens only\n  let tokenRelCount = Array(tokens.length).fill(1);\n  let rankedDepMap = {};\n\n  // Rank the dependency based on token's dependency count\n  rankedDepList.forEach(d => {\n    if (d.relation !== 'root') {\n      let iLow = Math.min(d.child, d.parent);\n      let iHigh = Math.max(d.child, d.parent);\n      let curRank = tokenRelCount.slice(iLow, iHigh + 1).reduce((a, b) => Math.max(a, b));\n\n      tokenRelCount[Math.min(d.child, d.parent)] = curRank + 1;\n\n      if (rankedDepMap[curRank] === undefined) {\n        rankedDepMap[curRank] = [];\n      }\n\n      rankedDepMap[curRank].push(d);\n    }\n  });\n\n  let arcGroup = tokenGroup.append('g')\n    .attr('class', 'arc-group')\n    .attr('transform', `translate(0, ${textTokenHeight + textTokenPadding.top + textTokenPadding.bottom})`);\n\n  Object.keys(rankedDepMap).forEach((k, i) => {\n\n    arcGroup.append('g')\n      .attr('class', 'arc-group-path')\n      .selectAll(`path.arc-path-${i}`)\n      .data(rankedDepMap[k], d => `${d.parent}-${d.child}`)\n      .join('path')\n      .attr('class', d => {\n        let cls = `arc-path arc-path-${i} arc-path-${tokens[d.parent].id}-${tokens[d.child].id}`;\n        if (wordToSubwordMap[tokens[d.parent].token] !== undefined) {\n          wordToSubwordMap[tokens[d.parent].token].forEach(n => {\n            cls += ` arc-path-${n}-${tokens[d.child].id}`;\n          });\n        }\n        if (wordToSubwordMap[tokens[d.child].token] !== undefined) {\n          wordToSubwordMap[tokens[d.child].token].forEach(n => {\n            cls += ` arc-path-${tokens[d.parent].id}-${n}`;\n          });\n        }\n        return cls;\n      })\n      .classed('arc-path--lr', d => d.parent < d.child)\n      .classed('arc-path--rl', d => d.parent > d.child)\n      .attr('id', d => `arc-path-${tokens[d.parent].id}-${tokens[d.child].id}`)\n      // .attr('marker-end', 'url(#dep-arrow)')\n      .attr('d', d => {\n        let sourceX = d.sourceX;\n        let targetX = d.targetX;\n\n        let pathHeight = 15 * (i + 1);\n        // Special case for tokens that are next to each other\n        let pathCurve = i === 0 ? 5 : 15;\n\n        // Compute the control points and middle points\n        let vertical1 = {\n          x: sourceX,\n          y: pathHeight - pathCurve\n        };\n\n        let control1 = {\n          x: sourceX < targetX ? sourceX + 0 : sourceX - 0,\n          y: pathHeight\n        };\n\n        let mid1 = {\n          x: sourceX < targetX ? sourceX + pathCurve : sourceX - pathCurve,\n          y: pathHeight\n        };\n\n        let mid2 = {\n          x: sourceX < targetX ? targetX - pathCurve : targetX + pathCurve,\n          y: pathHeight\n        };\n\n        let control2 = {\n          x: sourceX < targetX ? targetX - 0 : targetX + 0,\n          y: pathHeight\n        };\n\n        let vertical2 = {\n          x: targetX,\n          y: pathHeight - pathCurve\n        };\n\n        return `M${sourceX} ${0}\n            L${vertical1.x} ${vertical1.y}\n            Q${control1.x} ${control1.y}, ${mid1.x} ${mid1.y}\n            L${mid2.x} ${mid2.y}\n            Q${control2.x} ${control2.y}, ${vertical2.x} ${vertical2.y}\n            L${targetX} ${3}`;\n      });\n\n    arcGroup.append('g')\n      .attr('class', 'arc-group-text')\n      .selectAll(`text.arc-path-text-${i}`)\n      .data(rankedDepMap[k], d => `${d.parent}-${d.child}`)\n      .join('text')\n      .attr('class', d => {\n        let cls = `arc-text arc-path-text-${i} arc-path-text-${tokens[d.parent].id}-${tokens[d.child].id}`;\n        if (wordToSubwordMap[tokens[d.parent].token] !== undefined) {\n          wordToSubwordMap[tokens[d.parent].token].forEach(n => {\n            cls += ` arc-path-text-${n}-${tokens[d.child].id}`;\n          });\n        }\n        if (wordToSubwordMap[tokens[d.child].token] !== undefined) {\n          wordToSubwordMap[tokens[d.child].token].forEach(n => {\n            cls += ` arc-path-text-${tokens[d.parent].id}-${n}`;\n          });\n        }\n        return cls;\n      })\n      .attr('x', d => d.middleX)\n      .attr('y', 15 * (i + 1) - 1)\n      .text(d => d.relation === 'root' ? '' : d.relation)\n      .clone(true)\n      .lower()\n      .attr('class', `arc-text arc-path-text-${i} shadow`)\n      .attr('stroke-width', 5)\n      .attr('stroke', 'white');\n\n    arcGroup.selectAll('.arc-group-path').lower();\n\n  });\n\n  return { tokenXs: tokenXs, textTokenWidths: textTokenWidths};\n};","import * as d3 from 'd3';\nimport { tokenIDName, isSpecialToken, updateSVGWidth, round } from './utils.js';\nimport { modalStore, attentionHeadColorStore, hoverTokenStore } from '../store';\n\nlet isMoved = {};\nlet modalInfo = {};\n\nmodalStore.subscribe(value => { modalInfo = value; });\n\nlet attentionHeadColor = new Map();\nattentionHeadColorStore.subscribe(value => { attentionHeadColor = value; });\n\n/**\n * Create a dependency graph list using the attention data. For each token,\n * we uses the token it most attends to as the dependency target. Since some\n * tokens are split into sub-words, we need to carefully handle this case. We\n * take sum of their out-attentions, and mean of their in-attentions.\n * @param {number} layer\n * @param {number} head \n * @param {number} threshold Only count attention's predicted dependency if the\n *  attention is above this threshold\n */\nconst getDependencyListFromAttention = (layer, head, attentions, data,\n  saliencies, threshold=0.02) => {\n  let curAttention = attentions[layer][head];\n\n  // Create a mapping between original words and sub-words\n  let wordToSubwordIndexes = new Map();\n  let attentionIndexToWord = new Map();\n  let tokens = data.words.map(d => { return { 'token': d }; });\n\n  let j = 0;\n  while (isSpecialToken(saliencies.tokens[j].token)) {\n    j += 1;\n  }\n\n  for (let i = 0; i < tokens.length; i++) {\n    let curWord = tokens[i].token;\n\n    let curToken = saliencies.tokens[j].token;\n\n    if (curWord !== curToken) {\n      let curIndexes = [];\n      let nextWord = i + 1 < tokens.length ? tokens[i + 1].token : null;\n\n      while (saliencies.tokens[j].token !== nextWord) {\n        curIndexes.push(j);\n        attentionIndexToWord.set(j, i);\n        j += 1;\n      }\n      wordToSubwordIndexes.set(curIndexes[0], curIndexes);\n    } else {\n      attentionIndexToWord.set(j, i);\n      j += 1;\n    }\n  }\n\n  // Track the max attention\n  let maxAttentionMap = [];\n\n  // Iterate through the attention matrix row\n  for (let i = 0; i < saliencies.tokens.length; i++) {\n\n    // Skip the special token\n    if (isSpecialToken(saliencies.tokens[i].token)) continue;\n\n    let curMaxWord = null;\n    let curMaxAttention = -1;\n\n    // Iterate through the columns in this row\n    let curRow = curAttention[i];\n\n    // Check if the current row is a sub-word; if so we need to take mean of\n    // all associated sub-words\n    if (wordToSubwordIndexes.has(i)) {\n      let subWordIndexes = wordToSubwordIndexes.get(i);\n      for (let w = 0; w < curRow.length; w++) {\n        let curSum = 0;\n        for (let ws = 0; ws < subWordIndexes.length; ws++) {\n          curSum += curAttention[ws][w];\n        }\n        curRow[w] = curSum / subWordIndexes.length;\n      }\n\n      // Skip the following sub-words for the iteration on i\n      i = subWordIndexes[subWordIndexes.length - 1];\n    }\n\n    for (let j = 0; j < saliencies.tokens.length; j++) {\n      // Skip the special token\n      if (isSpecialToken(saliencies.tokens[j].token)) continue;\n\n      let curWordAttention = 0;\n\n      // Check if the current column is a sub-word\n      if (wordToSubwordIndexes.has(j)) {\n        // Take sum of all sub-words\n        wordToSubwordIndexes.get(j).forEach(s => {\n          j = s;\n          curWordAttention += curRow[j];\n        });\n      } else {\n        curWordAttention = curRow[j];\n      }\n\n      if (curWordAttention > curMaxAttention) {\n        curMaxWord = attentionIndexToWord.get(j);\n        curMaxAttention = curWordAttention;\n      }\n\n    }\n\n    if (curMaxAttention > threshold) {\n      maxAttentionMap.push({ parent: attentionIndexToWord.get(i), child: curMaxWord });\n    }\n\n  }\n\n  return maxAttentionMap;\n};\n\nconst createRankedDepMap = (maxAttentionLinks, tokenXs, textTokenPadding, textTokenWidths) => {\n  // Compute dependency link hierarchy based on the gaps between two tokens\n  let rankedDepList = [];\n\n  maxAttentionLinks.forEach(d => {\n    let gap = Math.abs(d.child - d.parent);\n\n    // Compute the middle point of the link for adding the text later\n    let middleX = undefined;\n    let sourceX = undefined;\n    let targetX = undefined;\n\n    if (d.parent < d.child) {\n      sourceX = tokenXs[d.parent] + textTokenPadding.left + textTokenPadding.right\n        + textTokenWidths[d.parent] - 5;\n      targetX = tokenXs[d.child] + 5;\n\n      middleX = sourceX + (targetX - sourceX) / 2;\n    } else {\n      sourceX = tokenXs[d.parent] + 5;\n      targetX = tokenXs[d.child] + textTokenPadding.left + textTokenPadding.right\n        + textTokenWidths[d.child] - 5;\n\n      middleX = targetX + (sourceX - targetX) / 2;\n    }\n\n    d.sourceX = round(sourceX, 3);\n    d.targetX = round(targetX, 3);\n    d.middleX = Number.isNaN(middleX) ? 0 : middleX;\n    d.gap = gap;\n\n    rankedDepList.push(d);\n  });\n\n  rankedDepList.sort((a, b) => a.gap - b.gap);\n\n  // Need to pre-fill 1 because the first level (line) is reserved for\n  // consecutive tokens only\n  let tokenRelCount = Array(Object.keys(tokenXs).length).fill(1);\n  let rankedDepMap = {};\n\n  // Rank the dependency based on token's dependency count\n  rankedDepList.forEach(d => {\n\n    let iLow = Math.min(d.child, d.parent);\n    let iHigh = Math.max(d.child, d.parent);\n\n    if (iLow !== iHigh) {\n      let curRank = tokenRelCount.slice(iLow, iHigh).reduce((a, b) => Math.max(a, b));\n\n      for (let i = iLow; i < iHigh; i++) {\n        tokenRelCount[i] = curRank + 1;\n      }\n      //tokenRelCount[Math.min(d.child, d.parent)] = curRank + 1;\n\n      if (rankedDepMap[curRank] === undefined) {\n        rankedDepMap[curRank] = [];\n      }\n\n      rankedDepMap[curRank].push(d);\n    }\n  });\n\n  return rankedDepMap;\n};\n\nconst drawBottomDependencyLine = (rankedDepMap, attentionGroup, tokenHeight,\n  firstRow, existingLinkSet, wordToSubwordMap, tokens) => {\n\n  Object.keys(rankedDepMap).forEach((k, i) => {\n\n    attentionGroup.append('g')\n      .attr('class', 'attention-group-path')\n      .selectAll(`path.attention-path-${i}`)\n      .data(rankedDepMap[k], d => `${d.parent}-${d.child}`)\n      .join('path')\n      .attr('class', d => {\n        let cls = `attention-path attention-path-${i} attention-path-${tokens[d.parent].id}-${tokens[d.child].id}`;\n        if (wordToSubwordMap[tokens[d.parent].token] !== undefined) {\n          wordToSubwordMap[tokens[d.parent].token].forEach(n => {\n            cls += ` attention-path-${n}-${tokens[d.child].id}`;\n          });\n        }\n        if (wordToSubwordMap[tokens[d.child].token] !== undefined) {\n          wordToSubwordMap[tokens[d.child].token].forEach(n => {\n            cls += ` attention-path-${tokens[d.parent].id}-${n}`;\n          });\n        }\n        return cls;\n      })\n      .classed('matched-attention-path', d => existingLinkSet.has(String([d.parent, d.child])))\n      .classed('attention-path--lr', d => d.parent < d.child)\n      .classed('attention-path--rl', d => d.parent > d.child)\n      // .attr('marker-end', 'url(#dep-attention-arrow)')\n      .style('width', 0.5)\n      .attr('d', d => {\n        let sourceX = d.sourceX;\n        let targetX = d.targetX;\n        let baseY = firstRow ? 0 : tokenHeight;\n\n        let pathHeight = 5 * (i + 1);\n        let pathCurve = i === 0 ? 4 : 7;\n\n        // Compute the control points and middle points\n        let vertical1 = {\n          x: sourceX,\n          y: baseY + pathHeight - pathCurve\n        };\n\n        let control1 = {\n          x: sourceX < targetX ? sourceX + 0 : sourceX - 0,\n          y: baseY + pathHeight\n        };\n\n        let mid1 = {\n          x: sourceX < targetX ? sourceX + pathCurve : sourceX - pathCurve,\n          y: baseY + pathHeight\n        };\n\n        let mid2 = {\n          x: sourceX < targetX ? targetX - pathCurve : targetX + pathCurve,\n          y: baseY + pathHeight\n        };\n\n        let control2 = {\n          x: sourceX < targetX ? targetX - 0 : targetX + 0,\n          y: baseY + pathHeight\n        };\n\n        let vertical2 = {\n          x: targetX,\n          y: baseY + pathHeight - pathCurve\n        };\n\n        return `M${sourceX} ${baseY}\n            L${vertical1.x} ${vertical1.y}\n            Q${control1.x} ${control1.y}, ${mid1.x} ${mid1.y}\n            L${mid2.x} ${mid2.y}\n            Q${control2.x} ${control2.y}, ${vertical2.x} ${vertical2.y}\n            L${targetX} ${baseY}`;\n      });\n\n  });\n};\n\n\nconst getWordAttention = (layer, head, attentions, data, saliencies,\n  threshold = 0.02) => {\n  let curAttention = attentions[layer][head];\n\n  // Create a mapping between original words and sub-words\n  let wordToSubwordIndexes = new Map();\n  let attentionIndexToWord = new Map();\n  let tokens = data.words.map(d => { return { 'token': d }; });\n\n  let j = 0;\n  while (isSpecialToken(saliencies.tokens[j].token)) {\n    j += 1;\n  }\n\n  for (let i = 0; i < tokens.length; i++) {\n    let curWord = tokens[i].token;\n\n    let curToken = saliencies.tokens[j].token;\n\n    if (curWord !== curToken) {\n      let curIndexes = [];\n      let nextWord = i + 1 < tokens.length ? tokens[i + 1].token : null;\n\n      while (saliencies.tokens[j].token !== nextWord) {\n        curIndexes.push(j);\n        attentionIndexToWord.set(j, i);\n        j += 1;\n      }\n      wordToSubwordIndexes.set(curIndexes[0], curIndexes);\n    } else {\n      attentionIndexToWord.set(j, i);\n      j += 1;\n    }\n  }\n\n  // Track the attentions\n  let attentionMap = [];\n\n  // Iterate through the attention matrix row\n  for (let i = 0; i < saliencies.tokens.length; i++) {\n\n    // Skip the special token\n    if (isSpecialToken(saliencies.tokens[i].token)) continue;\n\n    // Iterate through the columns in this row\n    let curRow = curAttention[i];\n\n    // Check if the current row is a sub-word; if so we need to take mean of\n    // all associated sub-words\n    if (wordToSubwordIndexes.has(i)) {\n      let subWordIndexes = wordToSubwordIndexes.get(i);\n      for (let w = 0; w < curRow.length; w++) {\n        let curSum = 0;\n        for (let ws = 0; ws < subWordIndexes.length; ws++) {\n          curSum += curAttention[ws][w];\n        }\n        curRow[w] = curSum / subWordIndexes.length;\n      }\n\n      // Skip the following sub-words for the iteration on i\n      i = subWordIndexes[subWordIndexes.length - 1];\n    }\n\n    for (let j = 0; j < saliencies.tokens.length; j++) {\n      // Skip the special token\n      if (isSpecialToken(saliencies.tokens[j].token)) continue;\n\n      let curWordAttention = 0;\n\n      // Check if the current column is a sub-word\n      if (wordToSubwordIndexes.has(j)) {\n        // Take sum of all sub-words\n        wordToSubwordIndexes.get(j).forEach(s => {\n          j = s;\n          curWordAttention += curRow[j];\n        });\n      } else {\n        curWordAttention = curRow[j];\n      }\n\n      if (curWordAttention > threshold) {\n        let curWord = attentionIndexToWord.get(j);\n        attentionMap.push({\n          parent: attentionIndexToWord.get(i),\n          child: curWord,\n          attention: curWordAttention\n        });\n      }\n    }\n  }\n\n  return attentionMap;\n};\n\n\nconst createAttentionArcs = (attentionArcs, tokenXs, textTokenPadding, textTokenWidths) => {\n\n  let arcs = [];\n\n  attentionArcs.forEach(d => {\n    let gap = Math.abs(d.child - d.parent);\n\n    let sourceX = tokenXs[d.parent] + textTokenPadding.left + textTokenWidths[d.parent] / 2;\n    let targetX = tokenXs[d.child] + textTokenPadding.left + textTokenWidths[d.child] / 2;\n\n    d.sourceX = round(sourceX, 3);\n    d.targetX = round(targetX, 3);\n    d.gap = gap;\n\n    arcs.push(d);\n  });\n\n  return arcs;\n};\n\nconst drawAttentionArc = (attentionArcs, attentionGroup, attentionGroupID, wordToSubwordMap,\n  tokens, minHeight=5, maxHeight=70) => {\n  let arcYScale = d3.scaleLinear()\n    .domain(d3.extent(attentionArcs.map(d => Math.abs(d.parent - d.child))))\n    .range([minHeight, maxHeight]);\n\n  let arcOpacityScale = d3.scaleLinear()\n    .domain(d3.extent(attentionArcs.map(d => d.attention)))\n    .range([0.1, 0.6]);\n\n  let arcWidthScale = d3.scaleLinear()\n    .domain(d3.extent(attentionArcs.map(d => d.attention)))\n    .range([0.2, 2]);\n\n  // Draw the arc diagram on top of the tokens\n  attentionGroup.append('g')\n    .attr('class', `attention-group-arc attention-group-arc-${attentionGroupID}`)\n    .style('opacity', 0)\n    .style('display', 'none')\n    .style('pointer-events', 'none')\n    .selectAll(`path.attention-arc-${attentionGroupID}`)\n    .data(attentionArcs, d => `${d.parent}-${d.child}`)\n    .join('path')\n    .attr('class', `attention-arc attention-arc-${attentionGroupID}`)\n    .attr('class', d => {\n      let cls = `attention-arc attention-arc-${tokens[d.parent].id}-${tokens[d.child].id}`;\n      if (wordToSubwordMap[tokens[d.parent].token] !== undefined) {\n        wordToSubwordMap[tokens[d.parent].token].forEach(n => {\n          cls += ` attention-arc-${n}-${tokens[d.child].id}`;\n        });\n      }\n      if (wordToSubwordMap[tokens[d.child].token] !== undefined) {\n        wordToSubwordMap[tokens[d.child].token].forEach(n => {\n          cls += ` attention-arc-${tokens[d.parent].id}-${n}`;\n        });\n      }\n      return cls;\n    })\n    .classed('attention-arc--lr', d => d.parent <= d.child)\n    .classed('attention-arc--rl', d => d.parent > d.child)\n    // .attr('marker-end', 'url(#dep-attention-arc-arrow)')\n    .style('width', d => arcWidthScale(d.attention))\n    // .style('opacity', d => arcOpacityScale(d.attention))\n    .style('opacity', 0.5)\n    .attr('d', d => {\n      let sourceX = d.sourceX;\n      let targetX = d.targetX;\n      let xr = Math.abs((targetX - sourceX) / 2);\n      let yr = arcYScale(Math.abs(d.parent - d.child));\n      yr = Math.min(yr, xr);\n\n      if (d.parent == d.child) {\n        let curve = 5;\n        let height = 10;\n        // Draw the self-loop curve\n        // Hack: add a super short line segment to force the slope of end-marker\n        return `M ${sourceX} ${0}\n            C ${sourceX} ${0}, ${sourceX - curve} ${-height}, ${sourceX} ${-height}\n            C ${sourceX + curve} ${-height}, ${sourceX} ${0}, ${sourceX} ${-1}\n            L ${sourceX} ${0}`;\n      } else {\n        return `M ${sourceX} ${0}\n            A ${xr} ${yr}, 0, 0, ${sourceX < targetX ? 1 : 0} ${targetX}, ${0}`;\n      }\n    });\n};\n\nconst radialButtonClicked = (e, attentions, tokens, layer, head) => {\n\n  if (!modalInfo.show) {\n    modalInfo.show = true;\n    modalInfo.attention = attentions[layer][head];\n    modalInfo.tokens = tokens;\n    modalInfo.layer = layer;\n    modalInfo.head = head;\n    modalStore.set(modalInfo);\n\n    d3.selectAll('.radial-symbol')\n      .select('rect')\n      .classed('disabled', true);\n\n    d3.select(e.target)\n      .classed('disabled', false)\n      .classed('symbol-highlight', true);\n  }\n};\n\nexport const resetRadialButtons = () => {\n  d3.selectAll('.radial-symbol')\n    .select('rect')\n    .classed('disabled', false)\n    .classed('symbol-highlight', false)\n    .style('fill', 'white')\n    .style('stroke', 'hsl(28, 7%, 60%)');\n};\n\nconst arcButtonClicked = (e) => {\n  let nameGroup = d3.select(e.target.parentNode.parentNode.parentNode);\n  let rowNum = d3.selectAll('.attention-group').size();\n  let curID = +nameGroup.attr('class').replace(/.*name-group-(\\d*).*/, '$1');\n\n  const moveY = (d, i, g, distance) => {\n    let curItem = d3.select(g[i]);\n    let oldTranslateX = +curItem.attr('transform')\n      .replace(/translate\\((.*),\\s.*\\)/, '$1');\n    let oldTranslateY = +curItem.attr('transform')\n      .replace(/translate\\(.*,\\s(.*)\\)/, '$1');\n    return `translate(${oldTranslateX}, ${oldTranslateY + distance})`;\n  };\n\n  d3.select('.blocker').raise();\n  d3.select('.original-node-group').raise();\n  d3.select('.arc-group').raise();\n\n  d3.select(e.target).classed('symbol-highlight', isMoved[curID] == null);\n\n\n  if (isMoved[curID] == null) {\n    // Move the groups below if it is in the first half\n    if (curID < Math.floor(rowNum / 2)) {\n      d3.selectAll('.attention-group')\n        .filter(d => d >= curID)\n        .transition('moveY')\n        .duration(500)\n        .ease(d3.easeCubicInOut)\n        .attr('transform', (d, i, g) => moveY(d, i, g, 70));\n\n      d3.selectAll('.name-group')\n        .filter(d => d >= curID)\n        .transition('moveY')\n        .duration(500)\n        .ease(d3.easeCubicInOut)\n        .attr('transform', (d, i, g) => moveY(d, i, g, 70));\n\n      isMoved[curID] = 'down';\n    } else {\n      // Move the groups above if it is in the second half\n      d3.selectAll('.attention-group')\n        .filter(d => d < curID)\n        .transition('moveY')\n        .duration(500)\n        .ease(d3.easeCubicInOut)\n        .attr('transform', (d, i, g) => moveY(d, i, g, -70));\n\n      d3.selectAll('.name-group')\n        .filter(d => d < curID)\n        .transition('moveY')\n        .duration(500)\n        .ease(d3.easeCubicInOut)\n        .attr('transform', (d, i, g) => moveY(d, i, g, -70));\n\n      isMoved[curID] = 'up';\n    }\n\n    // Add label\n    nameGroup.append('text')\n      .attr('class', 'arc-label name')\n      .attr('x', -8)\n      .attr('y', -15)\n      .style('fill', 'hsl(0, 0%, 60%)')\n      .text('Attention Weights');\n\n    // Show the arc diagram\n    d3.select(`.attention-group-arc-${curID}`)\n      .style('display', null)\n      .transition('opacity')\n      .delay(200)\n      .duration(300)\n      .ease(d3.easeCubicInOut)\n      .style('opacity', 1);\n\n  } else {\n\n    // Hide the arc diagram\n    d3.select(`.attention-group-arc-${curID}`)\n      .transition('opacity')\n      .duration(500)\n      .ease(d3.easeCubicInOut)\n      .style('opacity', 0)\n      .on('end', (d, i, g) => {\n        d3.select(g[i]).style('display', 'none');\n        // Remove label\n        nameGroup.select('.arc-label').remove();\n      });\n\n    // Restore the movement\n    if (isMoved[curID] === 'down') {\n      d3.selectAll('.attention-group')\n        .filter(d => d >= curID)\n        .transition('moveY')\n        .duration(500)\n        .ease(d3.easeCubicInOut)\n        .attr('transform', (d, i, g) => moveY(d, i, g, -70));\n\n      d3.selectAll('.name-group')\n        .filter(d => d >= curID)\n        .transition('moveY')\n        .duration(500)\n        .ease(d3.easeCubicInOut)\n        .attr('transform', (d, i, g) => moveY(d, i, g, -70));\n      \n      isMoved[curID] = null;\n\n    } else if (isMoved[curID] === 'up') {\n      d3.selectAll('.attention-group')\n        .filter(d => d < curID)\n        .transition('moveY')\n        .duration(500)\n        .ease(d3.easeCubicInOut)\n        .attr('transform', (d, i, g) => moveY(d, i, g, 70));\n\n      d3.selectAll('.name-group')\n        .filter(d => d < curID)\n        .transition('moveY')\n        .duration(500)\n        .ease(d3.easeCubicInOut)\n        .attr('transform', (d, i, g) => moveY(d, i, g, 70));\n\n      isMoved[curID] = null;\n    } else {\n      console.error('Unknown case!');\n    }\n  }\n\n};\n\nconst addButtons = (nameGroup, attentions, tokens, layer, head) => {\n  const rectX = 16;\n  const rectY = 19;\n\n  const symbolMouseover = (e) => {\n    let button = d3.select(e.target);\n\n    if (!button.classed('disabled')) {\n      d3.select(e.target)\n        .style('fill', 'hsla(0, 0%, 0%, 0.2)')\n        .style('stroke', 'hsl(28, 7%, 20%)');\n    }\n  };\n\n  const symbolMouseleave = (e) => {\n    let button = d3.select(e.target);\n\n    if (!button.classed('symbol-highlight')) {\n      d3.select(e.target)\n        .style('fill', 'white')\n        .style('stroke', 'hsl(28, 7%, 60%)');\n    }\n  };\n\n  let symbolGroup = nameGroup.append('g')\n    .attr('class', 'symbol-group')\n    .attr('transform', `translate(${rectX}, ${rectY})`);\n\n  let radialSymbol = symbolGroup.append('g')\n    .attr('class', 'radial-symbol')\n    .attr('transform', `translate(${0}, ${0})`);\n\n  radialSymbol.append('rect')\n    .attr('class', 'comparison-svg-button')\n    .attr('width', 20)\n    .attr('height', 20)\n    .attr('rx', 3)\n    .style('fill', 'white')\n    .style('stroke', 'hsl(28, 7%, 60%)')\n    .style('stroke-width', 1)\n    .on('mouseover', symbolMouseover)\n    .on('mouseleave', symbolMouseleave)\n    .on('click', e => radialButtonClicked(e, attentions, tokens, layer, head));\n\n  radialSymbol.append('image')\n    .attr('href', 'PUBLIC_URL/figures/radial-symbol.svg')\n    .attr('x', 2)\n    .attr('y', 2)\n    .attr('height', 16)\n    .attr('width', 16)\n    .style('pointer-events', 'none');\n\n  let arcSymbol = radialSymbol.clone(true)\n    .attr('class', 'arc-symbol')\n    .attr('transform', `translate(${30}, ${0})`);\n\n  arcSymbol.select('rect')\n    .on('mouseover', symbolMouseover)\n    .on('mouseleave', symbolMouseleave)\n    .on('click', arcButtonClicked);\n\n  arcSymbol.select('image')\n    .attr('href', 'PUBLIC_URL/figures/arc-symbol.svg');\n\n};\n\nexport const removeDependencyComparison = (svg) => {\n\n  let oldTranslate = svg.select('.token-group')\n    .attr('transform');\n  let oldTranslateX = +oldTranslate.replace(/translate\\((.*),\\s.*\\)/, '$1');\n  let oldTranslateY = +oldTranslate.replace(/translate\\(.*,\\s(.*)\\)/, '$1');\n\n  // Update the svg width before moving\n  let moveX = 100;\n  updateSVGWidth(svg, +svg.attr('width') - moveX);\n\n  svg.selectAll('.blocker').remove();\n\n  svg.select('.token-group')\n    .transition('move-x')\n    .duration(500)\n    .ease(d3.easeCubicInOut)\n    .attr('transform', `translate(${oldTranslateX - moveX}, ${oldTranslateY})`);\n\n  // Remove the added elements\n  svg.select('.comparison-head-name-group').remove();\n  svg.selectAll('.attention-group').remove();\n\n  // Hide the text label\n  d3.select('.comparison-panel-container')\n    .classed('hide', true);\n};\n\nexport const drawDependencyComparison = (topHeads, svg, SVGPadding, data, attentions,\n  saliencies, SVGHeight, existingLinkSet, tokenXs, textTokenPadding, textTokenWidths,\n  wordToSubwordMap, initWordToSubwordMap) => {\n\n  const attentionRowGap = 10;\n  let tokens = saliencies.tokens.map(d => { return { 'token': d.token }; });\n\n  // Need to split the original words into sub-words if applicable\n  let depTokens = data.words.map(d => { return { 'token': d }; });\n\n  // Give each saliency token a unique name\n  if (saliencies.tokens[0].id === undefined) {\n    let tokenCount = {};\n    saliencies.tokens.forEach(d => {\n      let curCount = 0;\n      if (tokenCount[d.token] === undefined) {\n        tokenCount[d.token] = curCount + 1;\n      } else {\n        curCount = tokenCount[d.token];\n        tokenCount[d.token] += 1;\n      }\n      d.id = `${tokenIDName(d.token)}-${curCount}`;\n    });\n  }\n\n  if (wordToSubwordMap == null) {\n    wordToSubwordMap = initWordToSubwordMap(depTokens, saliencies);\n  }\n  // console.log(wordToSubwordMap);\n\n  // Give each saliency token a unique name\n  let tokenCount = {};\n  depTokens.forEach(d => {\n    let curCount = 0;\n    if (tokenCount[d.token] === undefined) {\n      tokenCount[d.token] = curCount + 1;\n    } else {\n      curCount = tokenCount[d.token];\n      tokenCount[d.token] += 1;\n    }\n    d.id = `${tokenIDName(d.token)}-${curCount}`;\n  });\n\n  let oldTranslate = svg.select('.token-group')\n    .attr('transform');\n  let oldTranslateX = +oldTranslate.replace(/translate\\((.*),\\s.*\\)/, '$1');\n  let oldTranslateY = +oldTranslate.replace(/translate\\(.*,\\s(.*)\\)/, '$1');\n\n  // Update the svg width before moving\n  let moveX = 100;\n  updateSVGWidth(svg, +svg.attr('width') + moveX);\n\n  let headNameGroup = svg.append('g')\n    .attr('class', 'comparison-head-name-group')\n    .attr('transform', `translate(${SVGPadding.left},\n      ${SVGPadding.top + textTokenPadding.top + 4})`)\n    .style('opacity', 0);\n  \n  headNameGroup.transition('')\n    .duration(500)\n    .ease(d3.easeCubicInOut)\n    .style('opacity', 1);\n\n  let tokenGroup = svg.select('.token-group')\n    .transition('move-x')\n    .duration(500)\n    .ease(d3.easeCubicInOut)\n    .attr('transform', `translate(${oldTranslateX + moveX}, ${oldTranslateY})`)\n    .on('end', () => {\n      // Draw top gradient overlay\n      tokenGroup = svg.select('.token-group');\n\n      tokenGroup.append('rect')\n        .attr('class', 'blocker')\n        .attr('id', 'top-blocker')\n        .attr('x', 0)\n        .attr('y', 0)\n        .attr('width', +svg.attr('width'))\n        .attr('height', controlPanelY - 5)\n        .style('fill', 'url(#top-opacity-gradient)');\n\n      svg.append('rect')\n        .attr('class', 'blocker')\n        .attr('id', 'top-left-blocker')\n        .attr('x', 0)\n        .attr('y', 0)\n        .attr('width', moveX)\n        .attr('height', controlPanelY + 5)\n        .style('fill', 'url(#top-opacity-gradient)');\n\n      tokenGroup.append('rect')\n        .attr('class', 'blocker')\n        .attr('id', 'bottom-blocker')\n        .attr('x', 0)\n        .attr('y', SVGHeight - 10)\n        .attr('width', +svg.attr('width'))\n        .attr('height', 10)\n        .style('fill', 'url(#bottom-opacity-gradient)');\n\n      svg.append('rect')\n        .attr('class', 'blocker')\n        .attr('id', 'bottom-left-blocker')\n        .attr('x', 0)\n        .attr('y', SVGHeight - 10)\n        .attr('width', moveX)\n        .attr('height', 10)\n        .style('fill', 'url(#bottom-opacity-gradient)');\n\n      tokenGroup.select('.node-group').raise();\n      tokenGroup.select('.arc-group').raise();\n    });\n\n  let tokenHeight = tokenGroup.select('.node')\n    .node()\n    .getBBox()\n    .height;\n\n  let oldNodeGroupHeight = svg.select('.node-group')\n    .node()\n    .getBBox()\n    .height;\n\n  let arcGroupHeight = svg.select('.arc-group')\n    .node()\n    .getBBox()\n    .height;\n\n  // Make the control panel for comparison view visible\n  let controlPanelY = +d3.select('.graph-view .svg-container')\n    .style('top')\n    .replace(/(.*)px/, '$1');\n  controlPanelY += arcGroupHeight + oldNodeGroupHeight + SVGPadding.top + 10;\n\n  d3.select('.comparison-panel-container')\n    .style('top', `${controlPanelY}px`)\n    .classed('hide', false);\n\n  // Draw the first row\n  let attentionGroupID = 0;\n\n  // Get the dependency list\n  let maxAttentionLinks = getDependencyListFromAttention(topHeads[0].id.layer,\n    topHeads[0].id.head, attentions, data, saliencies);\n\n  // Draw the second+ rows\n  let newTranslateY = 0;\n  let attentionGroup = null;\n\n  while (attentionGroupID < topHeads.length) {\n    let preTranslateY = 0;\n    let preHeight = 0;\n\n    if (attentionGroupID === 0){\n      // TODO remove here\n      newTranslateY = arcGroupHeight + oldNodeGroupHeight + 50;\n      // newTranslateY = arcGroupHeight + oldNodeGroupHeight + 200;\n    } else {\n      preTranslateY = +svg.select(`#attention-group-${attentionGroupID - 1}`)\n        .attr('transform')\n        .replace(/translate\\(.*,\\s(.*)\\)/, '$1');\n\n      preHeight = svg.select(`#attention-group-${attentionGroupID - 1}`)\n        .node().getBBox().height;\n\n      newTranslateY = preTranslateY + preHeight + tokenHeight + attentionRowGap;\n    }\n\n    attentionGroup = svg.select('.token-group')\n      .append('g')\n      .datum(attentionGroupID)\n      .attr('class', 'attention-group')\n      .attr('id', `attention-group-${attentionGroupID}`)\n      .attr('transform', `translate(0, ${newTranslateY})`)\n      .style('visibility', 'hidden');\n    \n    isMoved[attentionGroupID] = null;\n\n    // Copy the node group\n    let newGroup = svg.select('.token-group')\n      .select('.node-group')\n      .classed('original-node-group', true)\n      .clone(true)\n      .classed('original-node-group', false)\n      .classed('node-group-attention', true);\n    \n    newGroup.selectAll('g.node')\n      .classed('node', false)\n      .classed('node-clone', true)\n      .on('mouseover', (e) => {\n        let nodeID = e.target.parentNode.dataset.id;\n        hoverTokenStore.set(nodeID);\n      })\n      .on('mouseleave', () => {\n        hoverTokenStore.set(null);\n      });\n    \n    newGroup.selectAll('rect')\n      .style('stroke', 'none');\n\n    attentionGroup.append(() => newGroup.node());\n\n    // Draw the dependencies\n    maxAttentionLinks = getDependencyListFromAttention(\n      topHeads[attentionGroupID].id.layer,\n      topHeads[attentionGroupID].id.head,\n      attentions, data, saliencies\n    );\n\n    let rankedDepMap = createRankedDepMap(maxAttentionLinks, tokenXs, textTokenPadding, textTokenWidths);\n\n    drawBottomDependencyLine(rankedDepMap, attentionGroup, tokenHeight, false,\n      existingLinkSet, wordToSubwordMap, depTokens);\n\n    let nameGroup = headNameGroup.append('g')\n      .datum(attentionGroupID)\n      .attr('class', `name-group name-group-${attentionGroupID}`)\n      .attr('transform', `translate(${0}, ${newTranslateY})`)\n      .style('visibility', 'hidden');\n\n    let color = attentionHeadColor.get([topHeads[attentionGroupID].id.layer,\n      topHeads[attentionGroupID].id.head].toString());\n    nameGroup.append('text')\n      .attr('class', 'name')\n      .style('fill', color)\n      .text(`layer ${topHeads[attentionGroupID].id.layer}\n          head ${topHeads[attentionGroupID].id.head}`);\n    \n    addButtons(nameGroup, attentions, tokens, topHeads[attentionGroupID].id.layer,\n      topHeads[attentionGroupID].id.head);\n\n    let curHeight = newTranslateY + svg.select(`#attention-group-${attentionGroupID}`)\n      .node().getBBox().height;\n\n    // Generate arcs based on attention scores\n    let HighAttention = getWordAttention(topHeads[0].id.layer,\n      topHeads[0].id.head, attentions, data, saliencies);\n    let attentionArcs = createAttentionArcs(HighAttention, tokenXs,\n      textTokenPadding, textTokenWidths);\n\n    drawAttentionArc(attentionArcs, attentionGroup, attentionGroupID,\n      wordToSubwordMap, depTokens);\n\n    if (curHeight + SVGPadding.bottom > SVGHeight) {\n      attentionGroup.remove();\n      nameGroup.remove();\n      // console.log(curHeight, attentionGroupID);\n      break;\n    } else {\n      attentionGroup.style('visibility', 'visible');\n      nameGroup.style('visibility', 'visible');\n      attentionGroupID += 1;\n      // TODO remove here\n      // break;\n    }\n  }\n\n};","<script>\n  import { onMount } from 'svelte';\n  import { modalStore, attentionHeadColorStore } from '../store';\n  import { getTokenWidth } from './utils';\n  import { resetRadialButtons } from './comparison-view';\n  import * as d3 from 'd3';\n\n  let modalComponent = null;\n  let svg = null;\n  let donut = null;\n  let svgVirtualLength = 500;\n  let svgLength = 480;\n\n  let modalInfo = {};\n  let markerDef = null;\n\n  let attentionHeadColor = new Map();\n  attentionHeadColorStore.subscribe(value => {attentionHeadColor = value;});\n\n  modalStore.set(modalInfo);\n  modalStore.subscribe(value => {\n    modalInfo = value;\n    if (modalInfo.attention != null) {\n      drawDonut(donut);\n    }\n  });\n\n  const crossClicked = () => {\n    modalInfo.show = false;\n    modalStore.set(modalInfo);\n\n    // Clean up the view\n    svg.select('.donut')\n      .selectAll('*')\n      .remove();\n    \n    // Reset buttons\n    resetRadialButtons();\n  };\n\n  const dragElement = (element) => {\n    let pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;\n    \n    const dragMouseDown = (e) => {\n      pos3 = e.clientX;\n      pos4 = e.clientY;\n\n      // Register events for mouse up and mouse move\n      document.onmouseup = closeDragElement;\n      document.onmousemove = elementDrag;\n    };\n\n    const elementDrag = (e) => {\n      // calculate the new cursor position:\n      pos1 = pos3 - e.clientX;\n      pos2 = pos4 - e.clientY;\n      pos3 = e.clientX;\n      pos4 = e.clientY;\n\n      // set the element's new position:\n      element.style.top = (element.offsetTop - pos2) + 'px';\n      element.style.left = (element.offsetLeft - pos1) + 'px';\n    };\n\n    const closeDragElement = () => {\n      // Restore the original mouse up and mouse move\n      document.onmouseup = null;\n      document.onmousemove = null;\n\n      // Remember the size and position\n      modalInfo.top = element.style.top;\n      modalInfo.left = element.style.left;\n      modalInfo.width = element.style.width;\n      modalInfo.height = element.style.height;\n    };\n\n    document.querySelector('.modal-card-head').onmousedown = dragMouseDown;\n  };\n\n  const drawDonut = (donut) => {\n    \n    // Restore the size and pos of the modal window if possible\n    if (modalInfo.top !== undefined) {\n      d3.select(modalComponent)\n        .select('.modal-card')\n        .style('top', `${modalInfo.top}px`)\n        .style('left', `${modalInfo.top}px`)\n        .style('width', `${modalInfo.width}px`)\n        .style('height', `${modalInfo.height}px`);\n    } else {\n      let SVGHeight = +d3.select('.dependency-svg').attr('height');\n      let SVGWidth = window.innerWidth;\n\n      d3.select(modalComponent)\n        .select('.modal-card')\n        .style('top', `${(SVGHeight - 420) / 2}px`)\n        .style('left', `${(SVGWidth - 380) / 2}px`);\n    }\n\n    let color = attentionHeadColor.get([modalInfo.layer, modalInfo.head].toString());\n\n    svg.select('#atlas-arrow')\n      .select('path')\n      .attr('fill', color)\n      .attr('stroke', color);\n\n    // Pre-draw the text\n    let tempSVG = d3.select(document.body)\n      .append('svg')\n      .attr('height', 200)\n      .attr('width', 200)\n      .style('visibility', 'hidden');\n\n    const result = getTokenWidth(modalInfo.tokens.map(d => d.token), tempSVG, '0.9em');\n    const maxTextWidth = d3.max(Object.entries(result.textTokenWidths).map(d => d[1]));\n    let inRadius = svgVirtualLength / 2 - maxTextWidth;\n    \n    tempSVG.remove();\n\n    // Figure out the token positions\n    let tokenPos = [];\n    for (let i = 0; i < modalInfo.tokens.length; i++) {\n      let curAngle = -Math.PI / 2 + i * (Math.PI * 2 / modalInfo.tokens.length);\n      tokenPos.push({\n        x: Math.cos(curAngle) * inRadius,\n        y: Math.sin(curAngle) * inRadius,\n        angle: curAngle,\n        token: modalInfo.tokens[i].token,\n        id: i\n      });\n    }\n\n    // Create the links\n    let links = [];\n    let threshold = 0;\n\n    for (let i = 0; i < modalInfo.tokens.length; i++) {\n      for (let j = 0; j < modalInfo.tokens.length; j++) {\n        let curAttention = modalInfo.attention[i][j];\n        if (curAttention > threshold) {\n          links.push({\n            source: i,\n            target: j,\n            attention: curAttention,\n            id: `${i}-${j}`\n          });\n        }\n      }\n    }\n\n    links = links.sort((a, b) => b.attention - a.attention).slice(0, 150);\n\n    // Define link width scale\n    let linkWidthScale = d3.scaleLinear()\n      .domain(d3.extent(links.map(d => d.attention)))\n      .range([0.2, 0.7]);\n\n    let linkOpacityScale = d3.scaleLinear()\n      // .domain(d3.extent(links.map(d => d.attention)))\n      .domain([0, 1])\n      .range([0.1, 1]);\n    \n    // Draw the texts (will re-draw again later after getting the optimal circle size)\n    let textTokenGroup = donut.append('g')\n      .attr('class', 'token-text-group')\n      .style('font-size', '0.9em')\n      .style('cursor', 'default');\n\n    textTokenGroup.selectAll('text')\n      .data(tokenPos, d => d.id)\n      .join('text')\n      .attr('data-angle', d => d.angle)\n      .attr('transform', d => {\n        let degree = d.angle * 180 / Math.PI;\n        return `rotate(${degree})\n          translate(${inRadius}, 0)\n          rotate(${d.angle >= Math.PI / 2 ? 180 : 0})\n        `;\n      })\n      .attr('dominant-baseline', 'middle')\n      .attr('x', d => d.angle < Math.PI / 2 ? 6 : -6)\n      .attr('text-anchor', d => d.angle < Math.PI / 2 ? 'start' : 'end')\n      .text(d => d.token);\n\n    // Optimize the circle size (maximize the inner bbox)\n    // Need to create a temp svg to work around the drawing delay\n    let textClone = donut.select('.token-text-group').clone(true).remove();\n\n    tempSVG = d3.select(document.body)\n      .append('svg')\n      .attr('viewBox', `0 0 ${svgVirtualLength} ${svgVirtualLength}`)\n      .attr('width', svgLength)\n      .attr('height', svgLength)\n      .style('visibility', 'hidden');\n    \n\n    tempSVG.append(() => textClone.node());\n    let innerBox = tempSVG.select('.token-text-group').node().getBBox();\n    tempSVG.remove();\n\n    let top = svgVirtualLength / 2 + innerBox.y;\n    let bottom = svgVirtualLength - top - innerBox.height;\n    let left = svgVirtualLength / 2 + innerBox.x;\n    let right = svgVirtualLength - left - innerBox.width;\n\n    let radiusGrow = Math.min(top, bottom, left, right);\n\n    // Grow the radius and redraw text, circles and paths\n    inRadius += Math.floor(radiusGrow);\n\n    // Figure out the token positions\n    tokenPos = [];\n    for (let i = 0; i < modalInfo.tokens.length; i++) {\n      let curAngle = -Math.PI / 2 + i * (Math.PI * 2 / modalInfo.tokens.length);\n      tokenPos.push({\n        x: Math.cos(curAngle) * inRadius,\n        y: Math.sin(curAngle) * inRadius,\n        angle: curAngle,\n        token: modalInfo.tokens[i].token,\n        id: i\n      });\n    }\n\n    // Draw invisible background for interaction\n    textTokenGroup.selectAll('rect')\n      .data(tokenPos, d => d.id)\n      .join('rect')\n      .attr('transform', d => {\n        let degree = d.angle * 180 / Math.PI;\n        return `rotate(${degree})\n          translate(${inRadius}, 0)\n        `;\n      })\n      .attr('x', 0)\n      .attr('y', -5)\n      .attr('width', 50)\n      .attr('height', 15)\n      .style('fill', 'white')\n      .style('opacity', 0)\n      .on('mouseover', (e, d) => {\n        svg.select('#atlas-arrow')\n          .select('path')\n          .attr('opacity', 0.1);\n\n        donut.select('.path-group')\n          .selectAll('path.donut-link')\n          .style('opacity', 0.5);\n\n        donut.select('.path-group')\n          .selectAll('path.donut-link')\n          .filter(dd => {\n            return dd.source === d.id || dd.target === d.id;\n          })\n          .attr('marker-end', 'url(#atlas-arrow-hover)')\n          .style('stroke', 'hsl(36, 100%, 55%)')\n          .style('stroke-width', 3)\n          .style('opacity', 1)\n          .raise();\n      })\n      .on('mouseleave', () => {\n        svg.select('#atlas-arrow')\n          .select('path')\n          .attr('opacity', null);\n\n        donut.select('.path-group')\n          .selectAll('path.donut-link')\n          .attr('marker-end', 'url(#atlas-arrow)')\n          .style('stroke', color)\n          .style('stroke-width', d => linkWidthScale(d.attention))\n          .style('opacity', 1);\n      });\n\n    // Update text position\n    textTokenGroup.selectAll('text')\n      .data(tokenPos, d => d.id)\n      .join('text')\n      .attr('data-angle', d => d.angle)\n      .attr('transform', d => {\n        let degree = d.angle * 180 / Math.PI;\n        return `rotate(${degree})\n          translate(${inRadius}, 0)\n          rotate(${d.angle >= Math.PI / 2 ? 180 : 0})\n        `;\n      })\n      .attr('dominant-baseline', 'middle')\n      .attr('x', d => d.angle < Math.PI / 2 ? 6 : -6)\n      .attr('text-anchor', d => d.angle < Math.PI / 2 ? 'start' : 'end')\n      .text(d => d.token)\n      .on('mouseover', (e, d) => {\n        svg.select('#atlas-arrow')\n          .select('path')\n          .style('opacity', 0.5);\n\n        donut.select('.path-group')\n          .selectAll('path.donut-link')\n          .style('opacity', 0.1);\n\n        donut.select('.path-group')\n          .selectAll('path.donut-link')\n          .filter(dd => {\n            return dd.source === d.id || dd.target === d.id;\n          })\n          .attr('marker-end', 'url(#atlas-arrow-hover)')\n          .style('stroke', 'hsl(24, 95%, 59%)')\n          .style('opacity', 1)\n          .style('stroke-width', 3)\n          .raise();\n      })\n      .on('mouseleave', () => {\n        svg.select('#atlas-arrow')\n          .select('path')\n          .attr('opacity', null);\n\n        donut.select('.path-group')\n          .selectAll('path.donut-link')\n          .attr('marker-end', 'url(#atlas-arrow)')\n          .style('stroke', color)\n          .style('stroke-width', d => linkWidthScale(d.attention))\n          .style('opacity', 1);\n      });\n\n    // Draw the links as bezier curves\n    donut.append('g')\n      .attr('class', 'path-group')\n      .selectAll('path.donut-link')\n      .data(links, d => d.id)\n      .join('path')\n      .attr('class', 'donut-link')\n      .attr('marker-end', 'url(#atlas-arrow)')\n      .attr('d', d => {\n        let source = tokenPos[d.source];\n        let target = tokenPos[d.target];\n        const center = {x: 0, y: 0};\n        const radialCurveAlpha = 2 / 5;\n        \n        // Two control points symmetric regarding the center point\n        let controlP1 = {\n          x: center.x + (source.x - center.x) * radialCurveAlpha,\n          y: center.y + (source.y - center.x) * radialCurveAlpha\n        };\n\n        let controlP2 = {\n          x: center.x + (target.x - center.x) * radialCurveAlpha,\n          y: center.y + (target.y - center.x) * radialCurveAlpha\n        };\n        \n        return `M ${source.x},${source.y} C${controlP1.x}, ${controlP1.y},\n          ${controlP2.x}, ${controlP2.y}, ${target.x},${target.y}`;\n      })\n      .style('fill', 'none')\n      .style('stroke', color)\n      .style('stroke-width', d => linkWidthScale(d.attention))\n      .style('opacity', d => linkOpacityScale(d.attention));\n    \n    // Draw the circles\n    donut.append('g')\n      .attr('class', 'token-dot-group')\n      .selectAll('circle.token-dot')\n      .data(tokenPos, d => d.id)\n      .join('circle')\n      .attr('class', 'token-dot')\n      .attr('cx', d => d.x)\n      .attr('cy', d => d.y)\n      .attr('r', 1);\n\n  };\n\n  const drawRadial = () => {\n    svg.append('rect')\n      .attr('width', svgVirtualLength)\n      .attr('height', svgVirtualLength)\n      .style('fill', 'hsla(0, 0%, 100%, 0)');\n    \n    donut = svg.append('g')\n      .attr('class', 'donut')\n      .attr('transform', 'translate(250, 250)');\n\n    // drawDonut(donut);\n    markerDef = svg.append('defs')\n      .attr('id', 'atlas-arrow-def')\n      .append('marker')\n      .attr('id', 'atlas-arrow')\n      .attr('viewBox', [0, 0, 10, 10])\n      .attr('refX', 10)\n      .attr('refY', 5)\n      .attr('markerWidth', 12)\n      .attr('markerHeight', 9)\n      .attr('orient', 'auto')\n      .attr('stroke-width', 1)\n      .attr('markerUnits', 'userSpaceOnUse')\n      .append('path')\n      .attr('d', 'M 0 0 L 10 5 L 0 10 z')\n      .attr('stroke', 'gray')\n      .attr('fill', 'gray');\n\n    markerDef = svg.append('defs')\n      .attr('id', 'atlas-arrow-def-hover')\n      .append('marker')\n      .attr('id', 'atlas-arrow-hover')\n      .attr('viewBox', [0, 0, 10, 10])\n      .attr('refX', 10)\n      .attr('refY', 5)\n      .attr('markerWidth', 12)\n      .attr('markerHeight', 9)\n      .attr('orient', 'auto')\n      .attr('stroke-width', 1)\n      .attr('markerUnits', 'userSpaceOnUse')\n      .append('path')\n      .attr('d', 'M 0 0 L 10 5 L 0 10 z')\n      .attr('stroke', 'hsl(24, 95%, 59%)')\n      .attr('fill', 'hsl(24, 95%, 59%)');\n    \n  };\n\n  onMount(() => {\n    // Bind drag event\n    let modalCard = d3.select(modalComponent)\n      .select('.modal-card');\n\n    dragElement(modalCard.node());\n\n    svg = modalCard.select('svg.modal-svg')\n      .attr('viewBox', `0 0 ${svgVirtualLength} ${svgVirtualLength}`)\n      .attr('width', '100%')\n      .attr('height', '100%');\n\n    drawRadial();\n\n  });\n\n  const getColor = (layer, head) => {\n    if (attentionHeadColor == null || attentionHeadColor.has === undefined ||\n      !attentionHeadColor.has([layer, head].toString())) {\n      return 'black';\n    } else {\n      return attentionHeadColor.get([layer, head].toString());\n    }\n  };\n\n</script>\n\n<style type='text/scss'>\n  .modal {\n    pointer-events: none;\n  }\n\n  .modal-card {\n    width: 380px;\n    height: 420px;\n\n    max-width: 800px;\n    min-width: 340px;\n    min-height: 380px;\n\n    // width: 500px;\n    resize: both;\n\n    border: 1px solid hsla(0, 0%, 0%, 0.2);\n    border-radius: 8px;\n    box-shadow: 0 2px 10px hsla(0, 0%, 0%, 0.2);\n    animation: modal-card-appear 200ms;\n\n    /* Make it draggable */\n    position: absolute;\n    pointer-events: all;\n\n    &-title {\n      font-size: 1em;\n      cursor: default;\n      pointer-events: none;\n    }\n\n    &-head {\n      padding: 10px 15px;\n      cursor: move;\n    }\n\n    &-body {\n      padding: 5px;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n    }\n  }\n\n  @keyframes modal-card-appear {\n    0% {\n      opacity: 0;\n    }\n    50% {\n      opacity: 1;\n    }\n  }\n\n</style>\n\n\n<div class='modal-component'\n  bind:this={modalComponent}>\n\n  <div class='modal' class:is-active={modalInfo.show}>\n\n    <div class='modal-card'>\n      <header class='modal-card-head'>\n        <div class='modal-card-title'\n          style={`color: ${getColor(modalInfo.layer, modalInfo.head)}`}>\n          Layer {modalInfo.layer} Head {modalInfo.head} Attention Wights\n        </div>\n        <button class='delete' aria-label='close' on:click={crossClicked}></button>\n      </header>\n\n      <section class='modal-card-body'>\n\n        <svg class='modal-svg'></svg>\n\n      </section>\n\n    </div>\n\n  </div>\n\n</div>","import * as d3 from 'd3';\nimport { tokenIDName, getTokenWidth } from './utils.js';\n\nexport const drawTree = (data, saliencies, svg, SVGWidth, SVGHeight, SVGPadding,\n  tokenNodeMouseoverTree, tokenNodeMouseleave, textTokenPadding, wordToSubwordMap,\n  initWordToSubwordMap) => {\n\n  const depList = data.list;\n\n  // Need to split the original words into sub-words if applicable\n  let tokens = data.words.map(d => { return { 'token': d }; });\n\n  // Give each saliency token a unique name\n  if (saliencies.tokens[0].id === undefined) {\n    let tokenCount = {};\n    saliencies.tokens.forEach(d => {\n      let curCount = 0;\n      if (tokenCount[d.token] === undefined) {\n        tokenCount[d.token] = curCount + 1;\n      } else {\n        curCount = tokenCount[d.token];\n        tokenCount[d.token] += 1;\n      }\n      d.id = `${tokenIDName(d.token)}-${curCount}`;\n    });\n  }\n\n  // console.log(saliencies, tokens);\n\n  if (wordToSubwordMap == null) {\n    initWordToSubwordMap(tokens, saliencies);\n  }\n\n  // console.log(wordToSubwordMap);\n\n  // Give each saliency token a unique name\n  let tokenCount = {};\n  tokens.forEach(d => {\n    let curCount = 0;\n    if (tokenCount[d.token] === undefined) {\n      tokenCount[d.token] = curCount + 1;\n    } else {\n      curCount = tokenCount[d.token];\n      tokenCount[d.token] += 1;\n    }\n    d.id = `${tokenIDName(d.token)}-${curCount}`;\n  });\n\n  let textTokenSize = getTokenWidth(tokens.map(d => d.token), svg);\n  let textTokenWidths = textTokenSize.textTokenWidths;\n  let textTokenHeight = textTokenSize.textTokenHeight;\n\n  // Convert flat data to hierarchy\n  let root = d3.stratify()\n    .id(d => d.child)\n    .parentId(d => d.parent)(depList);\n\n  // console.log(root);\n\n  let treeRoot = d3.tree()\n    .separation((a, b) => Math.max(textTokenWidths[a.id], textTokenWidths[b.id]))\n    .size([\n      SVGWidth - SVGPadding.left - SVGPadding.right,\n      SVGHeight - SVGPadding.top - SVGPadding.bottom - 2 * textTokenHeight,\n    ])(root);\n\n  // console.log(treeRoot.descendants(), treeRoot.links());\n\n  let treeGroup = svg.append('g')\n    .attr('class', 'tree-group')\n    .attr('transform', `translate(${SVGPadding.left}, ${SVGPadding.top + textTokenHeight})`);\n\n  let rootLinks = treeRoot.links();\n\n  for (let i = 0; i < rootLinks.length; i++) {\n    rootLinks[i].left = +rootLinks[i].target.x > +rootLinks[i].source.x;\n    rootLinks[i].vertical = Math.abs(+rootLinks[i].target.x - +rootLinks[i].source.x) < 5;\n  }\n\n  // console.log(rootLinks);\n\n  treeGroup.append('g')\n    .attr('class', 'link-group')\n    .selectAll('path')\n    .data(rootLinks, d => `${d.source.id}-${d.target.id}`)\n    .join('path')\n    .attr('id', d => `link-${d.source.id}-${d.target.id}`)\n    .attr('data-left', d => `${d.left} ${d.source.x} ${d.target.x}`)\n    .attr('d', d3.linkVertical()\n      .x(d => d.x)\n      .y(d => d.y)\n    );\n\n  // Append relationship text on the path\n  let linkTexts = treeGroup.append('g')\n    .attr('class', 'link-text-group')\n    .selectAll('text.text-link')\n    .data(rootLinks, d => `${d.source.id}-${d.target.id}`)\n    .join('text')\n    .attr('class', 'text-link');\n\n  linkTexts.append('textPath')\n    .attr('href', d => `#link-${d.source.id}-${d.target.id}`)\n    .attr('startOffset', '50%')\n    .attr('side', d => d.left ? 'left' : 'right')\n    .style('text-anchor', 'middle')\n    .style('dominant-baseline', 'end')\n    .text(d => d.target.data.relation);\n\n  linkTexts.clone(true)\n    .lower()\n    .attr('stroke-width', 2)\n    .attr('stroke', 'white');\n\n  let nodes = treeGroup.append('g')\n    .attr('class', 'node-group')\n    .selectAll('g')\n    .data(root.descendants())\n    .join('g')\n    .attr('class', d => {\n      let curNode = tokens[Number(d.id)];\n      let cls = `node node-${curNode.id}`;\n      if (wordToSubwordMap[curNode.token] !== undefined) {\n        wordToSubwordMap[curNode.token].forEach(n => {\n          cls += ` node-${n}`;\n        });\n      }\n      return cls;\n    })\n    .attr('transform', d => `translate(${d.x}, ${d.y})`)\n    .on('mouseover', e => tokenNodeMouseoverTree(tokens, e))\n    .on('mouseleave', tokenNodeMouseleave);\n\n  nodes.append('rect')\n    .attr('x', d => -(textTokenWidths[d.id] + textTokenPadding.left + textTokenPadding.right) / 2)\n    .attr('y', - (textTokenHeight + textTokenPadding.top + textTokenPadding.bottom) / 2)\n    .attr('width', d => textTokenWidths[d.id] + textTokenPadding.left + textTokenPadding.right)\n    .attr('height', textTokenHeight + textTokenPadding.top + textTokenPadding.bottom)\n    .attr('rx', 5)\n    .style('fill', 'hsl(210, 25%, 98%)')\n    .style('stroke', 'hsl(180, 1%, 80%)');\n\n  nodes.append('text')\n    .attr('class', 'text-token')\n    .attr('y', 1)\n    .text(d => tokens[d.id].token);\n\n};","<script>\n  import { onMount } from 'svelte';\n  import { instanceViewConfigStore, hoverTokenStore,\n    wordToSubwordMapStore, tableModalStore, instanceIDStore, comparisonViewStore } from '../store';\n  import { isSpecialToken, padZeroLeft } from './utils';\n  import { drawParagraph } from './saliency-view';\n  import { drawGraph } from './dependency-view';\n  import RadialModal from './RadialModal.svelte';\n  import { drawDependencyComparison, removeDependencyComparison } from './comparison-view';\n  import { drawTree } from './tree-view';\n  import { createEventDispatcher } from 'svelte';\n  import * as d3 from 'd3';\n\n  const dispatch = createEventDispatcher();\n\n  let svg = null;\n  let data = null;\n  let existingLinkSet = null;\n  let saliencies = null;\n  let attentions = null;\n  let headOrder = null;\n\n  let wordToSubwordMap = null;\n  let relations = [];\n  let selectedRelations = {};\n  let instanceID = 1562;\n\n  let textTokenWidths = {};\n  let tokenXs = [];\n\n  let SVGWidth = 800;\n  let SVGHeight = 800;\n\n  let instanceViewConfig = undefined;\n  let SVGInitialized = false;\n  let inComparisonView = false;\n  let comparisonViewConfig = {};\n\n  comparisonViewStore.subscribe(value => {\n    comparisonViewConfig = value;\n    SVGHeight = comparisonViewConfig.height - 41;\n\n    if (comparisonViewConfig.inComparison && !inComparisonView) {\n      comparisonButtonClickedHandler();\n    } else if (!comparisonViewConfig.inComparison && inComparisonView){\n      comparisonButtonClickedHandler();\n    }\n  });\n\n  // Table Modal info\n  let tableModalInfo = null;\n  tableModalStore.subscribe(value => {tableModalInfo = value;});\n\n  const SVGPadding = {top: 10, left: 15, right: 15, bottom: 10};\n  const textTokenPadding = {top: 3, left: 3, right: 3, bottom: 3};\n\n  // Global stores\n  let curHoverToken = null;\n  \n  // Control panel variables\n  const layoutOptions = {\n    saliency: {\n      value: 'saliency',\n      name: 'Saliency View'\n    },\n    dependency: {\n      value: 'dependency',\n      name: 'Dependency List'\n    },\n    tree: {\n      value: 'tree',\n      name: 'Dependency Tree'\n    } \n  };\n\n  const headListOptions = {\n    syntactic: {\n      value: 'syntactic',\n      name: 'syntactic correlations'\n    },\n    semantic: {\n      value: 'semantic',\n      name: 'semantic correlations '\n    },\n    importance: {\n      value: 'importance',\n      name: 'importance scores'\n    } \n  };\n\n  let dependencyViewInitialized = false;\n  let saliencyViewInitialized = false;\n  let treeViewInitialized = false;\n\n  let currentLayout = layoutOptions.dependency;\n  let linkColor = 'hsl(0, 0%, 80%)';\n  let linkHoverColor = 'hsl(42, 95%, 58%)';\n  linkHoverColor = 'hsl(36, 100%, 55%)';\n  // linkHoverColor = 'hsl(174, 65%, 48%)';\n\n  // let linkHoverGradient1 = 'hsl(173, 66%, 90%)';\n  // let linkHoverGradient2 = 'hsl(176, 74%, 70%)';\n  // let linkHoverGradient3 = 'hsl(173, 66%, 35%)';\n\n  let linkHoverGradient1 = 'hsl(36, 100%, 90%)';\n  let linkHoverGradient2 = 'hsl(36, 100%, 80%)';\n  let linkHoverGradient3 = 'hsl(36, 100%, 55%)';\n\n  let showRelationCheckboxes = false;\n\n  const ease = d3.easeCubicInOut;\n  const animationTime = 300;\n  \n  const bindSelect = () => {\n    let selectOption = d3.select('#instance-select')\n      .property('value', currentLayout.value);\n\n    selectOption.on('change', () => {\n      let newLayoutValue = selectOption.property('value');\n\n      // Need to switch layout\n      if (newLayoutValue !== currentLayout.value) {\n\n        switch(newLayoutValue) {\n        case 'saliency':\n          // Hide the old view\n          if (currentLayout.value === 'dependency' && dependencyViewInitialized) {\n            svg.select('g.token-group')\n              .style('display', 'none');\n          }\n\n          if (currentLayout.value === 'tree' && treeViewInitialized) {\n            svg.select('g.tree-group')\n              .style('display', 'none');\n          }\n\n          // Draw the new view\n          if (saliencyViewInitialized) {\n            svg.select('g.token-group-saliency')\n              .style('display', null);\n            svg.select('g.legend-group')\n              .style('display', null);\n          } else {\n            if (!SVGInitialized) {\n              initSVG();\n            }\n            drawParagraph(saliencies, svg, SVGWidth, SVGPadding, textTokenPadding,\n              wordToSubwordMap, tokenNodeMouseover, tokenNodeMouseleave);\n            saliencyViewInitialized = true;\n          }\n          currentLayout = layoutOptions[newLayoutValue];\n          break;\n\n        case 'dependency':\n          console.log('change to dependency view');\n\n          // Hide the old view\n          if (currentLayout.value === 'tree' && treeViewInitialized) {\n            svg.select('g.tree-group')\n              .style('display', 'none');\n          }\n\n          if (currentLayout.value === 'saliency' && saliencyViewInitialized) {\n            svg.select('g.token-group-saliency')\n              .style('display', 'none');\n            svg.select('g.legend-group')\n              .style('display', 'none');\n          }\n\n          // Draw the new view\n          if (dependencyViewInitialized) {\n            svg.select('g.token-group')\n              .style('display', null);\n          } else {\n            if (!SVGInitialized) {\n              initSVG();\n            }\n            let results = drawGraph(data, saliencies, wordToSubwordMap, svg, tokenXs,\n              textTokenPadding, SVGPadding, SVGHeight, tokenNodeMouseover,\n              tokenNodeMouseleave,initWordToSubwordMap);\n\n            tokenXs = results.tokenXs;\n            textTokenWidths = results.textTokenWidths;\n            dependencyViewInitialized = true;\n          }\n\n          currentLayout = layoutOptions[newLayoutValue];\n          break;\n\n        case 'tree':\n          console.log('change to tree view');\n\n          // Hide the old view\n          if (currentLayout.value === 'dependency' && dependencyViewInitialized) {\n            svg.select('g.token-group')\n              .style('display', 'none');\n          }\n\n          if (currentLayout.value === 'saliency' && saliencyViewInitialized) {\n            svg.select('g.token-group-saliency')\n              .style('display', 'none');\n            svg.select('g.legend-group')\n              .style('display', 'none');\n          }\n\n          // Draw the new view\n          if (treeViewInitialized) {\n            svg.select('g.tree-group')\n              .style('display', null);\n          } else {\n            if (!SVGInitialized) {\n              initSVG();\n            }\n            drawTree(data, saliencies, svg, SVGWidth, SVGHeight, SVGPadding,\n              tokenNodeMouseoverTree, tokenNodeMouseleave, textTokenPadding,\n              wordToSubwordMap, initWordToSubwordMap);\n            treeViewInitialized = true;\n          }\n\n          currentLayout = layoutOptions[newLayoutValue];\n          break;\n        }\n\n      }\n    });\n  };\n\n  const initSVG = () => {\n    svg = d3.select('svg.dependency-svg')\n      .attr('width', SVGWidth)\n      .attr('height', SVGHeight);\n\n    // Add a border\n    svg.append('rect')\n      .attr('class', 'border-rect')\n      .attr('width', SVGWidth)\n      .attr('height', SVGHeight)\n      .style('stroke', 'black')\n      .style('fill', 'none');\n\n    // Add arrow markers\n    let arrowMarker = svg.append('defs');\n\n    arrowMarker.append('marker')\n      .attr('id', 'dep-arrow')\n      .attr('viewBox', [0, 0, 10, 10])\n      .attr('refX', 0)\n      .attr('refY', 5)\n      .attr('markerWidth', 10)\n      .attr('markerHeight', 5)\n      .attr('orient', 'auto')\n      .attr('stroke-width', 1)\n      .attr('markerUnits', 'userSpaceOnUse')\n      .append('path')\n      .attr('d', 'M 0 0 L 10 5 L 0 10 z')\n      .attr('stroke', linkColor)\n      .attr('fill', linkColor);\n    \n    arrowMarker.clone(true)\n      .select('marker')\n      .attr('id', 'dep-arrow-hover')\n      .select('path')\n      .attr('stroke', linkHoverColor)\n      .attr('fill', linkHoverColor);\n\n    arrowMarker.clone(true)\n      .select('marker')\n      .attr('id', 'dep-attention-arc-arrow')\n      .select('path')\n      .attr('stroke', 'none')\n      .attr('refX', 2)\n      .attr('fill', 'hsl(0, 0%, 10%)');\n\n    arrowMarker.clone(true)\n      .select('marker')\n      .attr('id', 'dep-attention-arrow')\n      .select('path')\n      .attr('stroke', 'none')\n      .attr('refX', 2)\n      .attr('fill', 'hsl(0, 0%, 80%)');\n\n    // Create opacity gradient\n    let gradient = svg.append('defs')\n      .append('linearGradient')\n      .attr('id', 'top-opacity-gradient')\n      .attr('x2', '0%')\n      .attr('y2', '100%');\n\n    gradient.append('stop')\n      .style('stop-opacity', 1)\n      .style('stop-color', 'white')\n      .attr('offset', '0');\n\n    gradient.append('stop')\n      .style('stop-opacity', 1)\n      .style('stop-color', 'white')\n      .attr('offset', '0.9');\n\n    gradient.append('stop')\n      .style('stop-opacity', 0)\n      .style('stop-color', 'white')\n      .attr('offset', '1');\n\n    gradient = svg.append('defs')\n      .append('linearGradient')\n      .attr('id', 'bottom-opacity-gradient')\n      .attr('x2', '0%')\n      .attr('y2', '100%');\n\n    gradient.append('stop')\n      .style('stop-opacity', 0)\n      .style('stop-color', 'white')\n      .attr('offset', '0');\n\n    gradient.append('stop')\n      .style('stop-opacity', 1)\n      .style('stop-color', 'white')\n      .attr('offset', '0.5');\n\n    gradient.append('stop')\n      .style('stop-opacity', 1)\n      .style('stop-color', 'white')\n      .attr('offset', '1');\n\n    // Line gradient right to left\n    gradient = svg.append('defs')\n      .append('linearGradient')\n      .attr('id', 'link-opacity-gradient-rl');\n\n    gradient.append('stop')\n      .style('stop-opacity', 1)\n      .style('stop-color', 'hsl(0, 0%, 20%)')\n      .attr('offset', '0');\n\n    gradient.append('stop')\n      .style('stop-opacity', 1)\n      .style('stop-color', 'hsl(0, 0%, 70%)')\n      .attr('offset', '0.6');\n\n    gradient.append('stop')\n      .style('stop-opacity', 1)\n      .style('stop-color', 'hsl(0, 0%, 90%)')\n      .attr('offset', '1');\n\n    // Line gradient left to right\n    gradient = svg.append('defs')\n      .append('linearGradient')\n      .attr('id', 'link-opacity-gradient-lr');\n\n    gradient.append('stop')\n      .style('stop-opacity', 1)\n      .style('stop-color', 'hsl(0, 0%, 90%)')\n      .attr('offset', '0');\n\n    gradient.append('stop')\n      .style('stop-opacity', 1)\n      .style('stop-color', 'hsl(0, 0%, 70%)')\n      .attr('offset', '0.4');\n\n    gradient.append('stop')\n      .style('stop-opacity', 1)\n      .style('stop-color', 'hsl(0, 0%, 20%)')\n      .attr('offset', '1');\n    \n    // Matched line gradient right to left\n    gradient = svg.append('defs')\n      .append('linearGradient')\n      .attr('id', 'matched-link-opacity-gradient-rl');\n\n    gradient.append('stop')\n      .style('stop-opacity', 1)\n      .style('stop-color', linkHoverGradient1)\n      .attr('offset', '0');\n\n    gradient.append('stop')\n      .style('stop-opacity', 1)\n      .style('stop-color', linkHoverGradient2)\n      .attr('offset', '0.6');\n\n    gradient.append('stop')\n      .style('stop-opacity', 1)\n      .style('stop-color', linkHoverGradient3)\n      .attr('offset', '1');\n\n    // Matched line gradient left to right\n    gradient = svg.append('defs')\n      .append('linearGradient')\n      .attr('id', 'matched-link-opacity-gradient-lr');\n\n    gradient.append('stop')\n      .style('stop-opacity', 1)\n      .style('stop-color', linkHoverGradient3)\n      .attr('offset', '0');\n\n    gradient.append('stop')\n      .style('stop-opacity', 1)\n      .style('stop-color', linkHoverGradient2)\n      .attr('offset', '0.4');\n\n    gradient.append('stop')\n      .style('stop-opacity', 1)\n      .style('stop-color', linkHoverGradient1)\n      .attr('offset', '1');\n\n    // Top line gradient right to left\n    gradient = svg.append('defs')\n      .append('linearGradient')\n      .attr('id', 'top-link-opacity-gradient-rl');\n\n    gradient.append('stop')\n      .style('stop-opacity', 0.8)\n      .style('stop-color', 'hsl(0, 0%, 20%)')\n      .attr('offset', '0');\n\n    gradient.append('stop')\n      .style('stop-opacity', 0.8)\n      .style('stop-color', 'hsl(0, 0%, 70%)')\n      .attr('offset', '0.3');\n\n    gradient.append('stop')\n      .style('stop-opacity', 0.8)\n      .style('stop-color', 'hsl(0, 0%, 90%)')\n      .attr('offset', '1');\n\n    // Line gradient left to right\n    gradient = svg.append('defs')\n      .append('linearGradient')\n      .attr('id', 'top-link-opacity-gradient-lr');\n\n    gradient.append('stop')\n      .style('stop-opacity', 0.8)\n      .style('stop-color', 'hsl(0, 0%, 90%)')\n      .attr('offset', '0');\n\n    gradient.append('stop')\n      .style('stop-opacity', 0.8)\n      .style('stop-color', 'hsl(0, 0%, 70%)')\n      .attr('offset', '0.7');\n\n    gradient.append('stop')\n      .style('stop-opacity', 0.8)\n      .style('stop-color', 'hsl(0, 0%, 20%)')\n      .attr('offset', '1');\n\n    SVGInitialized = true;\n  };\n\n  const tokenNodeMouseover = e => {\n    let curNode = d3.select(e.target);\n    let nodeID = curNode.data()[0].id;\n    hoverTokenStore.set(nodeID);\n  };\n\n  const tokenNodeMouseleave = () => {\n    hoverTokenStore.set(null);\n  };\n\n  const tokenNodeMouseoverTree = (tokens, e) => {\n    let curNode = d3.select(e.target);\n    let nodeID = tokens[curNode.data()[0].id].id;\n    hoverTokenStore.set(nodeID);\n  };\n\n  const highLightNode = () => {\n    // Cannot directly select class because some weird special character selector bug on firefox\n    svg.selectAll('.node')\n      .filter((d, i, g) => d3.select(g[i]).attr('class').includes(`-${curHoverToken}`))\n      .select('rect')\n      .style('stroke', linkHoverColor)\n      .style('stroke-width', 2);\n    \n    svg.selectAll('.arc-path')\n      // TODO\n      // .style('opacity', 0.2);\n      .style('opacity', 0.8);\n\n    svg.selectAll('.arc-path')\n      .filter((d, i, g) => d3.select(g[i]).attr('class').includes(`-${curHoverToken}`))\n      .classed('highlighted', true)\n      .style('opacity', 1)\n      .raise();\n\n    svg.selectAll('.node-clone')\n      .filter((d, i, g) => d3.select(g[i]).attr('class').includes(`-${curHoverToken}`))\n      .select('rect')\n      .style('stroke', linkHoverColor)\n      .style('opacity', 1)\n      .style('stroke-width', 2);\n\n    svg.selectAll('.matched-attention-path')\n      .classed('de-highlighted', true);\n\n    svg.selectAll('.attention-path')\n      .style('opacity', 0.2);\n\n    svg.selectAll('.attention-path')\n      .filter((d, i, g) => d3.select(g[i]).attr('class').includes(`-${curHoverToken}`))\n      .classed('highlighted', true)\n      .style('opacity', 1)\n      .raise();\n\n    svg.selectAll('.attention-arc')\n      .style('opacity', 0.2);\n\n    svg.selectAll('.attention-arc')\n      .filter((d, i, g) => d3.select(g[i]).attr('class').includes(`-${curHoverToken}`))\n      .classed('highlighted', true)\n      .style('opacity', 0.9)\n      .raise();\n  };\n\n  const deHighLightNode = () => {\n\n    // TODO\n    // return;\n\n    svg.selectAll('.node')\n      .filter((d, i, g) => d3.select(g[i]).attr('class').includes(`-${curHoverToken}`))\n      .select('rect')\n      .style('stroke', 'hsl(180, 1%, 80%)')\n      .style('stroke-width', 1);\n\n    svg.selectAll('.arc-path')\n      .style('opacity', null);\n\n    svg.selectAll('.arc-path')\n      .filter((d, i, g) => d3.select(g[i]).attr('class').includes(`-${curHoverToken}`))\n      .classed('highlighted', false);\n\n    svg.selectAll('.node-clone')\n      .filter((d, i, g) => d3.select(g[i]).attr('class').includes(`-${curHoverToken}`))\n      .select('rect')\n      .style('opacity', null)\n      .style('stroke', 'none');\n\n    svg.selectAll('.matched-attention-path')\n      .classed('de-highlighted', false);\n\n    svg.selectAll('.attention-path')\n      .style('opacity', null);\n\n    svg.selectAll('.attention-path')\n      .filter((d, i, g) => d3.select(g[i]).attr('class').includes(`-${curHoverToken}`))\n      .classed('highlighted', false)\n      .raise();\n\n    svg.selectAll('.attention-arc')\n      .style('opacity', 0.5);\n\n    svg.selectAll('.attention-arc')\n      .filter((d, i, g) => d3.select(g[i]).attr('class').includes(`-${curHoverToken}`))\n      .classed('highlighted', false)\n      .raise();\n  };\n\n  const initWordToSubwordMap = (tokens, saliencies) => {\n\n    wordToSubwordMap = {};\n    let j = 0;\n    while (isSpecialToken(saliencies.tokens[j].token)) {\n      j += 1;\n    }\n\n    for (let i = 0; i < tokens.length; i++) {\n      if (j >= saliencies.tokens.length) break;\n\n      let curWord = tokens[i].token;\n      let curToken = saliencies.tokens[j].token;\n\n      if (curWord !== curToken) {\n        let nextWord = i + 1 < tokens.length ? tokens[i + 1].token : null;\n        wordToSubwordMap[curWord] = [];\n\n        while (saliencies.tokens[j].token !== nextWord) {\n          wordToSubwordMap[curWord].push(saliencies.tokens[j].id);\n          j += 1;\n\n          if (j >= saliencies.tokens.length) break;\n        }\n      } else {\n        j += 1;\n      }\n    }\n    \n    // Update the store\n    wordToSubwordMapStore.set(wordToSubwordMap);\n\n    return wordToSubwordMap;\n  };\n\n  const comparisonButtonClicked = () => {\n    // Dispatch to parent if user clicks the button instead of arrow\n    if (inComparisonView) {\n      dispatch('close');\n    } else {\n      dispatch('open');\n    }\n  };\n\n  const comparisonButtonClickedHandler = () => {\n\n    svg.attr('height', SVGHeight);\n\n    let topHeads = getInterestingHeads();\n\n    if (inComparisonView) {\n      inComparisonView = false;\n      removeDependencyComparison(svg);\n    } else {\n      inComparisonView = true;\n      if (attentions == null) {\n        initAttentionData(\n          `PUBLIC_URL/data/sst2-attention-data/attention-${padZeroLeft(instanceID, 4)}.json`\n        ).then(() => drawDependencyComparison(topHeads, svg, SVGPadding, data,\n          attentions, saliencies, SVGHeight, existingLinkSet, tokenXs,\n          textTokenPadding, textTokenWidths, wordToSubwordMap, initWordToSubwordMap));\n      } else {\n        drawDependencyComparison(topHeads, svg, SVGPadding, data, attentions,\n          saliencies, SVGHeight, existingLinkSet, tokenXs, textTokenPadding,\n          textTokenWidths, wordToSubwordMap, initWordToSubwordMap);\n      }\n    }\n  };\n\n  const editButtonClicked = () => {\n    tableModalInfo.show = true;\n    tableModalStore.set(tableModalInfo);\n  };\n\n  const checkboxChanged = (e) => {\n    // Need to change the selectedRelations again because there is a race between\n    // svelte's bind:checked call back and this function (on:change)\n    let curRel = e.target.dataset.rel;\n    selectedRelations[curRel] = e.target.checked;\n  };\n\n  /**\n   * Create a list of interesting heads based on their max accuracy on the selected\n   * syntactic dependencies.\n  */\n  const getInterestingHeads = () => {\n    let potentialHeads = new Map();\n\n    for (let key in selectedRelations) {\n      if (!selectedRelations[key] || headOrder[key] === undefined) {\n        continue;\n      }\n\n      let topHeads = headOrder[key]['top_heads'];\n\n      // Track the max accuracy\n      topHeads.forEach(d => {\n        if (potentialHeads.has(d.head)) {\n          potentialHeads.set(d.head,\n            Math.max(d.acc, potentialHeads.get(d.head)));\n        } else {\n          potentialHeads.set(d.head, d.acc);\n        }\n      });\n    }\n\n    // Sort the heads\n    let sortedHeads = [...potentialHeads.entries()].sort((a, b) => b[1] - a[1]);\n    let sortedObjHeads = sortedHeads.map(d => ({\n      id: {\n        layer: d[0][0],\n        head: d[0][1]\n      },\n      acc: d[1]\n    }));\n\n    return sortedObjHeads;\n  };\n\n  const initData = async (dependencyFile, saliencyFile, orderFile) => {\n    // Init dependency data\n    data = await d3.json(dependencyFile);\n    data = data[instanceID];\n\n    let relationCounter = new Map();\n    selectedRelations = {};\n\n    // Create a set of existing [parent, child] pairs\n    existingLinkSet = new Set();\n\n    data.list.forEach(d => {\n      existingLinkSet.add(String([d.parent, d.child]));\n      if (relationCounter.has(d.relation)) {\n        relationCounter.set(d.relation, relationCounter.get(d.relation) + 1);\n      } else {\n        relationCounter.set(d.relation, 1);\n        // Select all relations in initialization\n        selectedRelations[d.relation] = true;\n      }\n    });\n    relationCounter = new Map([...relationCounter.entries()].sort((a, b) => b[1] - a[1]));\n    relations = [...relationCounter.entries()];\n\n    // Init saliency data\n    saliencies = await d3.json(saliencyFile);\n    saliencies = saliencies[instanceID];\n\n    // Init the dependency layer/head accuracy list\n    headOrder = await d3.json(orderFile);\n  };\n\n  const initAttentionData = async (attentionFile) => {\n    attentions = await d3.json(attentionFile);\n  };\n\n  onMount(async () => {\n    // Load the dependency and saliency data\n    if (data == null || saliencies == null) {\n      initData('PUBLIC_URL/data/sst2-dependencies.json',\n        'PUBLIC_URL/data/sst2-saliency-list-grad-l1.json',\n        'PUBLIC_URL/data/sst2-sorted-syntactic-heads.json');\n    }\n\n    bindSelect();\n  });\n\n  const createGraph = () => {\n    let results = null;\n    switch(currentLayout.value) {\n    case 'saliency':\n      if (!SVGInitialized) {\n        initSVG();\n      }\n      drawParagraph(saliencies, svg, SVGWidth, SVGPadding, textTokenPadding,\n        wordToSubwordMap, tokenNodeMouseover, tokenNodeMouseleave);\n      saliencyViewInitialized = true;\n      break;\n    \n    case 'dependency':\n      if (!SVGInitialized) {\n        initSVG();\n      }\n      results = drawGraph(data, saliencies, wordToSubwordMap, svg, tokenXs,\n        textTokenPadding, SVGPadding, SVGHeight, tokenNodeMouseover,\n        tokenNodeMouseleave, initWordToSubwordMap);\n      tokenXs = results.tokenXs;\n      textTokenWidths = results.textTokenWidths;\n\n      getInterestingHeads();\n\n      dependencyViewInitialized = true;\n      break;\n\n    case 'tree':\n      if (!SVGInitialized) {\n        initSVG();\n      }\n      drawTree(data, saliencies, svg, SVGWidth, SVGHeight, SVGPadding,\n        tokenNodeMouseoverTree, tokenNodeMouseleave, textTokenPadding, wordToSubwordMap,\n        initWordToSubwordMap);\n      treeViewInitialized = true;\n      break; \n    }\n  };\n\n  instanceViewConfigStore.subscribe(async value => {\n    if (value.compHeight !== undefined && value.compWidth !== undefined){\n      if (instanceViewConfig === undefined ||\n        (instanceViewConfig.compHeight !== value.compHeight &&\n        instanceViewConfig.compWidth !== value.compWidth)\n      ){\n        instanceViewConfig = value;\n\n        SVGWidth = instanceViewConfig.compWidth;\n        SVGHeight = instanceViewConfig.compHeight - 41;\n\n        // Load the dependency and saliency data\n        if (data == null || saliencies == null) {\n          initData('PUBLIC_URL/data/sst2-dependencies.json',\n            'PUBLIC_URL/data/sst2-saliency-list-grad-l1.json',\n            'PUBLIC_URL/data/sst2-sorted-syntactic-heads.json')\n            .then(createGraph);\n        } else {\n          createGraph();\n        }\n\n      }\n    }\n  });\n\n  instanceIDStore.subscribe(value => {\n    // console.log('Instance changed!!');\n    if (value !== instanceID) {\n      svg.selectAll('*').remove();\n      SVGInitialized = false;\n      attentions = null;\n\n      data = null;\n      existingLinkSet = null;\n      saliencies = null;\n      attentions = null;\n      headOrder = null;\n\n      wordToSubwordMap = null;\n      dependencyViewInitialized = false;\n      saliencyViewInitialized = false;\n      treeViewInitialized = false;\n      instanceID = value;\n      initData('PUBLIC_URL/data/sst2-dependencies.json',\n        'PUBLIC_URL/data/sst2-saliency-list-grad-l1.json',\n        'PUBLIC_URL/data/sst2-sorted-syntactic-heads.json').then(createGraph);\n    }\n    \n  });\n  \n  hoverTokenStore.subscribe(value => {\n\n    if (svg == null) {return;}\n\n    if (value != null) {\n      // Highlight the corresponding node\n      curHoverToken = value;\n      highLightNode();\n    } else {\n      // Dehighlight the old node\n      deHighLightNode();\n      curHoverToken = value;\n    }\n\n  });\n\n</script>\n\n<style type='text/scss'>\n\n  @import '../define';\n\n  .svg-container {\n    width: 100%;\n    overflow-x: scroll;\n    position: absolute;\n    top: 41px;\n    cursor: default;\n  }\n\n  .graph-view {\n    display: flex;\n    flex-direction: row;\n  }\n\n  :global(.arc-text) {\n    dominant-baseline: middle;\n    font-family: 'Roboto Mono', monospace;\n    font-size: 0.8em;\n    text-anchor: middle;\n    stroke-linejoin: round;\n    fill: hsl(208, 100%, 50%);\n  }\n\n  :global(.arc-path) {\n    // stroke: hsl(0, 0%, 80%);\n    stroke-width: 2;\n    fill: none;\n  }\n\n  :global(.arc-path--lr) {\n    stroke: url(#top-link-opacity-gradient-lr);\n  }\n\n  :global(.arc-path--lr.highlighted) {\n    stroke: url(#matched-link-opacity-gradient-lr);\n    stroke-width: 3;\n  }\n\n  :global(.arc-path--rl) {\n    stroke: url(#top-link-opacity-gradient-rl);\n  }\n\n  :global(.arc-path--rl.highlighted) {\n    stroke: url(#matched-link-opacity-gradient-rl);\n    stroke-width: 3;\n  }\n\n  :global(.node-circle) {\n    stroke: #fff;\n    stroke-width: 1.5; \n  }\n  \n  :global(.text-token) {\n    dominant-baseline: middle;\n    text-anchor: middle;\n    cursor: default;\n    fill: black;\n  }\n\n  :global(.text-token-arc) {\n    @extend :global(.text-token);\n    dominant-baseline: hanging;\n    text-anchor: start;\n  }\n\n  :global(.text-link) {\n    cursor: default;\n    fill: hsl(207, 48%, 44%);\n  }\n\n  :global(.node-group) {\n    stroke-linejoin: round;\n\n    :global(rect) {\n      fill: hsl(210, 25%, 98%);\n      stroke: hsl(180, 1%, 80%);\n    }\n  }\n\n  :global(.link-group) {\n    fill: none;\n    stroke-opacity: 0.5;\n    stroke-width: 1.5;\n    stroke: #555;\n  }\n\n  :global(.node-group-attention) {\n    :global(text) {\n      opacity: 0.3;\n    }\n\n    :global(rect) {\n      opacity: 0.4;\n      // fill: none;\n      stroke: none;\n    }\n  }\n\n  :global(.comparison-head-name-group) {\n    :global(.name) {\n      font-size: 12px;\n      dominant-baseline: hanging;\n    }\n  }\n\n  :global(.attention-path) {\n    stroke: hsla(0, 0%, 0%, 0.3);\n    fill: none;\n  }\n\n  :global(.attention-path--lr) {\n    stroke: url(#link-opacity-gradient-lr);\n  }\n\n  :global(.attention-path--rl) {\n    stroke: url(#link-opacity-gradient-rl);\n  }\n\n  :global(.attention-arc) {\n    stroke: hsla(0, 0%, 10%);\n    fill: none;\n  }\n\n  :global(.attention-arc--lr) {\n    stroke: url(#link-opacity-gradient-lr);\n  }\n\n  :global(.attention-arc--rl) {\n    stroke: url(#link-opacity-gradient-rl);\n  }\n\n  :global(.attention-arc--lr.highlighted) {\n    stroke: url(#matched-link-opacity-gradient-lr);\n    stroke-width: 2;\n  }\n\n  :global(.attention-arc--rl.highlighted) {\n    stroke: url(#matched-link-opacity-gradient-rl);\n    stroke-width: 2;\n  }\n\n  :global(.matched-attention-path) {\n    stroke: $orange-reg;\n    stroke-width: 2;\n  }\n\n  :global(.matched-attention-path.attention-path--lr) {\n    stroke: url(#matched-link-opacity-gradient-lr);\n  }\n\n  :global(.matched-attention-path.attention-path--rl) {\n    stroke: url(#matched-link-opacity-gradient-rl);\n  }\n\n  :global(.matched-attention-path.attention-path--lr.de-highlighted) {\n    stroke: url(#link-opacity-gradient-lr);\n    stroke-width: 1;\n  }\n\n  :global(.matched-attention-path.attention-path--rl.de-highlighted) {\n    stroke: url(#link-opacity-gradient-rl);\n    stroke-width: 1;\n  }\n\n  :global(.attention-path--lr.highlighted) {\n    stroke: url(#matched-link-opacity-gradient-lr);\n    stroke-width: 2;\n  }\n\n  :global(.attention-path--rl.highlighted) {\n    stroke: url(#matched-link-opacity-gradient-rl);\n    stroke-width: 2;\n  }\n\n  :global(.matched-attention-path.attention-path--lr.de-highlighted.highlighted) {\n    stroke: url(#matched-link-opacity-gradient-lr);\n    stroke-width: 2;\n  }\n\n  :global(.matched-attention-path.attention-path--rl.de-highlighted.highlighted) {\n    stroke: url(#matched-link-opacity-gradient-rl);\n    stroke-width: 2;\n  }\n\n  :global(.comparison-svg-button) {\n    cursor: pointer;\n  }\n\n  :global(.disabled) {\n    cursor: not-allowed;\n  }\n\n  .panel-container {\n    position: absolute;\n    display: flex;\n    flex-direction: row;\n  }\n\n  .dependency-label {\n    color: hsl(0, 0%, 50%);\n    font-size: 1.3rem;\n    margin: 0 8px 0 20px;\n  }\n\n  .svg-control-panel {\n    position: sticky;\n    top: 0;\n    left: 0;\n    z-index: 5;\n    width: 98vw;\n    cursor: default;\n\n    padding-top: 5px;\n    max-height: 76px;\n    overflow: visible;\n\n    display: flex;\n    flex-direction: row;\n    align-items: center;;\n    justify-content: flex-start;\n\n    font-size: 0.9rem;\n    background: hsla(0, 0%, 100%, 0.9);\n    user-select: none;\n  }\n\n  select {\n    background: inherit;\n    border-color: hsla(0, 0%, 0%, 0);\n    padding: 0 1.6em 0 0.4em;\n    height: 1.8em;\n  }\n\n  .select select:not([multiple]) {\n    padding-right: 1.6em;\n  }\n\n  .select:not(.is-multiple) {\n    height: 1.8em;\n  }\n\n  .select:not(.is-multiple):not(.is-loading)::after{\n    right: 0.8em;\n    border-color: $brown-icon;\n  }\n\n  .comparison-panel-container {\n    @extend .panel-container;\n    width: 100%;\n    z-index: 5;\n    border-top: 1px solid hsla(0, 0%, 0%, 0.2);\n    box-shadow:  0 -3px 3px hsla(0, 0%, 0%, 0.01);\n  }\n\n  .comparison-control-panel {\n    @extend .svg-control-panel;\n  }\n\n  .comparison-label {\n    @extend .dependency-label;\n    margin: 0 4px 0 20px;\n  }\n\n  .comparison-select {\n    font-size: 1.2em;\n    height: 2em;\n    border-bottom: 1px solid change-color($brown-dark, $alpha: 0.2);\n\n    &:hover {\n      background: change-color($brown-dark, $alpha: 0.05);\n    }\n\n    select {\n      margin: 0;\n      padding: 0 1em 0 0;\n\n      &::after {\n        margin-top: -5px\n      }\n    }\n\n    select:not([multiple]) {\n      padding-right: 1em;\n    }\n\n   &:not(.is-multiple):not(.is-loading)::after{\n    right: 0.3em;\n    border-color: $brown-icon;\n    margin-top: -0.3em;\n  }\n  }\n\n  .relation-checkboxes {\n    position: absolute;\n    top: -40px;\n    left: 655px;\n    width: 700px;\n    padding: 5px 10px;\n    cursor: default;\n    \n    display: flex;\n    flex-direction: row;\n    align-items: center;;\n    justify-content: flex-start;\n    flex-wrap: wrap;\n\n    font-size: 0.9rem;\n    border-radius: 5px;\n    border: 1px solid hsl(0, 0%, 93.3%);\n    box-shadow: 0 3px 3px hsla(0, 0%, 0%, 0.05);    \n    background: hsla(0, 0%, 100%, 0.95);\n  }\n\n  .check-box-wrapper {\n    padding: 0 5px;\n\n    input[type='checkbox'] {\n      filter: hue-rotate(195deg) saturate(30%);\n    }\n  }\n\n  .select-row {\n    position: relative;\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: flex-end;\n\n    border-radius: 5px;\n    border: 1px solid change-color($brown-dark, $lightness: 90%);\n    margin-right: 5px;\n\n    &:hover {\n      background: change-color($brown-dark, $alpha: 0.05);\n    }\n\n    &--highlight {\n      border: 1px solid change-color($brown-dark, $lightness: 70%);\n      background: change-color($brown-dark, $alpha: 0.1);\n\n      &:hover {\n        background: change-color($brown-dark, $alpha: 0.1);\n      }\n    }\n\n    &--edit {\n      margin-right: 20px;\n    }\n  }\n\n  .relation-container {\n    position: relative;\n  }\n\n  .relation {\n    padding: 0 2em 0 0.4em;\n    height: 1.8em;\n    font-size: 1em;\n    display: flex;\n    align-items: center;\n    cursor: pointer;\n\n    &::after {\n      z-index: 0;\n      border: 3px solid transparent;\n      border-radius: 2px;\n      border-right: 0;\n      border-top: 0;\n      content: \" \";\n      display: block;\n      height: .625em;\n      margin-top: -0.3em;\n      pointer-events: none;\n      position: absolute;\n      top: 50%;\n      transform: rotate(225deg);\n      transform-origin: center;\n      width: .625em;\n\n      border-color: $brown-icon;\n      right: 0.9em;\n    }\n  }\n\n  .comparison-button {\n    padding: 0 0.4em;\n    height: 1.8em;\n    font-size: 1em;\n    display: flex;\n    align-items: center;\n    cursor: pointer;\n  }\n\n  .icon-wrapper {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    opacity: 1;\n\n    img {\n      height: 19px;\n    }\n  }\n\n\n  .hide {\n    display: none;\n  }\n\n  .light-gray {\n    color: $gray-light;\n  }\n\n  .gradient-guide {\n    margin-left: auto;\n\n    img {\n      height: 22px;\n    }\n  }\n\n\n</style>\n\n<div class='graph-view'>\n\n  <div class='panel-container'>\n\n    <!-- Control panel on top of the SVG -->\n    <div class='svg-control-panel'>\n\n      <div class='dependency-label'>\n        Current Sentence\n      </div>\n\n      <div class='select-row select-row--edit'>\n        <div class='relation-container' on:click={editButtonClicked}>\n          <div class='comparison-button'>\n            <div class='icon-wrapper'>\n              <img src='PUBLIC_URL/figures/edit.svg' alt='editing icon'>\n            </div>\n          </div>\n        </div>\n\n      </div>\n\n      <div class='select-row'>\n        <div class='select'>\n          <select name='instance-layout' id='instance-select'>\n            {#each Object.values(layoutOptions) as opt}\n              <option value={opt.value}>{opt.name}</option>\n            {/each}\n          </select>\n        </div>\n      </div>\n\n      <div class='select-row' class:select-row--highlight={inComparisonView}>\n        <div class='relation-container' on:click={comparisonButtonClicked}>\n          <div class='comparison-button'>\n            Show Comparison\n          </div>\n        </div>\n      </div>\n\n      <div class='select-row' class:select-row--highlight={showRelationCheckboxes}>\n        <div class='relation-container'\n          on:click={() => {showRelationCheckboxes = !showRelationCheckboxes;}}>\n          <div class='relation'>\n            Syntactic Relations\n          </div>\n        </div>\n      </div>\n\n      <div class='gradient-guide'>\n        <img src='PUBLIC_URL/figures/gradient.png' alt='gradient guide'>\n      </div>\n\n      <!-- Control panel after syntactic relation item is selected -->\n      <div class='relation-checkboxes' class:hide={!showRelationCheckboxes}>\n        {#each relations as entry}\n\n          <label class=\"checkbox check-box-wrapper\">\n            <input type=\"checkbox\" on:change={checkboxChanged}\n              bind:checked={selectedRelations[entry[0]]}\n              data-rel={entry[0]}\n            >\n            {entry[0]}\n            <span class='light-gray'>({entry[1]})</span>\n          </label>\n            \n        {/each}\n      </div>\n\n    </div>\n\n  </div>\n\n  <div class='comparison-panel-container hide'>\n    <div class='comparison-control-panel'>\n      <!-- <div class='comparison-name'>\n        Dependency predicted by 5 attentions heads having the highest score.\n      </div> -->\n\n      <div class='comparison-label'>\n        Dependencies predicted by attention heads with top \n      </div>\n\n      <div class='select comparison-select'>\n        <select name='head-list' id='head-select'>\n          {#each Object.values(headListOptions) as opt}\n            <option value={opt.value}>{opt.name}</option>\n          {/each}\n        </select>\n      </div>\n\n\n    </div>\n  </div>\n\n  <div class='svg-container'>\n    <svg class='dependency-svg'></svg>\n  </div>\n  \n</div>\n\n<RadialModal />","<script>\n  import { onMount } from 'svelte';\n  import { mapViewConfigStore, sideStore, instanceIDStore,\n    attentionHeadColorStore, tooltipConfigStore, mapHeadStore } from './store';\n  import { createEventDispatcher } from 'svelte';\n  import * as d3 from 'd3';\n\n  let svg = null;\n  let atlasData = null;\n  let attentions = null;\n  let saliencies = null;\n  let tokenSize = null;\n\n  // Tooltip variables\n  let tooltipConfig = null;\n  tooltipConfigStore.subscribe(value => {tooltipConfig = value;});\n\n  let sideInfo = null;\n\n  let viewContainer = null;\n  let mapHead = {layer: 9, head: 8};\n  let curLayer = 9;\n  let curHead = 8;\n\n  const red = d3.hcl(23, 85, 56);\n  const purple = d3.hcl(328, 85, 56);\n  const blue = d3.hcl(274, 85, 56);\n\n  let instanceID = 1562;\n\n  const dispatch = createEventDispatcher();\n  let isShown = true;\n\n  let SVGWidth = 800;\n  let SVGHeight = 800;\n\n  let instanceViewConfig = undefined;\n\n  const SVGPadding = {top: 40, left: 10, right: 10, bottom: 3};\n\n  const ease = d3.easeCubicInOut;\n\n  const round = (num, decimal) => {\n    return Math.round((num + Number.EPSILON) * (10 ** decimal)) / (10 ** decimal);\n  };\n\n  const padZeroLeft = (num, digit) => {\n    return Array(Math.max(digit - String(num).length + 1, 0)).join(0) + num;\n  };\n\n  const createGraph = () => {\n\n    const layerNum = attentions.length;\n    const headNum = attentions[0].length;\n    const layerNameWidth = 47;\n    const headNameHeight = 20;\n\n    // console.log(SVGWidth, SVGHeight);\n\n    let availableWidth = SVGWidth - 210 - layerNameWidth - SVGPadding.left - SVGPadding.right;\n    let availableHeight = SVGHeight - SVGPadding.top - SVGPadding.bottom - headNameHeight;\n\n    let availableLength = Math.min(availableHeight, availableWidth);\n    // console.log(SVGHeight, availableLength, availableWidth, availableHeight);\n    const gridGap = 8;\n\n    const gridLength = Math.floor((availableHeight - (layerNum - 1) * gridGap) / layerNum);\n    const maxOutRadius = gridLength / 2;\n    const minOutRadius = 10;\n\n    let adjustedRowGap = Math.floor((availableWidth - maxOutRadius - headNum * gridLength) / (layerNum - 1));\n    let adjustedColGap = Math.floor((availableHeight - layerNum * gridLength) / (layerNum - 1));\n\n    svg = d3.select('.atlas-svg-full')\n      .attr('viewbox', `0 0 ${availableWidth + layerNameWidth} ${availableHeight}`)\n      .attr('width', availableWidth + layerNameWidth)\n      .attr('height', availableHeight + headNameHeight);\n\n    // Add a border\n    svg.append('rect')\n      .attr('class', 'border-rect')\n      .attr('width', availableLength)\n      .attr('height', availableLength)\n      .style('stroke', 'black')\n      .style('fill', 'none');\n\n    let donutGroup = svg.append('g')\n      .attr('class', 'donut-group')\n      .attr('transform', `translate(${SVGPadding.left + maxOutRadius + layerNameWidth},\n        ${maxOutRadius + headNameHeight})`);\n    \n    // Create color scale\n    let hueScale = d3.scaleLinear()\n      .domain([-1, 0, 1])\n      .range([red, purple, blue]);\n\n    let lightnessScale = d3.scaleLinear()\n      .domain([0, 1])\n      .range([130, 40]);\n\n    // Use square root scale\n    let outRadiusScale = d3.scaleLinear()\n      .domain([0, 1])\n      .range([minOutRadius, maxOutRadius]);\n\n    let ringRadiusScale = d3.scaleLinear()\n      .domain([0, 1])\n      .range([4, 7]);\n\n    let scales = {\n      hueScale: hueScale,\n      lightnessScale: lightnessScale,\n      outRadiusScale: outRadiusScale,\n      ringRadiusScale: ringRadiusScale\n    };\n\n    let donuts = donutGroup.selectAll('g.donut')\n      .data(atlasData)\n      .join('g')\n      .attr('class', 'donut')\n      .attr('transform', d => `translate(${d.head * (maxOutRadius * 2 + adjustedRowGap)},\n        ${(layerNum - d.layer - 1) * (maxOutRadius * 2 + adjustedColGap)})`)\n      .style('pointer-events', 'fill')\n      .style('cursor', 'pointer');\n\n    // Draw the donuts\n    donuts.each((d, i, g) => drawDonut(d, i, g, scales));\n\n    donuts.on('mouseover',\n      (e, d) => {\n        // Show the tooltip\n        let node = e.currentTarget;\n        let position = node.getBoundingClientRect();\n        let curWidth = position.right - position.left;\n\n        let tooltipCenterX = position.x + curWidth / 2;\n        let tooltipCenterY = position.y - 90;\n\n        tooltipConfig.html = `\n        <div class='tooltip-tb' style='display: flex; flex-direction: column;\n          justify-content: center; font-weight: 600;'>\n          <div> Layer ${d.layer + 1} Head ${d.head + 1} </div>\n          <div style='font-size: 12px; opacity: 0.6;'> Semantic: ${round(d.semantic, 2)} </div>\n          <div style='font-size: 12px; opacity: 0.6;'> Syntactic ${round(d.syntactic, 2)} </div>\n          <div style='font-size: 12px; opacity: 0.6;'> Importance: ${round(d.confidence, 2)} </div>\n        </div>\n        `;\n        tooltipConfig.width = 130;\n        tooltipConfig.maxWidth = 130;\n        tooltipConfig.left = tooltipCenterX - tooltipConfig.width / 2;\n        tooltipConfig.top = tooltipCenterY;\n        tooltipConfig.fontSize = '0.8em';\n        tooltipConfig.show = true;\n        tooltipConfigStore.set(tooltipConfig);\n\n        // Show the background rect\n        let curDonut = d3.select(e.currentTarget);\n\n        if (!curDonut.classed('selected')){\n          curDonut.select('.donut-rect')\n            .style('opacity', 1);\n        }\n      })\n      .on('mouseleave', (e) => {\n        // TODO\n        // let datum = d3.select(e.target).data()[0];\n        // if (datum.layer === 2 && datum.head === 9) {\n        //   return;\n        // }\n\n        tooltipConfig.show = false;\n        tooltipConfigStore.set(tooltipConfig);\n\n        // Hide the background rect\n        let curDonut = d3.select(e.currentTarget);\n        if (!curDonut.classed('selected')){\n          curDonut.select('.donut-rect')\n            .style('opacity', 0);\n        }\n\n      })\n      .on('click', (e, d) => {\n        sideInfo.show = true;\n        sideInfo.attention = attentions[d.layer][d.head];\n        sideInfo.tokens = saliencies.tokens.map(d => { return { 'token': d.token }; });\n        sideInfo.layer = d.layer;\n        sideInfo.head = d.head;\n        sideStore.set(sideInfo);\n      })\n      .on('dblclick', (e) => {\n        // console.log('double!');\n        let curDonut = d3.select(e.currentTarget);\n        if (curDonut.classed('selected')) {\n          // pass\n        } else {\n          // Restore the currently selected rect\n          let preDonut = d3.select(\n            donutGroup.select(`#donut-rect-${curLayer}-${curHead}`)\n              .node().parentNode\n          );\n\n          preDonut.select('.donut-rect')\n            .style('fill', 'hsl(0, 0%, 80%)')\n            .style('opacity', 0);\n          \n          preDonut.classed('selected', false);\n\n          // Style the new rect\n          curDonut.select('.donut-rect')\n            .style('fill', 'hsl(27, 47%, 13%)')\n            .style('opacity', 1);\n          \n          curDonut.classed('selected', true);\n\n          curLayer = +curDonut.data()[0].layer;\n          curHead = +curDonut.data()[0].head;\n\n          mapHead.layer = curLayer;\n          mapHead.head = curHead;\n          mapHeadStore.set(mapHead);\n        }\n      });\n\n    // Draw horizontal lines between rows\n    donutGroup.selectAll('g.row-line-group')\n      .data(Array(layerNum - 1).fill(0).map( (_, i) => i))\n      .join('g')\n      .attr('class', 'row-line-group')\n      .append('path')\n      .attr('d', d => {\n        return `M${-maxOutRadius}\n        ${(layerNum - d - 1 - 1/2) * (maxOutRadius * 2 + adjustedColGap)}\n        L${headNum * (maxOutRadius * 2 + adjustedRowGap) - maxOutRadius}\n        ${(layerNum - d - 1 - 1/2) * (maxOutRadius * 2 + adjustedColGap)}`;\n      })\n      .style('stroke', 'hsla(0, 0%, 0%, 0.1)');\n\n    // Draw the label names\n    let nameGroup = svg.append('g')\n      .attr('class', 'name-group')\n      .attr('transform', `translate(${SVGPadding.left}, ${maxOutRadius + headNameHeight})`);\n    \n    nameGroup.selectAll('g.layer-name-group')\n      .data(Array(layerNum).fill(0).map( (_, i) => i))\n      .join('g')\n      .attr('class', 'layer-name-group')\n      .attr('transform', d => `translate(${layerNameWidth - 10},\n        ${(layerNum - d - 1) * (maxOutRadius * 2 + adjustedColGap)})`)\n      .append('text')\n      .text(d => d > 0 ? d + 1 : `Layer ${d + 1}`);\n\n    let headNameGroup = svg.append('g')\n      .attr('class', 'name-group')\n      .attr('transform', `translate(${SVGPadding.left + layerNameWidth + maxOutRadius},\n        ${9})`);\n\n    headNameGroup.selectAll('g.head-name-group')\n      .data(Array(layerNum).fill(0).map( (_, i) => i))\n      .join('g')\n      .attr('class', 'head-name-group')\n      .attr('transform', d => `translate(${d * (maxOutRadius * 2 + adjustedRowGap)},\n        ${0})`)\n      .append('text')\n      .text(d => d > 0 ? d + 1 : `Head ${d + 1}`);\n\n    d3.select(viewContainer)\n      .select('.head-arrow')\n      .style('top', `${70 - 40}px`)\n      .style('left', `${availableWidth - 170}px`);\n\n    d3.select(viewContainer)\n      .select('.layer-arrow')\n      .style('top', `${70}px`)\n      .style('left', `${availableWidth + 10}px`);\n\n    let curDonut = d3.select(\n      donutGroup.select(`#donut-rect-${curLayer}-${curHead}`)\n        .node().parentNode\n    );\n\n    // Style the new rect\n    curDonut.select('.donut-rect')\n      .style('fill', 'hsl(27, 47%, 13%)')\n      .style('opacity', 1);\n    \n    curDonut.classed('selected', true);\n  };\n\n  const drawDonut = (d, i, g, scales) => {\n    let donut = d3.select(g[i]);\n\n    let outRadius = scales.outRadiusScale(d.confidence);\n    let ringRadius = scales.ringRadiusScale(d.confidence);\n    let inRadius = Math.max(0, outRadius - ringRadius);\n\n    // Draw the background rect\n    let maxLength = 2 * scales.outRadiusScale.range()[1];\n    donut.append('rect')\n      .attr('class', 'donut-rect')\n      .attr('id', `donut-rect-${d.layer}-${d.head}`)\n      .attr('x', - maxLength / 2)\n      .attr('y', - maxLength / 2)\n      .attr('rx', 5)\n      .attr('width', maxLength)\n      .attr('height', maxLength)\n      .style('fill', 'hsl(0, 0%, 80%)')\n      .style('opacity', 0);\n\n    // Draw an invisible circle for interaction\n    donut.append('circle')\n      .attr('cx', 0)\n      .attr('cy', 0)\n      .attr('r', outRadius)\n      .style('fill', '#FDFCFC')\n      .style('opacity', 1);\n\n    // Draw the rings\n    // Arc's center is at (0, 0) on the local coordinate\n    let arc = d3.arc()\n      .outerRadius(outRadius)\n      .innerRadius(inRadius)\n      .startAngle(0)\n      .endAngle(Math.PI * 2);\n\n    let color = d3.hcl(scales.hueScale(d.syntactic - d.semantic));\n    color.l = scales.lightnessScale(Math.max(d.semantic, d.syntactic));\n\n    donut.append('path')\n      .attr('class', 'donut-chart')\n      .attr('d', arc)\n      .style('fill', color);\n\n    // Draw the edges\n    // Figure out the token positions\n    let tokenPos = [];\n    for (let i = 0; i < tokenSize; i++) {\n      let curAngle = -Math.PI / 2 + i * (Math.PI * 2 / tokenSize);\n      tokenPos.push({\n        x: Math.cos(curAngle) * inRadius,\n        y: Math.sin(curAngle) * inRadius,\n        token: d.token,\n        id: i\n      });\n    }\n\n    // Create the links\n    let links = [];\n\n    // Todo\n    // let threshold = 0.2;\n    let threshold = 0;\n\n    for (let i = 0; i < tokenSize; i++) {\n      for (let j = 0; j < tokenSize; j++) {\n        let curAttention = attentions[d.layer][d.head][i][j];\n        if (curAttention > threshold) {\n          links.push({\n            source: i,\n            target: j,\n            attention: curAttention,\n            id: `${i}-${j}`\n          });\n        }\n      }\n    }\n\n    links = links.sort((a, b) => b.attention - a.attention).slice(0, 150);\n\n    // Define link width scale\n    let linkWidthScale = d3.scaleLinear()\n      .domain(d3.extent(links.map(d => d.attention)))\n      .range([0.2, 0.7]);\n\n    let linkOpacityScale = d3.scaleLinear()\n      // .domain(d3.extent(links.map(d => d.attention)))\n      .domain([0, 1])\n      .range([0.1, 1]);\n\n    // Draw the links as bezier curves\n    donut.selectAll('path.donut-link')\n      .data(links, d => d.id)\n      .join('path')\n      .attr('class', 'donut-link')\n      .attr('d', d => {\n        let source = tokenPos[d.source];\n        let target = tokenPos[d.target];\n        const center = {x: 0, y: 0};\n        const radialCurveAlpha = 2 / 5;\n        \n        // Two control points symmetric regarding the center point\n        let controlP1 = {\n          x: center.x + (source.x - center.x) * radialCurveAlpha,\n          y: center.y + (source.y - center.x) * radialCurveAlpha\n        };\n\n        let controlP2 = {\n          x: center.x + (target.x - center.x) * radialCurveAlpha,\n          y: center.y + (target.y - center.x) * radialCurveAlpha\n        };\n        \n        return `M ${source.x},${source.y} C${controlP1.x}, ${controlP1.y},\n          ${controlP2.x}, ${controlP2.y}, ${target.x},${target.y}`;\n      })\n      .style('fill', 'none')\n      .style('stroke', color)\n      .style('stroke-width', d => linkWidthScale(d.attention))\n      .style('opacity', d => linkOpacityScale(d.attention));\n\n  };\n\n  const initData = async (attentionFile, saliencyFile, atlasFile) => {\n    // Init attention data\n    attentions = await d3.json(attentionFile);\n\n    // init atlas data\n    atlasData = await d3.json(atlasFile);\n    \n    // Init saliency data\n    saliencies = await d3.json(saliencyFile);\n    saliencies = saliencies[instanceID];\n    tokenSize = saliencies.tokens.length;\n  };\n\n  const closeClicked = () => {\n    sideInfo.show = false;\n    sideStore.set(sideInfo);\n    dispatch('close');\n  };\n\n  const badgeClicked = () => {\n    if (isShown) {\n      dispatch('close');\n      isShown = false;\n\n      d3.select(viewContainer)\n        .select('.svg-container')\n        .transition('move')\n        .duration(700)\n        .ease(ease)\n        .style('opacity', 0);\n\n      // Change the badge style\n      d3.timer(() => {\n        let badge = d3.select(viewContainer)\n          .select('.badge')\n          .style('border-left', '1px solid hsl(0, 0%, 90.2%)')\n          .style('border-radius', '5px')\n          .style('box-shadow', '-3px 3px 3px hsla(0, 0%, 0%, 0.06)')\n          .style('margin-left', '5px');\n        \n        badge.select('.badge-title')\n          .style('visibility', 'hidden');\n\n        badge.select('.icon-wrapper > img')\n          .attr('src', 'PUBLIC_URL/figures/map-marked-alt-solid.svg');\n      }, 400);\n    } else {\n      dispatch('open');\n      isShown = true;\n\n      d3.select(viewContainer)\n        .select('.svg-container')\n        .transition('move')\n        .duration(700)\n        .ease(ease)\n        .style('opacity', 1);\n\n      // Change the badge style\n      d3.timer(() => {\n        let badge = d3.select(viewContainer)\n          .select('.badge')\n          .style('border-left', null)\n          .style('border-radius', '0 5px 5px 0')\n          .style('box-shadow', null)\n          .style('margin-left', null);\n        \n        badge.select('.badge-title')\n          .style('visibility', 'visible');\n\n        badge.select('.icon-wrapper > img')\n          .attr('src', 'PUBLIC_URL/figures/chevron-right-solid.svg');\n      }, 400);\n    }\n  };\n\n  onMount(async () => {\n    // Load the attention and atlas data\n    if (attentions == null || atlasData == null || saliencies == null) {\n      initData(\n        `PUBLIC_URL/data/sst2-attention-data/attention-${padZeroLeft(instanceID, 4)}.json`,\n        'PUBLIC_URL/data/sst2-saliency-list-grad-l1.json',\n        'PUBLIC_URL/data/sst2-atlas.json'\n      );\n    }\n  });\n\n  instanceIDStore.subscribe(async value => {\n    if (value !== instanceID) {\n      instanceID = value;\n      saliencies = await d3.json('PUBLIC_URL/data/sst2-saliency-list-grad-l1.json');\n      saliencies = saliencies[instanceID];\n      tokenSize = saliencies.tokens.length;\n      svg.select('*').remove();\n      createGraph();\n    }\n  });\n\n  sideStore.subscribe(value => {sideInfo = value;});\n\n  mapViewConfigStore.subscribe(async value => {\n    if (value.compHeight !== undefined && value.compWidth !== undefined){\n      if (instanceViewConfig === undefined ||\n        (instanceViewConfig.compHeight !== value.compHeight &&\n        instanceViewConfig.compWidth !== value.compWidth)\n      ){\n        instanceViewConfig = value;\n        \n        SVGWidth = instanceViewConfig.compWidth;\n        SVGHeight = instanceViewConfig.compHeight;\n\n        // Load the attention and atlas data\n        if (attentions == null || atlasData == null || saliencies == null) {\n          initData(\n            `PUBLIC_URL/data/sst2-attention-data/attention-${padZeroLeft(instanceID, 4)}.json`,\n            'PUBLIC_URL/data/sst2-saliency-list-grad-l1.json',\n            'PUBLIC_URL/data/sst2-atlas.json'\n          ).then(createGraph);\n        } else {\n          createGraph();\n        }\n      }\n    }\n  });\n  \n\n</script>\n\n<style type='text/scss'>\n\n  @import 'define';\n\n  .svg-container {\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n    position: relative;\n    cursor: default;\n\n    display: flex;\n    flex-direction: row;\n    justify-content: space-around;\n    align-items: flex-end;\n  }\n\n  .atlas-view {\n    display: flex;\n    flex-direction: row;\n    max-width: 100%;\n    position: relative;\n    height: 100%;\n    overflow: hidden;\n    transition: max-width 1000ms ease-in-out;\n\n    border-radius: 10px 0 0 10px;\n    border-bottom: 1px solid hsla(0, 0%, 0%, 0.1);\n    box-shadow: -3px -3px 3px hsla(0, 0%, 0%, 0.1);\n    background: change-color($color: $brown-icon, $lightness: 99%);\n\n    .triangle {\n      content: \"\";\n      position: absolute;\n      top: 500px;\n      left: 0;\n      border-top: 20px solid transparent;\n      border-bottom: 20px solid transparent;\n      border-left: 20px solid hsl(0, 0%, 95%);\n    }\n  }\n\n  .legend-container {\n    padding-bottom: 25px;\n    padding-top: 50px;\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    pointer-events: none;\n\n    :first-child {\n      margin-bottom: 35px;\n    }\n  }\n\n  .bottom-images {\n    display: flex;\n    flex-direction: column;\n\n    :first-child {\n      margin-bottom: 35px;\n    }\n  }\n\n  .atlas-svg-container {\n    position: relative;\n\n    svg {\n      border-right: 1px solid hsl(0, 0%, 90%);\n    }\n  }\n\n  .head-arrow {\n    position: absolute;\n    width: 160px;\n    pointer-events: none;\n  }\n\n  .layer-arrow {\n    position: absolute;\n    height: 160px;\n    pointer-events: none;\n  }\n\n  .control-row {\n    position: absolute;\n    top: 0;\n    left: 0;\n    cursor: default;\n    padding-top: 5px;\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    user-select: none;\n    font-size: 0.9rem;\n    z-index: 5;\n  }\n\n  .lower-atlas-label {\n    color: hsl(0, 0%, 50%);\n    font-size: 1.3rem;\n    margin: 0 20px 0 10px;\n    display: flex;\n    flex-direction: row;\n  }\n\n  .expand-button {\n    padding: 3px 5px;\n    font-size: 1em;\n    display: flex;\n    align-items: center;\n    cursor: pointer;\n  }\n\n  .select-row {\n    position: relative;\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: flex-end;\n\n    border-radius: 5px;\n    border: 1px solid change-color($brown-dark, $lightness: 90%);\n    margin-right: 10px;\n\n    &:hover {\n      background: change-color($brown-dark, $alpha: 0.05);\n    }\n  }\n\n  .icon-wrapper {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    opacity: 0.5;\n    transform: rotate(45deg);\n\n    img {\n      height: 1.2em;\n    }\n  }\n\n  .hidden {\n    visibility: hidden;\n  }\n\n</style>\n\n<div class='atlas-view' bind:this={viewContainer}>\n\n  <div class='triangle' class:hidden={!sideInfo.show}></div>\n\n  <div class='control-row'>\n\n    <div class='lower-atlas-label'>\n      <div class='select-row'>\n        <div class='relation-container' on:click={closeClicked}>\n          <div class='expand-button'>\n            <div class='icon-wrapper'>\n              <img src='PUBLIC_URL/figures/arrow-forward-outline.svg' alt='expanding icon'>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      Attention Head Overview\n    </div>\n\n  </div>\n\n  <div class='svg-container'>\n\n    <div class='atlas-svg-container'>\n      <svg class='atlas-svg-full'></svg>\n    </div>\n\n    <div class='legend-container'>\n      <div>\n        <img src='PUBLIC_URL/figures/click.png' width='180px' alt='click guide'>\n      </div>\n      <div class='bottom-images'>\n        <img src='PUBLIC_URL/figures/size-legend.png' width='160px' alt='size legend'>\n        <img src='PUBLIC_URL/figures/legend.png' width='200px' alt='color legend'>\n      </div>\n    </div>\n\n  </div>\n  \n</div>","<script>\n  import { onMount } from 'svelte';\n  import { sideStore, attentionHeadColorStore } from './store';\n  import { getTokenWidth } from './dependency-view/utils';\n  import * as d3 from 'd3';\n\n  let modalComponent = null;\n  let svg = null;\n  let donut = null;\n  let svgVirtualLength = 500;\n  let svgLength = 480;\n  let markerDef = null;\n\n  let attentionHeadColor = new Map();\n  attentionHeadColorStore.subscribe(value => {attentionHeadColor = value;});\n\n  let modalInfo = {};\n\n  sideStore.subscribe(value => {\n    modalInfo = value;\n\n    if (modalInfo.attention != null) {\n      donut.selectAll('*').remove();\n      drawDonut(donut);\n    }\n  });\n\n  const drawDonut = (donut) => {\n    \n    let color = attentionHeadColor.get([modalInfo.layer, modalInfo.head].toString());\n\n    svg.select('#atlas-side-arrow')\n      .select('path')\n      .attr('fill', color)\n      .attr('stroke', color);\n\n    // Pre-draw the text\n    let tempSVG = d3.select(document.body)\n      .append('svg')\n      .attr('height', 200)\n      .attr('width', 200)\n      .style('visibility', 'hidden');\n\n    const result = getTokenWidth(modalInfo.tokens.map(d => d.token), tempSVG, '0.9em');\n    const maxTextWidth = d3.max(Object.entries(result.textTokenWidths).map(d => d[1]));\n    let inRadius = svgVirtualLength / 2 - maxTextWidth;\n    \n    tempSVG.remove();\n\n    // Figure out the token positions\n    let tokenPos = [];\n    for (let i = 0; i < modalInfo.tokens.length; i++) {\n      let curAngle = -Math.PI / 2 + i * (Math.PI * 2 / modalInfo.tokens.length);\n      tokenPos.push({\n        x: Math.cos(curAngle) * inRadius,\n        y: Math.sin(curAngle) * inRadius,\n        angle: curAngle,\n        token: modalInfo.tokens[i].token,\n        id: i\n      });\n    }\n\n    // Create the links\n    let links = [];\n    let threshold = 0;\n\n    for (let i = 0; i < modalInfo.tokens.length; i++) {\n      for (let j = 0; j < modalInfo.tokens.length; j++) {\n        let curAttention = modalInfo.attention[i][j];\n        if (curAttention > threshold) {\n          links.push({\n            source: i,\n            target: j,\n            attention: curAttention,\n            id: `${i}-${j}`\n          });\n        }\n      }\n    }\n\n    links = links.sort((a, b) => b.attention - a.attention).slice(0, 150);\n\n    // Define link width scale\n    let linkWidthScale = d3.scaleLinear()\n      .domain(d3.extent(links.map(d => d.attention)))\n      .range([0.5, 2]);\n\n    let linkOpacityScale = d3.scaleLinear()\n      // .domain(d3.extent(links.map(d => d.attention)))\n      .domain([0, 1])\n      .range([0.1, 1]);\n    \n    // Draw the texts (will re-draw again later after getting the optimal circle size)\n    let textTokenGroup = donut.append('g')\n      .attr('class', 'token-text-group')\n      .style('font-size', '0.9em')\n      .style('cursor', 'default');\n\n    textTokenGroup.selectAll('text')\n      .data(tokenPos, d => d.id)\n      .join('text')\n      .attr('data-angle', d => d.angle)\n      .attr('transform', d => {\n        let degree = d.angle * 180 / Math.PI;\n        return `rotate(${degree})\n          translate(${inRadius}, 0)\n          rotate(${d.angle >= Math.PI / 2 ? 180 : 0})\n        `;\n      })\n      .attr('dominant-baseline', 'middle')\n      .attr('x', d => d.angle < Math.PI / 2 ? 6 : -6)\n      .attr('text-anchor', d => d.angle < Math.PI / 2 ? 'start' : 'end')\n      .text(d => d.token);\n\n    // Optimize the circle size (maximize the inner bbox)\n    // Need to create a temp svg to work around the drawing delay\n    let textClone = donut.select('.token-text-group').clone(true).remove();\n\n    tempSVG = d3.select(document.body)\n      .append('svg')\n      .attr('viewBox', `0 0 ${svgVirtualLength} ${svgVirtualLength}`)\n      .attr('width', svgLength)\n      .attr('height', svgLength)\n      .style('visibility', 'hidden');\n    \n\n    tempSVG.append(() => textClone.node());\n    let innerBox = tempSVG.select('.token-text-group').node().getBBox();\n    tempSVG.remove();\n\n    let top = svgVirtualLength / 2 + innerBox.y;\n    let bottom = svgVirtualLength - top - innerBox.height;\n    let left = svgVirtualLength / 2 + innerBox.x;\n    let right = svgVirtualLength - left - innerBox.width;\n\n    let radiusGrow = Math.min(top, bottom, left, right);\n\n    // Grow the radius and redraw text, circles and paths\n    inRadius += Math.floor(radiusGrow);\n\n    // Figure out the token positions\n    tokenPos = [];\n    for (let i = 0; i < modalInfo.tokens.length; i++) {\n      let curAngle = -Math.PI / 2 + i * (Math.PI * 2 / modalInfo.tokens.length);\n      tokenPos.push({\n        x: Math.cos(curAngle) * inRadius,\n        y: Math.sin(curAngle) * inRadius,\n        angle: curAngle,\n        token: modalInfo.tokens[i].token,\n        id: i\n      });\n    }\n\n    // Draw invisible background for interaction\n    textTokenGroup.selectAll('rect')\n      .data(tokenPos, d => d.id)\n      .join('rect')\n      .attr('transform', d => {\n        let degree = d.angle * 180 / Math.PI;\n        return `rotate(${degree})\n          translate(${inRadius}, 0)\n        `;\n      })\n      .attr('x', 0)\n      .attr('y', -5)\n      .attr('width', 50)\n      .attr('height', 15)\n      .style('fill', 'white')\n      .style('opacity', 0)\n      .on('mouseover', (e, d) => {\n        svg.select('#atlas-side-arrow')\n          .select('path')\n          .attr('opacity', 0.1);\n\n        donut.select('.path-group')\n          .selectAll('path.donut-link')\n          .style('opacity', 0.1);\n\n        donut.select('.path-group')\n          .selectAll('path.donut-link')\n          .filter(dd => {\n            return dd.source === d.id || dd.target === d.id;\n          })\n          .attr('marker-end', 'url(#atlas-side-arrow-hover)')\n          .style('stroke', 'hsl(36, 100%, 55%)')\n          .style('stroke-width', 3)\n          .style('opacity', 1)\n          .raise();\n      })\n      .on('mouseleave', () => {\n        svg.select('#atlas-side-arrow')\n          .select('path')\n          .attr('opacity', null);\n\n        donut.select('.path-group')\n          .selectAll('path.donut-link')\n          .attr('marker-end', 'url(#atlas-side-arrow)')\n          .style('stroke', color)\n          .style('stroke-width', d => linkWidthScale(d.attention))\n          .style('opacity', 1);\n      });\n\n    // Update text position\n    textTokenGroup.selectAll('text')\n      .data(tokenPos, d => d.id)\n      .join('text')\n      .attr('data-angle', d => d.angle)\n      .attr('transform', d => {\n        let degree = d.angle * 180 / Math.PI;\n        return `rotate(${degree})\n          translate(${inRadius}, 0)\n          rotate(${d.angle >= Math.PI / 2 ? 180 : 0})\n        `;\n      })\n      .attr('dominant-baseline', 'middle')\n      .attr('x', d => d.angle < Math.PI / 2 ? 6 : -6)\n      .attr('text-anchor', d => d.angle < Math.PI / 2 ? 'start' : 'end')\n      .text(d => d.token)\n      .on('mouseover', (e, d) => {\n        svg.select('#atlas-side-arrow')\n          .select('path')\n          .attr('opacity', 0.1);\n\n        donut.select('.path-group')\n          .selectAll('path.donut-link')\n          .style('opacity', 0.1);\n\n        donut.select('.path-group')\n          .selectAll('path.donut-link')\n          .filter(dd => {\n            return dd.source === d.id || dd.target === d.id;\n          })\n          .attr('marker-end', 'url(#atlas-side-arrow-hover)')\n          .style('stroke', 'hsl(36, 100%, 55%)')\n          .style('stroke-width', 3)\n          .style('opacity', 1)\n          .raise();\n      })\n      .on('mouseleave', () => {\n        svg.select('#atlas-side-arrow')\n          .select('path')\n          .attr('opacity', null);\n\n        donut.select('.path-group')\n          .selectAll('path.donut-link')\n          .attr('marker-end', 'url(#atlas-side-arrow)')\n          .style('stroke', color)\n          .style('stroke-width', d => linkWidthScale(d.attention))\n          .style('opacity', 1);\n      });\n\n    // Draw the links as bezier curves\n    donut.append('g')\n      .attr('class', 'path-group')\n      .selectAll('path.donut-link')\n      .data(links, d => d.id)\n      .join('path')\n      .attr('class', 'donut-link')\n      .attr('marker-end', 'url(#atlas-side-arrow)')\n      .attr('d', d => {\n        let source = tokenPos[d.source];\n        let target = tokenPos[d.target];\n        const center = {x: 0, y: 0};\n        const radialCurveAlpha = 2 / 5;\n        \n        // Two control points symmetric regarding the center point\n        let controlP1 = {\n          x: center.x + (source.x - center.x) * radialCurveAlpha,\n          y: center.y + (source.y - center.x) * radialCurveAlpha\n        };\n\n        let controlP2 = {\n          x: center.x + (target.x - center.x) * radialCurveAlpha,\n          y: center.y + (target.y - center.x) * radialCurveAlpha\n        };\n        \n        return `M ${source.x},${source.y} C${controlP1.x}, ${controlP1.y},\n          ${controlP2.x}, ${controlP2.y}, ${target.x},${target.y}`;\n      })\n      .style('fill', 'none')\n      .style('stroke', color)\n      .style('stroke-width', d => linkWidthScale(d.attention))\n      .style('opacity', d => linkOpacityScale(d.attention));\n    \n    // Draw the circles\n    donut.append('g')\n      .attr('class', 'token-dot-group')\n      .selectAll('circle.token-dot')\n      .data(tokenPos, d => d.id)\n      .join('circle')\n      .attr('class', 'token-dot')\n      .attr('cx', d => d.x)\n      .attr('cy', d => d.y)\n      .attr('r', 1);\n\n  };\n\n  const drawRadial = () => {\n    svg.append('rect')\n      .attr('width', svgVirtualLength)\n      .attr('height', svgVirtualLength)\n      .style('fill', 'hsla(0, 0%, 100%, 0)');\n    \n    donut = svg.append('g')\n      .attr('class', 'donut')\n      .attr('transform', 'translate(250, 250)');\n\n    markerDef = svg.append('defs')\n      .attr('id', 'atlas-side-arrow-def')\n      .append('marker')\n      .attr('id', 'atlas-side-arrow')\n      .attr('viewBox', [0, 0, 10, 10])\n      .attr('refX', 10)\n      .attr('refY', 5)\n      .attr('markerWidth', 12)\n      .attr('markerHeight', 9)\n      .attr('orient', 'auto')\n      .attr('stroke-width', 1)\n      .attr('markerUnits', 'userSpaceOnUse')\n      .append('path')\n      .attr('d', 'M 0 0 L 10 5 L 0 10 z')\n      .attr('stroke', 'gray')\n      .attr('fill', 'gray');\n\n    markerDef = svg.append('defs')\n      .attr('id', 'atlas-side-arrow-def-hover')\n      .append('marker')\n      .attr('id', 'atlas-side-arrow-hover')\n      .attr('viewBox', [0, 0, 10, 10])\n      .attr('refX', 10)\n      .attr('refY', 5)\n      .attr('markerWidth', 12)\n      .attr('markerHeight', 9)\n      .attr('orient', 'auto')\n      .attr('stroke-width', 1)\n      .attr('markerUnits', 'userSpaceOnUse')\n      .append('path')\n      .attr('d', 'M 0 0 L 10 5 L 0 10 z')\n      .attr('stroke', 'hsl(24, 95%, 59%)')\n      .attr('fill', 'hsl(24, 95%, 59%)');\n\n    // drawDonut(donut);\n  };\n\n  onMount(() => {\n    // Bind drag event\n    let container = d3.select(modalComponent)\n      .select('.svg-container');\n\n    svg = container.select('svg.side-svg')\n      .attr('viewBox', `0 0 ${svgVirtualLength} ${svgVirtualLength}`)\n      .attr('width', '100%')\n      .attr('height', '100%');\n\n    drawRadial();\n\n  });\n\n  const getColor = (layer, head) => {\n    if (attentionHeadColor == null || attentionHeadColor.has === undefined ||\n      !attentionHeadColor.has([layer, head].toString())) {\n      return 'black';\n    } else {\n      return attentionHeadColor.get([layer, head].toString());\n    }\n  };\n\n</script>\n\n<style type='text/scss'>\n  .atlas-side {\n    width: 100%;\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n  }\n\n  .side-svg {\n    width: 100%;\n    height: 100%;\n  }\n\n  .side-title {\n    font-size: 1.3em;\n    cursor: default;\n    pointer-events: none;\n  }\n\n</style>\n\n\n<div class='atlas-side' bind:this={modalComponent}>\n\n  <div class='side-title'\n    style={`color: ${getColor(modalInfo.layer, modalInfo.head)}`}>\n    Layer {modalInfo.layer + 1} Head {modalInfo.head + 1}\n  </div>\n\n  <div class='svg-container'>\n    <svg class='side-svg'></svg>\n  </div>\n\n\n</div>","<script>\n  import * as d3 from 'd3';\n  import { onMount } from 'svelte';\n  import { tooltipConfigStore } from './store';\n\n  let tooltipConfig = {\n    show: false,\n    html: 'null',\n    left: 0,\n    top: 0,\n    width: 80,\n    maxWidth: 80,\n    fontSize: '1em'\n  };\n\n  let tooltip = null;\n\n  $: style = `left: ${tooltipConfig.left}px; top: ${tooltipConfig.top}px;\n    width: ${tooltipConfig.width}px; max-width: ${tooltipConfig.maxWidth}px;\n    font-size: ${tooltipConfig.fontSize}`;\n\n  tooltipConfigStore.subscribe(value => {\n\n    let selection = d3.select(tooltip);\n    if (value.show) {\n      selection.style('visibility', 'visible');\n      d3.select(tooltip)\n        .transition()\n        .duration(100)\n        .ease(d3.easeQuadInOut)\n        .style('opacity', 1);\n    } else {\n      d3.select(tooltip)\n        .transition()\n        .delay(100)\n        .duration(200)\n        .ease(d3.easeQuadInOut)\n        .style('opacity', 0)\n        .on('end', function() {\n          d3.select(this)\n            .style('visibility', 'hidden');\n        });\n    }\n\n    tooltipConfig = value;\n  });\n\n  onMount(() => {\n    d3.select(tooltip).style('visibility', 'hidden');\n    tooltipConfigStore.set(tooltipConfig);\n  });\n\n</script>\n\n<style>\n  .tooltip {\n    position: absolute;\n    color: white;\n    background-color: black;\n    padding: 5px 5px;\n    border-radius: 5px;\n    opacity: 1;\n    z-index: 20;\n    visibility: visible;\n    transition: opacity 150ms, visibility 150ms;\n    display: flex;\n    justify-content: center;\n    box-sizing: border-box;\n  }\n</style>\n\n<div class=\"tooltip\" style={style} bind:this={tooltip}>\n  {@html tooltipConfig.html}\n</div>","<script>\n  import { onMount } from 'svelte';\n  import { lowerMapViewConfigStore, attentionHeadColorStore,\n    tooltipConfigStore, mapHeadStore } from './store';\n  import { createEventDispatcher } from 'svelte';\n  import * as d3 from 'd3';\n\n  let svg = null;\n  let atlasData = null;\n  let attentions = null;\n  let saliencies = null;\n  let tokenSize = null;\n\n  // Tooltip variables\n  let tooltipConfig = null;\n  tooltipConfigStore.subscribe(value => {tooltipConfig = value;});\n\n  let viewContainer = null;\n  let mapHead = {layer: 9, head: 8};\n  let curLayer = 9;\n  let curHead = 8;\n\n  let attentionHeadColors = new Map;\n\n  const red = d3.hcl(23, 85, 56);\n  const purple = d3.hcl(328, 85, 56);\n  const blue = d3.hcl(274, 85, 56);\n\n  let instanceID = 1562;\n  const dispatch = createEventDispatcher();\n  let isShown = true;\n\n  let SVGWidth = 800;\n  let SVGHeight = 800;\n\n  let instanceViewConfig = undefined;\n\n  const SVGPadding = {top: 40, left: 10, right: 10, bottom: 3};\n\n  const ease = d3.easeCubicInOut;\n\n  const round = (num, decimal) => {\n    return Math.round((num + Number.EPSILON) * (10 ** decimal)) / (10 ** decimal);\n  };\n\n  const padZeroLeft = (num, digit) => {\n    return Array(Math.max(digit - String(num).length + 1, 0)).join(0) + num;\n  };\n\n  const createGraph = () => {\n\n    const layerNum = attentions.length;\n    const headNum = attentions[0].length;\n    const layerNameWidth = 35;\n    const headNameHeight = 17;\n\n    let availableWidth = SVGWidth - layerNameWidth - SVGPadding.left - SVGPadding.right;\n    let availableHeight = SVGHeight - SVGPadding.top - SVGPadding.bottom - headNameHeight;\n\n    let availableLength = Math.min(availableHeight, availableWidth);\n    // console.log(SVGHeight, availableLength, availableWidth, availableHeight);\n    const gridGap = 8;\n\n    const gridLength = Math.floor((availableHeight - (layerNum - 1) * gridGap) / layerNum);\n    const maxOutRadius = gridLength / 2;\n    const minOutRadius = 3;\n\n    let adjustedRowGap = Math.floor((availableWidth - maxOutRadius - headNum * gridLength) / (layerNum - 1));\n    let adjustedColGap = Math.floor((availableHeight - layerNum * gridLength) / (layerNum - 1));\n\n    svg = d3.select(svg)\n      .attr('width', availableWidth + layerNameWidth)\n      .attr('height', availableHeight + headNameHeight);\n\n    // Add a border\n    svg.append('rect')\n      .attr('class', 'border-rect')\n      .attr('width', availableLength)\n      .attr('height', availableLength)\n      .style('stroke', 'black')\n      .style('fill', 'none');\n\n    let donutGroup = svg.append('g')\n      .attr('class', 'donut-group')\n      .attr('transform', `translate(${SVGPadding.left + maxOutRadius + layerNameWidth},\n        ${maxOutRadius + headNameHeight})`);\n    \n    // Create color scale\n    let hueScale = d3.scaleLinear()\n      .domain([-1, 0, 1])\n      .range([red, purple, blue]);\n\n    let lightnessScale = d3.scaleLinear()\n      .domain([0, 1])\n      .range([130, 40]);\n\n    // Use square root scale\n    let outRadiusScale = d3.scaleLinear()\n      .domain([0, 1])\n      .range([minOutRadius, maxOutRadius]);\n\n    let ringRadiusScale = d3.scaleLinear()\n      .domain([0, 1])\n      .range([4, 7]);\n\n    let scales = {\n      hueScale: hueScale,\n      lightnessScale: lightnessScale,\n      outRadiusScale: outRadiusScale,\n      ringRadiusScale: ringRadiusScale\n    };\n\n    let donuts = donutGroup.selectAll('g.donut')\n      .data(atlasData)\n      .join('g')\n      .attr('class', 'donut')\n      .style('cursor', 'pointer')\n      .attr('transform', d => `translate(${d.head * (maxOutRadius * 2 + adjustedRowGap)},\n        ${(layerNum - d.layer - 1) * (maxOutRadius * 2 + adjustedColGap)})`);\n\n    // Draw the donuts\n    donuts.each((d, i, g) => drawDonut(d, i, g, scales));\n\n    // Record the head color\n    // console.log(attentionHeadColors);\n    attentionHeadColorStore.set(attentionHeadColors);\n\n    donuts.on('mouseover',\n      (e, d) => {\n        // Show the tooltip\n        let node = e.currentTarget;\n        let position = node.getBoundingClientRect();\n        let curWidth = position.right - position.left;\n\n        let tooltipCenterX = position.x + curWidth / 2;\n        let tooltipCenterY = position.y - 90;\n\n        tooltipConfig.html = `\n        <div class='tooltip-tb' style='display: flex; flex-direction: column;\n          justify-content: center; font-weight: 800;'>\n          <div> Layer ${d.layer + 1} Head ${d.head + 1} </div>\n          <div style='font-size: 12px; opacity: 0.6;'> Semantic: ${round(d.semantic, 2)} </div>\n          <div style='font-size: 12px; opacity: 0.6;'> Syntactic ${round(d.syntactic, 2)} </div>\n          <div style='font-size: 12px; opacity: 0.6;'> Importance: ${round(d.confidence, 2)} </div>\n        </div>\n        `;\n        tooltipConfig.width = 130;\n        tooltipConfig.maxWidth = 130;\n        tooltipConfig.left = tooltipCenterX - tooltipConfig.width / 2;\n        tooltipConfig.top = tooltipCenterY;\n        tooltipConfig.fontSize = '0.8em';\n        tooltipConfig.show = true;\n        tooltipConfigStore.set(tooltipConfig);\n\n        // Show the background rect\n        let curDonut = d3.select(e.currentTarget);\n\n        if (!curDonut.classed('selected')){\n          curDonut.select('.donut-rect')\n            .style('opacity', 1);\n        }\n      })\n      .on('mouseleave', (e) => {\n        tooltipConfig.show = false;\n        tooltipConfigStore.set(tooltipConfig);\n\n        // Hide the background rect\n        let curDonut = d3.select(e.currentTarget);\n        if (!curDonut.classed('selected')){\n          curDonut.select('.donut-rect')\n            .style('opacity', 0);\n        }\n\n      })\n      .on('click', (e) => {\n        let curDonut = d3.select(e.currentTarget);\n        if (curDonut.classed('selected')) {\n          // pass\n        } else {\n          // Restore the currently selected rect\n          let preDonut = d3.select(\n            donutGroup.select(`#donut-rect-${curLayer}-${curHead}`)\n              .node().parentNode\n          );\n\n          preDonut.select('.donut-rect')\n            .style('fill', 'hsl(0, 0%, 80%)')\n            .style('opacity', 0);\n          \n          preDonut.classed('selected', false);\n\n          // Style the new rect\n          curDonut.select('.donut-rect')\n            .style('fill', 'hsl(27, 47%, 13%)')\n            .style('opacity', 1);\n          \n          curDonut.classed('selected', true);\n\n          curLayer = +curDonut.data()[0].layer;\n          curHead = +curDonut.data()[0].head;\n\n          mapHead.layer = curLayer;\n          mapHead.head = curHead;\n          mapHeadStore.set(mapHead);\n        }\n      });\n\n    // Draw horizontal lines between rows\n    donutGroup.selectAll('g.row-line-group')\n      .data(Array(layerNum - 1).fill(0).map( (_, i) => i))\n      .join('g')\n      .attr('class', 'row-line-group')\n      .append('path')\n      .attr('d', d => {\n        return `M${-maxOutRadius}\n        ${(layerNum - d - 1 - 1/2) * (maxOutRadius * 2 + adjustedColGap)}\n        L${headNum * (maxOutRadius * 2 + adjustedRowGap) - maxOutRadius}\n        ${(layerNum - d - 1 - 1/2) * (maxOutRadius * 2 + adjustedColGap)}`;\n      })\n      .style('stroke', 'hsla(0, 0%, 0%, 0.1)');\n\n    // Draw the label names\n    let nameGroup = svg.append('g')\n      .attr('class', 'name-group')\n      .attr('transform', `translate(${SVGPadding.left}, ${maxOutRadius + headNameHeight})`);\n    \n    nameGroup.selectAll('g.layer-name-group')\n      .data(Array(layerNum).fill(0).map( (_, i) => i))\n      .join('g')\n      .attr('class', 'layer-name-group')\n      .attr('transform', d => `translate(${layerNameWidth - 5},\n        ${(layerNum - d - 1) * (maxOutRadius * 2 + adjustedColGap)})`)\n      .append('text')\n      .text(d => d > 0 ? d + 1 : `Layer ${d + 1}`);\n      \n    let headNameGroup = svg.append('g')\n      .attr('class', 'name-group')\n      .attr('transform', `translate(${SVGPadding.left + layerNameWidth + maxOutRadius},\n        ${5})`);\n\n    headNameGroup.selectAll('g.head-name-group')\n      .data(Array(layerNum).fill(0).map( (_, i) => i))\n      .join('g')\n      .attr('class', 'head-name-group')\n      .attr('transform', d => `translate(${d * (maxOutRadius * 2 + adjustedRowGap)},\n        ${0})`)\n      .append('text')\n      .text(d => d > 0 ? d + 1 : `Head ${d + 1}`);\n\n    // console.log(atlasData);\n\n    d3.select(viewContainer)\n      .select('.head-arrow')\n      .style('top', `${70 - 40}px`)\n      .style('left', `${availableWidth - 170}px`);\n\n    d3.select(viewContainer)\n      .select('.layer-arrow')\n      .style('top', `${70}px`)\n      .style('left', `${availableWidth + 10}px`);\n\n    // Highlight the initial selection\n    let curDonut = d3.select(\n      donutGroup.select(`#donut-rect-${curLayer}-${curHead}`)\n        .node().parentNode\n    );\n\n    // Style the new rect\n    curDonut.select('.donut-rect')\n      .style('fill', 'hsl(27, 47%, 13%)')\n      .style('opacity', 1);\n    \n    curDonut.classed('selected', true);\n  };\n\n  mapHeadStore.subscribe(value => {\n    mapHead = value;\n    // console.log(mapHead, curLayer, curHead);\n\n    if (mapHead.layer !== curLayer || mapHead.head !== curHead) {\n\n      let donutGroup = svg.select('g.donut-group');\n\n      // Restore the currently selected rect\n      let preDonut = d3.select(\n        donutGroup.select(`#donut-rect-${curLayer}-${curHead}`)\n          .node().parentNode\n      );\n      \n      preDonut.select('.donut-rect')\n        .style('fill', 'hsl(0, 0%, 80%)')\n        .style('opacity', 0);\n\n      preDonut.classed('selected', false);\n\n      curLayer = mapHead.layer;\n      curHead = mapHead.head;\n\n      let curDonut = d3.select(\n        donutGroup.select(`#donut-rect-${curLayer}-${curHead}`)\n          .node().parentNode\n      );\n\n      // Style the new rect\n      curDonut.select('.donut-rect')\n        .style('fill', 'hsl(27, 47%, 13%)')\n        .style('opacity', 1);\n      \n      curDonut.classed('selected', true);\n    }\n  });\n\n  const drawDonut = (d, i, g, scales) => {\n    let donut = d3.select(g[i]);\n\n    let outRadius = scales.outRadiusScale(d.confidence);\n    let ringRadius = scales.ringRadiusScale(d.confidence);\n    let inRadius = Math.max(0, outRadius - ringRadius);\n\n    // Draw the background rect\n    let maxLength = 2 * scales.outRadiusScale.range()[1];\n    donut.append('rect')\n      .attr('class', 'donut-rect')\n      .attr('id', `donut-rect-${d.layer}-${d.head}`)\n      .attr('x', - maxLength / 2)\n      .attr('y', - maxLength / 2)\n      .attr('rx', 5)\n      .attr('width', maxLength)\n      .attr('height', maxLength)\n      .style('fill', 'hsl(0, 0%, 80%)')\n      .style('opacity', 0);\n\n    // Draw the rings\n    // Arc's center is at (0, 0) on the local coordinate\n    let arc = d3.arc()\n      .outerRadius(outRadius)\n      .innerRadius(0)\n      .startAngle(0)\n      .endAngle(Math.PI * 2);\n\n    let color = d3.hcl(scales.hueScale(d.syntactic - d.semantic));\n    color.l = scales.lightnessScale(Math.max(d.semantic, d.syntactic));\n\n    // Record the color\n    attentionHeadColors.set([d.layer, d.head].toString(), color.formatHex());\n\n    donut.append('path')\n      .attr('class', 'donut-chart')\n      .attr('d', arc)\n      .style('fill', color);\n\n    // Draw the edges\n    // Figure out the token positions\n    let tokenPos = [];\n    for (let i = 0; i < tokenSize; i++) {\n      let curAngle = -Math.PI / 2 + i * (Math.PI * 2 / tokenSize);\n      tokenPos.push({\n        x: Math.cos(curAngle) * inRadius,\n        y: Math.sin(curAngle) * inRadius,\n        token: d.token,\n        id: i\n      });\n    }\n  };\n\n  const initData = async (attentionFile, saliencyFile, atlasFile) => {\n    // Init attention data\n    attentions = await d3.json(attentionFile);\n\n    // init atlas data\n    atlasData = await d3.json(atlasFile);\n    \n    // Init saliency data\n    saliencies = await d3.json(saliencyFile);\n    saliencies = saliencies[instanceID];\n    tokenSize = saliencies.tokens.length;\n  };\n\n  onMount(async () => {\n    // Load the attention and atlas data\n    if (attentions == null || atlasData == null || saliencies == null) {\n      initData(\n        `PUBLIC_URL/data/sst2-attention-data/attention-${padZeroLeft(instanceID, 4)}.json`,\n        'PUBLIC_URL/data/sst2-saliency-list-grad-l1.json',\n        'PUBLIC_URL/data/sst2-atlas.json'\n      );\n    }\n  });\n\n  lowerMapViewConfigStore.subscribe(async value => {\n    if (value.compHeight !== undefined && value.compWidth !== undefined){\n      if (instanceViewConfig === undefined ||\n        (instanceViewConfig.compHeight !== value.compHeight &&\n        instanceViewConfig.compWidth !== value.compWidth)\n      ){\n        instanceViewConfig = value;\n        \n        SVGWidth = instanceViewConfig.compWidth;\n        SVGHeight = instanceViewConfig.compHeight;\n\n        // Load the attention and atlas data\n        if (attentions == null || atlasData == null || saliencies == null) {\n          initData(\n            `PUBLIC_URL/data/sst2-attention-data/attention-${padZeroLeft(instanceID, 4)}.json`,\n            'PUBLIC_URL/data/sst2-saliency-list-grad-l1.json',\n            'PUBLIC_URL/data/sst2-atlas.json'\n          ).then(createGraph);\n        } else {\n          createGraph();\n        }\n      }\n    }\n  });\n\n</script>\n\n<style type='text/scss'>\n\n  @import 'define';\n\n  :global(.layer-name-group text) {\n    dominant-baseline: middle;\n    text-anchor: end;\n    font-size: 0.7em;\n    fill: hsla(0, 0%, 0%, 0.3);\n  }\n\n  :global(.head-name-group text) {\n    dominant-baseline: hanging;\n    text-anchor: middle;\n    font-size: 0.7em;\n    fill: hsla(0, 0%, 0%, 0.3);\n  }\n\n  .svg-container {\n    width: 100%;\n    height: 100%;\n    overflow-x: hidden;\n    position: relative;\n    cursor: default;\n\n    display: flex;\n    flex-direction: row;\n    justify-content: space-around;\n    align-items: flex-end;\n  }\n\n  .atlas-view {\n    display: flex;\n    flex-direction: row;\n    max-width: 100%;\n    position: relative;\n    height: 100%;\n    overflow: hidden;\n    transition: max-width 1000ms ease-in-out;\n  }\n\n  .atlas-svg-container {\n    position: relative;\n  }\n\n  .control-row {\n    position: absolute;\n    top: 0;\n    left: 0;\n    cursor: default;\n    padding-top: 5px;\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    user-select: none;\n    font-size: 0.9rem;\n    z-index: 5;\n  }\n\n  .lower-atlas-label {\n    color: hsl(0, 0%, 50%);\n    font-size: 1.3rem;\n    margin: 0 20px 0 20px;\n  }\n\n  .expand-button {\n    padding: 0 0.4em;\n    height: 1.8em;\n    font-size: 1em;\n    display: flex;\n    align-items: center;\n    cursor: pointer;\n  }\n\n  .select-row {\n    position: relative;\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: flex-end;\n\n    border-radius: 5px;\n    border: 1px solid change-color($brown-dark, $lightness: 90%);\n    margin-right: 5px;\n\n    &:hover {\n      background: change-color($brown-dark, $alpha: 0.05);\n    }\n  }\n\n  .icon-wrapper {\n    margin-right: 5px;\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    opacity: 0.5;\n\n    img {\n      height: 1.2em;\n    }\n  }\n  \n  .color-legend {\n    margin-left: 20px;\n    display: flex;\n\n    img {\n      height: 22px;\n    }\n  }\n\n</style>\n\n<div class='atlas-view' bind:this={viewContainer}>\n\n  <div class='control-row'>\n\n    <div class='lower-atlas-label'>\n      Attention Head Overview\n    </div>\n\n    <div class='select-row'>\n      <div class='relation-container' on:click={() => dispatch('open')}>\n        <div class='expand-button'>\n          <div class='icon-wrapper'>\n            <img src='PUBLIC_URL/figures/expand-outline.svg' alt='expanding icon'>\n          </div>\n          Show Detail\n        </div>\n      </div>\n    </div>\n\n    <div class='color-legend'>\n      <img src='PUBLIC_URL/figures/color-legend.png' alt='expanding icon'>\n    </div>\n\n  </div>\n\n\n  <div class='svg-container'>\n\n    <div class='atlas-svg-container'>\n      <svg class='atlas-svg' bind:this={svg}></svg>\n    </div>\n\n  </div>\n  \n</div>","<script>\n  import * as d3 from 'd3';\n\n  export let tooltipShow = false;\n  export let tooltipHtml = \"1.23\";\n  export let left = 0;\n  export let top = 0;\n  export let width = 80;\n  export let maxWidth = 80;\n  export let fontSize = '1em';\n\n  let tooltip = null;\n\n  $: style = `left: ${left}px; top: ${top}px; width: ${width}px; max-width: \n              ${maxWidth}px; font-size: ${fontSize}`;\n  $: tooltipShow, function() {\n    if (tooltip === null) return;\n    let selection = d3.select(tooltip);\n\n    if (tooltipShow) {\n      selection.style('visibility', 'visible');\n\n      d3.select(tooltip)\n        .transition()\n        .duration(200)\n        .ease(d3.easeQuadInOut)\n        .style('opacity', 1);\n    } else {\n      d3.select(tooltip)\n        .transition()\n        .duration(200)\n        .ease(d3.easeQuadInOut)\n        .style('opacity', 0)\n        .on('end', function() {\n          d3.select(this)\n            .style('visibility', 'hidden');\n        });\n    }\n  }();\n\n</script>\n\n<style>\n  .tooltip {\n    position: absolute;\n    color: white;\n    background-color: black;\n    padding: 5px 5px;\n    border-radius: 5px;\n    opacity: 1;\n    z-index: 10;\n    visibility: visible;\n    transition: opacity 150ms, visibility 150ms;\n    display: flex;\n    justify-content: center;\n    box-sizing: border-box;\n  }\n</style>\n\n<div class=\"tooltip\" style={style} bind:this={tooltip}>\n  {@html tooltipHtml}\n</div>","<script>\n  import { onMount, afterUpdate } from 'svelte';\n  import { embeddingViewConfigStore, currInstanceStore } from './store';\n  import Tooltip from './Tooltip.svelte';\n  import * as d3 from 'd3';\n  \n  // Shared states\n  let embeddingViewConfig = undefined;\n\n  let embeddingSVG = null;\n  let embeddingData = null;\n  let selectedInstanceId = 23;\n  let previousSelectedInstanceId = -1;\n\n  let SVGWidth = null;\n  let SVGHeight = null;\n\n  let tooltip = null;\n  let tooltipLeft = 0;\n  let tooltipTop = 0;\n  let tooltipHtml = 'tooltip';\n  let tooltipWidth = 150;\n  let tooltipMaxWidth = 200;\n  let tooltipShow = false;\n  let toolTipFontSize = '0.65em';\n  let charactersToIncludeInTooltip = 40;\n\n  let selectedCircleStrokeColor = 'rgb(100, 149, 237)';\n  let circleRadius = 5;\n  let selectedCircleRadius = 7;\n  let hoveredCircleRadius = 7;\n  let circleOpacity = 0.3;\n  let selectedCircleOpacity = 1;\n  let hoveredCircleOpacity = 1;\n  let nonHoveredCircleOpacity = 0.2;\n  let twitterLabelColorMap = {\n    0 : 'red',\n    1 : 'grey',\n    2 : 'skyblue'\n  };\n  let sst2LabelColorMap = {\n    0 : 'red',\n    1 : 'skyblue'\n  }\n  let twitterLabels = ['negative', 'neutral', 'positive'];\n  let sst2Labels = ['negative', 'positive']\n\n  $: selectedInstanceId, function() {\n    // When selectedInstanceId store value changes, update\n    // embedding highlight.\n    d3.select(embeddingSVG)\n      .select('#circle-' + previousSelectedInstanceId)\n      .attr('r', circleRadius)\n      .style('opacity', circleOpacity)\n      .style('stroke', 'white');\n    d3.select(embeddingSVG)\n      .select('#circle-' + selectedInstanceId)\n      .attr('r', selectedCircleRadius)\n      .style('opacity', selectedCircleOpacity)\n      .style('stroke', selectedCircleStrokeColor)\n      .raise();\n    previousSelectedInstanceId = selectedInstanceId;\n  }();\n\n  const drawEmbeddingsPlot = () => {\n\n    const zoom = d3.zoom()\n      .on('zoom', (event) => {\n        svg.select('g').attr('transform', event.transform);\n      })\n      .scaleExtent([0.5, 10]);\n\n    let svg = d3.select(embeddingSVG)\n      .attr('width', SVGWidth)\n      .attr('height', SVGHeight)\n      .attr('viewBox', [0, 0, SVGWidth, SVGHeight])\n      .style('fill', '#eee')\n      .call(zoom);\n\n    let x = d3.scaleLinear()\n      .domain([Math.min(...embeddingData.map(({coords}) => coords[0])),\n        Math.max(...embeddingData.map(({coords}) => coords[0]))])\n      .range([ 0, SVGWidth ]);\n\n    let y = d3.scaleLinear()\n      .domain([Math.min(...embeddingData.map(({coords}) => coords[1])),\n        Math.max(...embeddingData.map(({coords}) => coords[1]))])\n      .range([ SVGHeight, 0]);\n\n    // Add dots\n    svg.append('g')\n      .selectAll('dot')\n      .data(embeddingData)\n      .enter()\n      .append('circle')\n      .attr('id', function(d) { return 'circle-' + d.id; })\n      .attr('cx', function (d) { return x(d.coords[0]); } )\n      .attr('cy', function (d) { return y(d.coords[1]); } )\n      .attr('r', function(d) {\n        return d.id == selectedInstanceId ? selectedCircleRadius : circleRadius;\n      })\n      .style('fill', function (d) { return sst2LabelColorMap[d.label] })\n      .style('opacity', function(d) {\n        return d.id == selectedInstanceId ? selectedCircleOpacity : circleOpacity;\n      }) \n      .style('stroke', function(d) { \n        return d.id == selectedInstanceId ? selectedCircleStrokeColor : 'white';\n      })\n      .style('stroke-width', '2px')\n      .on('click', transferEmbeddingPointHighlights)\n      .on('mouseover', function(event, d) {\n        showTooltip(event, d);\n        highlightCircleOnMouseover(d);\n      })\n      .on('mouseleave', function(event, d) {\n        tooltipShow = false;\n        unhighlightCircleOnMouseout(d);\n      } );\n    // Raise selected embedding point\n    svg.select('#circle-' + selectedInstanceId)\n      .raise();\n\n    // Draw legend\n    let labels = [...embeddingData.map(({label}) => label)];\n    let uniqueLabels = labels.filter((x, i, a) => a.indexOf(x) === i);\n    let rectangleWidth = 12;\n    let rectanglePadding = 2;\n    // console.log(uniqueLabels.length);\n\n    let legend = svg.selectAll('.legend')\n      .data(uniqueLabels)\n      .enter()\n      .append('g')\n      .attr('class', 'legend')\n      .attr('transform', function(d, i) { \n        return 'translate(0,' + i * (rectangleWidth + rectanglePadding) + ')';\n      });\n\n    legend.append('rect')\n      .attr('x', SVGWidth - 100)\n      .attr('y', SVGHeight - (rectangleWidth * (uniqueLabels.length + 1)))\n      .attr('width', rectangleWidth)\n      .attr('height', rectangleWidth)\n      .style('fill', function(d) { return sst2LabelColorMap[d]} );\n\n    legend.append('text')\n      .attr('x', SVGWidth - 95 + rectangleWidth)\n      .attr('y', SVGHeight - (rectangleWidth * (uniqueLabels.length)))\n      .style('text-anchor', 'start')\n      .style('dominant-baseline', 'text-after-edge')\n      .style('fill', 'black')\n      .style('font-size', '0.7em')\n      .text(function(d) { return d + ' (' + sst2Labels[d] + ')'; });\n  };\n\n  function showTooltip(event, d) {\n    let node = event.currentTarget;\n    let position = node.getBoundingClientRect();\n    let curWidth = position.right - position.left;\n    let tooltipCenterX = position.x + curWidth / 2;\n    let tooltipCenterY = position.y - 40 + window.scrollY;\n    tooltipShow = true;\n\n    tooltipHtml = d.sentence.substring(0, charactersToIncludeInTooltip)\n                + '...';\n    tooltipLeft = tooltipCenterX - tooltipWidth / 2;\n    tooltipTop = tooltipCenterY;\n  }\n\n  function transferEmbeddingPointHighlights(event, d) {\n    d3.select(embeddingSVG)\n      .select('#circle-' + selectedInstanceId)\n      .attr('r', circleRadius)\n      .style('opacity', circleOpacity)\n      .style('stroke', 'white');\n    currInstanceStore.set(d.id);\n    d3.select(this)\n      .attr('r', selectedCircleRadius)\n      .style('opacity', selectedCircleOpacity)\n      .style('stroke', selectedCircleStrokeColor)\n      .raise();\n  }\n\n  function highlightCircleOnMouseover(d) {\n    d3.select(embeddingSVG)\n      .selectAll('circle')\n      .filter(function() { return this.id != 'circle-' + selectedInstanceId\n                           && this.id != 'circle-' + d.id })\n      .style('opacity', nonHoveredCircleOpacity);\n    if (d.id != selectedInstanceId) {\n      d3.select(embeddingSVG)\n        .select('#circle-' + d.id)\n        .attr('r', hoveredCircleRadius)\n        .style('opacity', hoveredCircleOpacity);\n      d3.select(embeddingSVG)\n        .select('#circle-' + d.id).raise();\n    }\n  }\n\n  function unhighlightCircleOnMouseout(d) {\n    d3.select(embeddingSVG)\n      .selectAll('circle')\n      .filter(function() { return this.id != 'circle-' + selectedInstanceId\n                           && this.id != 'circle-' + d.id})\n      .style('opacity', circleOpacity);\n    if (d.id != selectedInstanceId) {\n      d3.select(embeddingSVG)\n        .select('#circle-' + d.id)\n        .attr('r', circleRadius)\n        .style('opacity', circleOpacity);\n    }\n  }\n\n  const renderEmbeddings = async () => {\n    // console.log('loading embeddings');\n    embeddingData = await d3.json('PUBLIC_URL/data/embedding-list-sst2.json');\n    // console.log('loaded embeddings');\n\n    drawEmbeddingsPlot();\n  };\n\n  embeddingViewConfigStore.subscribe(value => {\n    if (value.compHeight !== undefined && value.compWidth !== undefined){\n      if (embeddingViewConfig === undefined ||\n        (embeddingViewConfig.compHeight !== value.compHeight &&\n        embeddingViewConfig.compWidth !== value.compWidth)\n      ){\n        embeddingViewConfig = value;\n        SVGWidth = embeddingViewConfig.compWidth;\n        SVGHeight = embeddingViewConfig.compHeight;\n\n        SVGWidth = 300;\n        SVGHeight = 300;\n        renderEmbeddings();\n      }\n    }\n  });\n\n  onMount(() => {\n    SVGWidth = 350;\n    SVGHeight = 300;\n    renderEmbeddings();\n  });\n\n\n  currInstanceStore.subscribe(value => {\n    selectedInstanceId = value;\n  });\n  \n</script>\n\n<style type='text/scss'>\n\n</style>\n\n<div class='embedding-view'>\n  \n\n  <div class='svg-container'>\n    <Tooltip bind:this={tooltip}\n      left={tooltipLeft}\n      top={tooltipTop}\n      tooltipHtml={tooltipHtml}\n      width={tooltipWidth}\n      tooltipShow={tooltipShow}\n      fontSize={toolTipFontSize}\n      maxWidth={tooltipMaxWidth}\n    />\n    <svg class='embedding-svg' bind:this={embeddingSVG}></svg>\n  </div>\n  \n</div>","<script>\n  import { onMount, afterUpdate } from 'svelte';\n  import { tableViewConfigStore, currInstanceStore } from './store';\n  import * as d3 from 'd3';\n  \n  // Shared states\n  let tableViewConfig = undefined;\n\n  let tableData = [];\n  let selectedInstanceId = 23;\n  let currHighlightedRow = 0;\n  let mostRecentColumnSortCriterion = 'true_label';\n  let isEmbeddingViewUpdate = false;\n\n  let sortState = {\n    sentence: {\n      selected: false,\n      up: false\n    },\n    'true_label': {\n      selected: false,\n      up: false\n    },\n    'predicted_label': {\n      selected: false,\n      up: false\n    },\n    'logit_distance': {\n      selected: false,\n      up: false\n    }\n  };\n\n  let selectedRowColor = 'hsla(0, 0%, 0%, 0.1)';\n\n  let sortBy = {col: 'id', ascending: true};\n\n  $: selectedInstanceId, function(){\n    if (document.getElementsByTagName('table')[0]\n      && document.getElementsByTagName('table')[0]\n        .children[1].children[currHighlightedRow]) {\n      // We sort by most recent column so that placing\n      // the selected instance at the top of the table does\n      // not affect the previous sorting. Reactive for\n      // when the instanceId store value changes from\n      // another source (ie. EmbeddingView).\n      if (isEmbeddingViewUpdate) {\n        // console.log(mostRecentColumnSortCriterion);\n        sort(mostRecentColumnSortCriterion);\n      }\n    }\n    isEmbeddingViewUpdate = true;\n  }();\n  \n  $: sort = (column) => {\n    mostRecentColumnSortCriterion = column;\n    \n    if (sortBy.col == column) {\n      sortBy.ascending = !sortBy.ascending;\n      sortState[column].up = sortBy.ascending;\n      sortState = sortState;\n    } else {\n      if (sortState[sortBy.col] !== undefined) {\n        sortState[sortBy.col].selected = false;\n      }\n      \n      sortBy.col = column;\n      sortBy.ascending = true;\n      sortState[column].selected = true;\n      sortState[column].up = true;\n      sortState = sortState;\n    }\n    \n    let sortModifier = (sortBy.ascending) ? 1 : -1;\n    \n    let sort = (a, b) => \n      (a[column] < b[column]) \n        ? -1 * sortModifier \n        : (a[column] > b[column]) \n          ? 1 * sortModifier \n          : 0;\n    \n    tableData = tableData.sort(sort);\n\n    // If we have an active instance, move it to the begining of the\n    // table regardless of the sort.\n    tableData.forEach(function(item, i){\n      if(item.id == selectedInstanceId){\n        tableData.splice(i, 1);\n        tableData.unshift(item);\n      }\n    });\n    // Update background row color.\n    // Remove style from previously selected row.\n    document.getElementsByTagName('table')[0].children[1]\n      .children[currHighlightedRow].style = 'background-color: inherit;';\n\n    // Add style to top row, since sorting\n    // by column moves selected row to the top.\n    document.getElementsByTagName('table')[0].children[1]\n      .children[0].style = 'background-color: ' + selectedRowColor;\n    currHighlightedRow = 0;\n    isEmbeddingViewUpdate = false;\n  };\n\n  $: getInstance = (row) => {\n    currInstanceStore.set(row.cells[0].innerText);\n    isEmbeddingViewUpdate = false;\n    // console.log('selected row id: ' + row.cells[0].innerText);\n    // Remove style from previously selected row.\n    document.getElementsByTagName('table')[0].children[1]\n      .children[currHighlightedRow].style = 'background-color: inherit;';\n\n    // Style newly selected row.\n    row.style = 'background-color: ' + selectedRowColor;\n    currHighlightedRow = row.rowIndex - 1;\n  };\n\n  tableViewConfigStore.subscribe(value => {\n    if (value.compHeight !== undefined && value.compWidth !== undefined){\n      if (tableViewConfig === undefined\n        || (tableViewConfig.compHeight !== value.compHeight\n        && tableViewConfig.compWidth !== value.compWidth)){\n        tableViewConfig = value;\n      }\n    }\n  });\n\n  currInstanceStore.subscribe(value => {\n    selectedInstanceId = value;\n  });\n\n  onMount(async () => {\n    // console.log('loading table');\n    tableData = await d3.json('PUBLIC_URL/data/table-list-sst2.json');\n    // console.log('loaded table');\n  });\n  \n</script>\n\n<style type='text/scss'>\n  @import 'define';\n\n  table, th, td { \n    font-size: 0.9em;\n  }\n\n  table {\n    width: 100%;\n    table-layout: auto;\n    text-align: center;\n    border-collapse: collapse;\n  }\n\n  td {\n    padding: 0 20px 10px 20px;\n  }\n\n  th {\n    padding: 10px 10px;\n    position: sticky;\n    z-index: 100;\n    top: 0;\n    background: hsla(0, 0%, 98%, 1);\n    background-clip: padding-box;\n    border-bottom: 1px solid hsl(0, 0%, 78%);\n\n    &.sentence {\n      width: 61%;\n      padding: 10px 20px;\n    }\n\n    &.true {\n      width: 11%;\n      padding: 10px 15px;\n    }\n\n    &.predicted {\n      width: 15%;\n      padding: 10px 15px;\n    }\n    \n    &.error {\n      width: 13%;\n      padding: 10px 15px;\n    }\n  }\n\n  .sentence-div {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    cursor: pointer;\n\n    &:hover img{\n      opacity: 0.5;\n    }\n\n    img {\n      margin-left: 3px;\n      width: 20px;\n      opacity: 0.1;\n\n      &.selected {\n        opacity: 1;\n      }\n    }\n  }\n\n  .true-div, .predicted-div, .error-div {\n    display: flex;\n    flex-direction: row;\n    justify-content: flex-end;\n    align-items: center;\n    cursor: pointer;\n\n    &:hover img{\n      opacity: 0.5;\n    }\n\n    img {\n      margin-left: 3px;\n      width: 20px;\n      opacity: 0.1;\n\n      &.selected {\n        opacity: 1;\n      }\n    }\n  }\n\n  tr:hover { \n    background-color: hsla(0, 0%, 0%, 0.05);\n    cursor: default;\n  }\n\n  tr:first-child {\n    background-color: hsla(0, 0%, 0%, 0.1);\n  }\n\n  td.number-row {\n    text-align: right;\n  }\n\n  td.text-row {\n    text-align: left;\n  }\n\n</style>\n\n<div class='table-view'>\n  <table>\n    <thead>\n      <tr>\n        <th style='display: none;' on:click={sort('id')}>id</th>\n        <th class='sentence' on:click={sort('sentence')}>\n          <div class='sentence-div'>\n            Sentence\n            <img src={sortState.sentence.up ? 'PUBLIC_URL/figures/up.svg' : 'PUBLIC_URL/figures/down.svg'}\n              class:selected={sortState.sentence.selected}\n              alt='sort logo'\n            >\n          </div>\n        </th>\n\n        <th class='true' on:click={sort('true_label')}>\n          <div class='true-div'>\n            True\n            <img src={sortState['true_label'].up ? 'PUBLIC_URL/figures/up.svg' : 'PUBLIC_URL/figures/down.svg'}\n              class:selected={sortState['true_label'].selected}\n              alt='sort logo'\n            >\n          </div>\n        </th>\n\n        <th class='predicted' on:click={sort('predicted_label')}>\n          <div class='predicted-div'>\n            Predicted\n            <img src={sortState['predicted_label'].up ? 'PUBLIC_URL/figures/up.svg' : 'PUBLIC_URL/figures/down.svg'}\n              class:selected={sortState['predicted_label'].selected}\n              alt='sort logo'\n            >\n          </div>\n        </th>\n\n        <th class='error' on:click={sort('logit_distance')}>\n          <div class='error-div'>\n            Error\n            <img src={sortState['logit_distance'].up ? 'PUBLIC_URL/figures/up.svg' : 'PUBLIC_URL/figures/down.svg'}\n              class:selected={sortState['logit_distance'].selected}\n              alt='sort logo'\n            >\n          </div>\n        </th>\n\n      </tr>\n    </thead>\n    <tbody>\n      {#each tableData as row}\n        <tr on:click={getInstance(this)}>\n          <td style='display: none;'>{row.id}</td>\n          <td class='text-row'>{row.sentence}</td>\n          <td class='number-row'>{row.true_label}</td>\n          <td class='number-row'>{row.predicted_label}</td>\n          <td class='number-row'>{Number((row.logit_distance).toFixed(2))}</td>\n        </tr>\n      {/each}\n    </tbody>\n  </table>\n</div>","<script>\n  import { onMount, createEventDispatcher } from 'svelte';\n  import { tableModalStore, instanceIDStore, currInstanceStore } from './store';\n  import EmbeddingView from './EmbeddingView.svelte';\n  import TableView from './TableView.svelte';\n\n  let modalComponent;\n\n  const dispatch = createEventDispatcher();\n  let modalInfo = {\n    show: false\n  };\n  let tempID = null;\n  currInstanceStore.subscribe(value => {tempID = value;});\n\n  tableModalStore.set(modalInfo);\n  tableModalStore.subscribe(value => {modalInfo = value});\n\n  const crossClicked = () => {\n    modalInfo.show = false;\n    tableModalStore.set(modalInfo);\n    // Dispatch the parent component\n    dispatch('xClicked', {preImage: modalInfo.preImage});\n  };\n\n  const okClicked = () => {\n    modalInfo.show = false;\n    instanceIDStore.set(tempID);\n    // Dispatch the parent component\n    dispatch('xClicked', {preImage: modalInfo.preImage});\n  };\n\n  onMount(() => {\n\n  });\n</script>\n\n<style>\n\n  .modal-container {\n    margin: 0 auto;\n    display: flex;\n    flex-direction: row-reverse;\n    align-items: center;\n  }\n\n  .modal-card {\n    width: '';\n    max-width: 700px;\n    max-height: 600px;\n    position: relative;\n  }\n\n  .modal-card-title {\n    font-size: 20px;\n  }\n\n  .modal-card-head {\n    padding: 15px 20px;\n  }\n\n  .modal-card-body {\n    display: flex;\n    flex-direction: row;\n    justify-content: flex-start;\n    align-items: flex-start;\n    padding: 0;\n  }\n\n  .modal-card-foot {\n    padding: 12px 20px;\n    justify-content: space-between;\n  }\n\n  .is-smaller {\n    font-size: 15px;\n    padding: 0.5em 0.8em;\n    max-height: 2.2em;\n  }\n\n  .embedding-div {\n    width: 350px;\n    height: 351px;\n    /* margin-top: 50px; */\n    margin-right: 20px;\n    z-index: 1;\n    background: white;\n    border-top-right-radius: 6px;\n    border-bottom-right-radius: 6px;\n    border-radius: 6px;\n  }\n\n  .center {\n    text-align: center;\n  }\n\n</style>\n\n\n<div class=\"modal-component\"\n  bind:this={modalComponent}>\n\n  <div class=\"modal\"\n    id=\"input-modal\"\n    class:is-active={modalInfo.show}>\n\n    <div class=\"modal-background\" on:click={crossClicked}></div>\n\n    <div class='modal-container'>\n\n      <div class=\"modal-card\">\n        <header class=\"modal-card-head\">\n          <p class=\"modal-card-title\">Select Input Sentence</p>\n          <button class=\"delete\" aria-label=\"close\" on:click={crossClicked}></button>\n        </header>\n\n        <section class=\"modal-card-body\">\n          \n          <TableView />\n\n        </section>\n\n        <footer class=\"modal-card-foot\">\n\n          <div class=\"button-container\">\n            <button class=\"button is-smaller\"\n              on:click={crossClicked}>\n              Cancel\n            </button>\n\n            <button class=\"button is-success is-smaller\"\n              on:click={okClicked}>\n              Add\n            </button>\n          </div>\n\n        </footer>\n\n      </div>\n\n      <div class='embedding-div'>\n        <header class=\"modal-card-head\">\n          <p class=\"modal-card-title center\">Instance Embedding</p>\n        </header>\n\n        <EmbeddingView />\n      </div>\n\n    </div>\n\n  </div>\n\n</div>","<script>\n  import Header from './Header.svelte';\n  import GraphView from './GraphView.svelte';\n  import Dependency from './dependency-view/Dependency.svelte';\n  import Atlas from './Atlas.svelte';\n  import AtlasSide from './AtlasSide.svelte';\n  import Tooltip from './TooltipGlobal.svelte';\n  import LowerAtlas from './LowerAtlas.svelte';\n  import TableModal from './TableModal.svelte';\n  import { graphViewConfigStore, instanceViewConfigStore,\n    mapViewConfigStore, lowerMapViewConfigStore, comparisonViewStore,\n    tooltipConfigStore, sideStore } from './store';\n  import { onMount } from 'svelte';\n  import * as d3 from 'd3';\n\n  // Set up the tooltip\n  let tooltip = null;\n  let atlasSVGWidth = null;\n  let atlasSVGHeight = null;\n  const headerHeight = 50;\n\n  let downButton;\n  let buttonDown = true;\n  let downButtonPos = {\n    width: 50,\n    height: 20\n  };\n\n  let tooltipConfig = {\n    show: false,\n    html: '1.23',\n    left: 0,\n    top: 0,\n    width: 80,\n    maxWidth: 80,\n    fontSize: '1em'\n  };\n\n  tooltipConfigStore.subscribe(value => {tooltipConfig = value;});\n\n  let sideInfo = {};\n  sideStore.subscribe(value => {sideInfo = value;});\n\n  let lowerContainerDIV = null;\n  let graphViewDIV = null;\n  let graphViewConfig = {\n    compWidth: null,\n    compHeight: null\n  };\n  \n  let originalInstanceViewHeight = null;\n  let instanceViewDIV = null;\n  let instanceViewConfig = {\n    compWidth: null,\n    compHeight: null\n  };\n\n  let comparisonViewConfig = {};\n  comparisonViewStore.subscribe(value => {\n    comparisonViewConfig = value;\n  });\n\n  let mapViewDIV = null;\n  let mapViewConfig = {\n    compWidth: null,\n    compHeight: null\n  };\n\n  let lowerMapViewDIV = null;\n  let lowerMapViewConfig = {\n    compWidth: null,\n    compHeight: null\n  };\n\n  /**\n   * Open the large map view.\n   */\n  const atlasOpened = () => {\n    mapViewDIV.style['display'] = '';\n    mapViewDIV.style['opacity'] = '1';\n  };\n\n  /**\n   * Close the large map view.\n   */\n  const atlasClosed = () => {\n\n    d3.select(mapViewDIV)\n      .select('.legend-container')\n      .style('display', 'none');\n\n    let svg =  d3.select(mapViewDIV)\n      .select('.atlas-svg-container')\n      .style('width', '100%')\n      .style('height', '100%')\n      .select('.atlas-svg-full');\n\n    atlasSVGWidth = svg.attr('width');\n    atlasSVGHeight = svg.attr('height');\n\n    svg.attr('width', null)\n      .attr('height', null)\n      .style('padding-top', '36px')\n      .style('padding-left', '8px')\n      .style('width', '100%')\n      .style('height', '100%');\n    \n    mapViewDIV.style['width'] = `${lowerMapViewConfig.compWidth}px`;\n    mapViewDIV.style['height'] = `${lowerMapViewConfig.compHeight}px`;\n    mapViewDIV.style['opacity'] = 0;\n\n    const transitionEnd = () => {\n      mapViewDIV.style['display'] = 'none';\n      mapViewDIV.style['visibility'] = '';\n      mapViewDIV.style['width'] = '1000px';\n      mapViewDIV.style['height'] = '100%';\n\n      d3.select(mapViewDIV)\n        .select('.legend-container')\n        .style('display', null);\n\n      d3.select(mapViewDIV)\n        .select('.atlas-svg-container')\n        .style('width', null)\n        .style('height', null)\n        .select('.atlas-svg-full')\n        .style('padding-top', null)\n        .style('padding-left', null)\n        .style('width', null)\n        .style('height', null)\n        .attr('width', atlasSVGWidth)\n        .attr('height', atlasSVGHeight);\n\n      mapViewDIV.removeEventListener('transitionend', transitionEnd);\n    };\n\n    mapViewDIV.addEventListener('transitionend', transitionEnd);\n  };\n\n  const downButtonClicked = () => {\n\n    // Enter comparison view\n    if (buttonDown) {\n      instanceViewDIV.style.height = '100%';\n      lowerContainerDIV.style.bottom = `-${graphViewConfig.compHeight - 10}px`;\n      downButton.style.top = `${originalInstanceViewHeight + headerHeight\n        - downButtonPos.height / 2 + graphViewConfig.compHeight - 10}px`;\n\n      comparisonViewConfig.height = Math.floor(instanceViewDIV.clientHeight) - 5;\n      comparisonViewConfig.inComparison = true;\n      comparisonViewStore.set(comparisonViewConfig);\n    } else {\n      // Exit comparison view\n      instanceViewDIV.style.height = '34%';\n      lowerContainerDIV.style.bottom = '0px';\n      downButton.style.top = `${originalInstanceViewHeight + headerHeight\n        - downButtonPos.height / 2}px`;\n\n      comparisonViewConfig.height = originalInstanceViewHeight - 5;\n      comparisonViewConfig.inComparison = false;\n      comparisonViewStore.set(comparisonViewConfig);\n    }\n\n    buttonDown = !buttonDown;\n  };\n\n  const comparisonOpenHandler = () => {\n    instanceViewDIV.style.height = '100%';\n    lowerContainerDIV.style.bottom = `-${graphViewConfig.compHeight - 10}px`;\n    downButton.style.top = `${originalInstanceViewHeight + headerHeight\n      - downButtonPos.height / 2 + graphViewConfig.compHeight - 10}px`;\n    buttonDown = false;\n\n    comparisonViewConfig.height = Math.floor(instanceViewDIV.clientHeight) - 5;\n    comparisonViewConfig.inComparison = true;\n    comparisonViewStore.set(comparisonViewConfig);\n  };\n\n  const comparisonCloseHandler = () => {\n    instanceViewDIV.style.height = '34%';\n    lowerContainerDIV.style.bottom = '0px';\n    downButton.style.top = `${originalInstanceViewHeight + headerHeight\n      - downButtonPos.height / 2}px`;\n    buttonDown = true;\n\n    comparisonViewConfig.height = originalInstanceViewHeight - 5;\n    comparisonViewConfig.inComparison = false;\n    comparisonViewStore.set(comparisonViewConfig);\n  };\n\n  onMount(() => {\n    graphViewConfig.compWidth = Math.floor(graphViewDIV.clientWidth);\n    graphViewConfig.compHeight = Math.floor(graphViewDIV.clientHeight);\n    graphViewConfigStore.set(graphViewConfig);\n\n    instanceViewConfig.compWidth = Math.floor(instanceViewDIV.clientWidth);\n    // Need to offset the horizontal scroll bar height\n    instanceViewConfig.compHeight = Math.floor(instanceViewDIV.clientHeight) - 5;\n    instanceViewConfigStore.set(instanceViewConfig);\n    originalInstanceViewHeight = Math.floor(instanceViewDIV.clientHeight);\n\n    lowerMapViewConfig.compWidth = Math.floor(lowerMapViewDIV.clientWidth);\n    lowerMapViewConfig.compHeight = Math.floor(lowerMapViewDIV.clientHeight);\n    lowerMapViewConfigStore.set(lowerMapViewConfig);\n\n    // Need to offset the padding\n    mapViewConfig.compWidth = Math.floor(mapViewDIV.clientWidth - 10);\n    mapViewConfig.compHeight = Math.floor(mapViewDIV.clientHeight - 10);\n    mapViewConfigStore.set(mapViewConfig);\n\n    // Hide the large map view\n    mapViewDIV.style['opacity'] = '0';\n    mapViewDIV.style['visibility'] = 'hidden';\n    atlasClosed();\n\n    // Position the down button\n    // console.log(headerHeight, downButtonPos.height);\n    downButton.style.top = `${Math.floor(instanceViewDIV.clientHeight) + headerHeight\n      - downButtonPos.height / 2}px`;\n    downButton.style.left = `${graphViewConfig.compWidth - downButtonPos.width / 2}px`;\n    downButton.style.width = `${downButtonPos.width}px`;\n    downButton.style.height = `${downButtonPos.height}px`;\n    downButton.style.visibility = 'visible';\n  });\n\n</script>\n\n<style type='text/scss'>\n  @import 'define';\n  \n  .main-content {\n    border-bottom: solid 1px $gray-border;\n    height: min(800px, calc(100vh - 50px));\n    width: 100vw;\n    display: flex;\n    box-sizing: border-box;\n    // overflow: hidden;\n    overflow: show;\n  }\n\n  .select-container {\n    border-right: solid 1px $gray-border;\n    // width: min(700px, 80%);\n    height: 100%;\n    display: flex;\n    overflow:scroll;\n    flex-direction: column;\n    box-sizing: border-box;\n  }\n\n  .attention-container {\n    //border: solid 1px $gray-border;\n    width: 100%;\n    height: 100%;\n    display: flex;\n    overflow: visible;\n    flex-direction: column;\n    box-sizing: border-box;\n    position: relative;\n  }\n\n  .instance-container {\n    width: 100%;\n    // height: 100%;\n    height: 34%;\n    overflow: hidden;\n    box-sizing: border-box;\n  }\n\n  .lower-container {\n    border-top: solid 1px $gray-border;\n    width: 100%;\n    height: 66%;\n    overflow: hidden;\n    box-sizing: border-box;\n    display: flex;\n    flex-direction: row;\n\n    background: hsla(0, 0%, 99%);\n    box-shadow: 0 -5px 5px hsla(0, 0%, 0%, 0.07);\n\n    position: absolute;\n    bottom: 0;\n\n    transition: bottom 300ms ease-in-out;\n  }\n\n  .graph-container {\n    //border: solid 1px $gray-border;\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n    box-sizing: border-box;\n    position: relative;\n  }\n\n  .lower-atlas-container {\n    width: 60%;\n    height: 100%;\n    overflow: hidden;\n    box-sizing: border-box;\n    border-left: solid 1px $gray-border;\n  }\n\n  .atlas-container {\n    width: 1000px;\n    max-width: 100%;\n    height: 100%;\n    position: absolute;\n    right: 0;\n    bottom: 0;\n    overflow: hidden;\n    z-index: 11;\n    padding: 10px 0 0 10px;\n    transition: width 500ms ease-in-out, height 500ms ease-in-out, opacity 500ms ease-in-out;\n  }\n\n  .atlas-sidebar {\n    justify-self: flex-end;\n    background: hsl(0, 0%, 98%);\n    box-shadow: -3px 0 5px hsla(0, 0%, 0%, 0.1);\n    position: absolute;\n    right: 989px;\n    top: 300px;\n    width: 400px;\n    height: 450px;\n  }\n\n  .hidden {\n    visibility: hidden;\n  }\n\n  :global(.atlas-container.closed) {\n    transition: right 700ms ease-in-out, background-color 100ms ease-in-out 600ms;\n  }\n\n  .down-button {\n    position: absolute;\n    width: 50px;\n    height: 8px;\n    font-size: 0.7em;\n    visibility: hidden;\n    border-radius: 15px;\n    z-index: 10;\n    cursor: pointer;\n\n    border: 1px solid $gray-border;\n    background: white;\n    box-shadow: 0px 0px 6px hsla(0, 0%, 0%, 0.2);\n    transition: background 300ms ease-in-out, top 300ms ease-in-out;\n\n    &:hover {\n      background: change-color($brown-icon, $lightness:90%);\n    }\n  }\n\n  .icon-wrapper {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: center;\n    width: 100%;\n    height: 100%;\n    opacity: 1;\n\n    svg {\n      height: 20px;\n      color: $brown-icon;\n    }\n  }\n\n  .up-down {\n    transform: rotate(180deg);\n  }\n\n</style>\n\n<div class='main'>\n\n  <Header />\n\n  <Tooltip bind:this={tooltip}/>\n \n  <div class='main-content'>\n    <div class='select-container'>\n\n    </div>\n\n    <div class='attention-container'>\n      <!-- Instance View -->\n      <div class='instance-container' bind:this={instanceViewDIV}>\n        <Dependency on:close={comparisonCloseHandler} on:open={comparisonOpenHandler}/>\n      </div>\n\n      \n      <div class='lower-container' bind:this={lowerContainerDIV}>\n        <!-- Graph View -->\n        <div class='graph-container' bind:this={graphViewDIV} >\n          <GraphView />\n        </div>\n\n        <div class='lower-atlas-container' bind:this={lowerMapViewDIV}>\n          <LowerAtlas on:open={atlasOpened}/>\n        </div>\n      </div>\n\n\n      <!-- Map view -->\n      <div class='atlas-container' style='visibility=hidden' bind:this={mapViewDIV}>\n        <Atlas on:close={atlasClosed}/>\n      </div>\n\n      <div class='atlas-sidebar' class:hidden={!sideInfo.show}>\n        <AtlasSide />\n      </div>\n\n    </div>\n\n    <TableModal on:xClicked={() => {}} on:urlTyped={() => {}}/>\n\n    <div class='down-button' bind:this={downButton}>\n      <div class='icon-wrapper' on:click={downButtonClicked}>\n        <svg class='icon-down' class:up-down={!buttonDown} viewBox='0 0 512 512'>\n          <path fill='none' stroke='currentColor' stroke-linecap='round'\n            stroke-linejoin='round' stroke-width='80' d='M112 184l144 144 144-144'/>\n        </svg>\n      </div>\n    </div>\n\n  </div>\n\n</div>","import App from './App.svelte';\n\nconst app = new App({\n\ttarget: document.body,\n\tprops: {\n\t}\n});\n\nexport default app;"],"names":["noop","run","fn","blank_object","Object","create","run_all","fns","forEach","is_function","thing","safe_not_equal","a","b","append","target","node","appendChild","insert","anchor","insertBefore","detach","parentNode","removeChild","destroy_each","iterations","detaching","i","length","d","element","name","document","createElement","svg_element","createElementNS","text","data","createTextNode","space","listen","event","handler","options","addEventListener","removeEventListener","attr","attribute","value","removeAttribute","getAttribute","setAttribute","set_data","wholeText","set_style","key","important","style","setProperty","toggle_class","toggle","classList","current_component","set_current_component","component","get_current_component","Error","onMount","$$","on_mount","push","createEventDispatcher","type","detail","callbacks","e","createEvent","initCustomEvent","custom_event","slice","call","dirty_components","binding_callbacks","render_callbacks","flush_callbacks","resolved_promise","Promise","resolve","update_scheduled","add_render_callback","flushing","seen_callbacks","Set","flush","update","pop","callback","has","add","clear","fragment","before_update","dirty","p","ctx","after_update","outroing","transition_in","block","local","delete","transition_out","o","outros","c","create_component","mount_component","on_destroy","m","new_on_destroy","map","filter","destroy_component","make_dirty","then","fill","init","instance","create_fragment","not_equal","props","parent_component","prop_values","bound","context","Map","skip_bound","ready","ret","rest","hydrate","nodes","Array","from","childNodes","children","l","intro","SvelteComponent","[object Object]","this","$destroy","index","indexOf","splice","$$props","obj","$$set","keys","subscriber_queue","writable","start","stop","subscribers","set","new_value","run_queue","s","subscribe","invalidate","subscriber","graphViewConfigStore","embeddingViewConfigStore","tableViewConfigStore","instanceViewConfigStore","mapViewConfigStore","lowerMapViewConfigStore","tooltipConfigStore","show","html","left","top","width","maxWidth","fontSize","comparisonViewStore","inComparison","height","currInstanceStore","instanceIDStore","hoverTokenStore","wordToSubwordMapStore","attentionHeadColorStore","modalStore","attention","layer","head","tableModalStore","sideStore","mapHeadStore","NaN","f","delta","compare","x","lo","hi","mid","ascending","ascendingComparator","center","right","bisectRight","bisector","values","valueof","min","max","undefined","e10","Math","sqrt","e5","e2","tickIncrement","count","step","power","floor","log","LN10","error","pow","prototype","epsilon","translateX","translateY","y","number","scale","offset","bandwidth","round","entering","__axis","axis","orient","tickArguments","tickValues","tickFormat","tickSizeInner","tickSizeOuter","tickPadding","k","transform","ticks","apply","domain","format","identity","spacing","range","range0","range1","position","copy","selection","path","selectAll","tick","order","tickExit","exit","tickEnter","enter","line","select","merge","transition","isFinite","remove","each","_","arguments","tickSize","axisRight","dispatch","t","n","test","Dispatch","parseTypenames","typenames","types","trim","split","hasOwnProperty","get","concat","constructor","on","typename","T","that","args","xhtml","svg","xlink","xml","xmlns","prefix","namespaces","creatorInherit","ownerDocument","uri","namespaceURI","documentElement","creatorFixed","fullname","namespace","none","selector","querySelector","empty","querySelectorAll","matches","childMatcher","find","childFirst","firstElementChild","EnterNode","parent","datum","_next","_parent","__data__","bindIndex","group","groupLength","dataLength","bindKey","keyValue","nodeByKeyValue","keyValues","attrRemove","attrRemoveNS","removeAttributeNS","attrConstant","attrConstantNS","setAttributeNS","attrFunction","v","attrFunctionNS","defaultView","styleRemove","removeProperty","styleConstant","priority","styleFunction","styleValue","getPropertyValue","getComputedStyle","propertyRemove","propertyConstant","propertyFunction","classArray","string","ClassList","_node","_names","classedAdd","names","list","classedRemove","classedTrue","classedFalse","classedFunction","textRemove","textContent","textConstant","textFunction","htmlRemove","innerHTML","htmlConstant","htmlFunction","raise","nextSibling","lower","previousSibling","firstChild","constantNull","selection_cloneShallow","clone","cloneNode","selection_cloneDeep","onRemove","__on","j","listener","onAdd","contextListener","dispatchEvent","params","window","CustomEvent","initEvent","bubbles","cancelable","dispatchConstant","dispatchFunction","child","next","join","contains","root","Selection","groups","parents","_groups","_parents","sourceEvent","currentTarget","ownerSVGElement","createSVGPoint","point","clientX","clientY","matrixTransform","getScreenCTM","inverse","getBoundingClientRect","rect","clientLeft","clientTop","pageX","pageY","array","nopropagation","stopImmediatePropagation","preventDefault","view","noevent","__noselect","MozUserSelect","yesdrag","noclick","setTimeout","subgroups","subnode","subgroup","arrayAll","selectorAll","selectChild","match","childFind","selectChildren","childrenFilter","matcher","bind","constant","enterGroup","updateGroup","exitGroup","previous","i0","i1","_enter","_exit","sparse","onenter","onupdate","onexit","groups0","groups1","m0","m1","merges","group0","group1","compareDocumentPosition","sort","compareNode","sortgroups","sortgroup","size","getAttributeNS","property","classed","creator","before","deep","Symbol","iterator","DragEvent","subject","identifier","active","dx","dy","defineProperties","enumerable","configurable","defaultFilter","ctrlKey","button","defaultContainer","defaultSubject","defaultTouchable","navigator","maxTouchPoints","factory","extend","definition","Color","darker","brighter","reI","reN","reP","reHex","reRgbInteger","RegExp","reRgbPercent","reRgbaInteger","reRgbaPercent","reHslPercent","reHslaPercent","named","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","color_formatHex","rgb","formatHex","color_formatRgb","formatRgb","color","toLowerCase","exec","parseInt","rgbn","Rgb","rgba","hsla","r","g","rgbConvert","opacity","rgb_formatHex","hex","rgb_formatRgb","isNaN","toString","h","Hsl","hslConvert","hsl2rgb","m2","define","channels","assign","displayable","formatHsl","radians","PI","degrees","Xn","Zn","t0","t1","t2","labConvert","Lab","Hcl","hcl2lab","z","rgb2lrgb","xyz2lab","lab2xyz","lrgb2rgb","hclConvert","atan2","hcl","cos","sin","gamma","nogamma","exponential","linear","rgbGamma","end","colorRgb","genericArray","nb","na","Date","setTime","reA","reB","source","am","bm","bs","bi","lastIndex","q","one","zero","date","ArrayBuffer","isView","DataView","isNumberArray","numberArray","isArray","valueOf","object","svgNode","rotate","skewX","scaleX","scaleY","atan","interpolateTransform","parse","pxComma","pxParen","degParen","xa","ya","xb","yb","translate","interpolateTransformCss","DOMMatrix","WebKitCSSMatrix","isIdentity","decompose","interpolateTransformSvg","baseVal","consolidate","matrix","cosh","exp","taskHead","taskTail","zoomRho","rho","rho2","rho4","zoom","p0","p1","S","ux0","uy0","w0","ux1","uy1","w1","d2","d1","b0","b1","r0","r1","coshr0","u","tanh","sinh","duration","SQRT2","_1","_2","frame","timeout","interval","clockLast","clockNow","clockSkew","clock","performance","now","setFrame","requestAnimationFrame","clearNow","Timer","_call","_time","timer","delay","time","restart","wake","timerFlush","Infinity","sleep","nap","poke","clearTimeout","clearInterval","setInterval","elapsed","TypeError","emptyOn","emptyTween","id","timing","schedules","__transition","self","tween","schedule","state","ease","tweenRemove","tween0","tween1","tweenFunction","tweenValue","_id","interpolateNumber","interpolateRgb","interpolateString","interpolate","value1","string00","interpolate0","string1","string0","string10","attrInterpolate","attrInterpolateNS","attrTweenNS","_value","attrTween","delayFunction","delayConstant","durationFunction","durationConstant","easeConstant","onFunction","on0","on1","sit","every","styleInterpolate","styleTween","textInterpolate","textTween","Transition","_name","newId","selection_prototype","quadInOut","cubicInOut","inherit","id0","id1","styleNull","listener0","styleMaybeRemove","removeFunction","easeVarying","reject","cancel","interrupt","defaultTiming","easeCubicInOut","pi","tau","tauEpsilon","Path","_x0","_y0","_x1","_y1","responseJson","response","ok","status","statusText","json","input","fetch","tree","xm","ym","xp","yp","bottom","_root","leaf","x0","y0","x1","y1","_x","_y","defaultX","defaultY","quadtree","Quadtree","addAll","leaf_copy","moveTo","closePath","lineTo","quadraticCurveTo","bezierCurveTo","x2","y2","arcTo","x21","y21","x01","y01","l01_2","abs","x20","y20","l21_2","l20_2","l21","l01","acos","t01","t21","arc","a0","a1","ccw","cw","da","w","treeProto","random","vx","vy","nodeById","nodeId","links","strengths","distances","bias","strength","link","distance","force","alpha","jiggle","initialize","initializeStrength","initializeDistance","_nodes","_random","cover","xz","yz","visit","extent","radius","x3","y3","quads","Quad","retainer","removeAll","visitAfter","initialAngle","simulation","alphaMin","alphaDecay","alphaTarget","velocityDecay","forces","stepper","lcg","fx","fy","initializeNodes","angle","initializeForce","randomSource","closest","formatDecimalParts","toExponential","coefficient","prefixExponent","re","formatSpecifier","specifier","FormatSpecifier","align","sign","symbol","comma","precision","exponent","%","toFixed","toLocaleString","replace","toPrecision","formatRounded","X","toUpperCase","locale","formatPrefix","prefixes","grouping","thousands","Number","substring","reverse","currencyPrefix","currency","currencySuffix","decimal","numerals","formatNumerals","String","percent","minus","nan","newFormat","formatTypes","suffix","formatType","maybeSuffix","valuePrefix","valueSuffix","valueNegative","out","formatTrim","charCodeAt","padding","sum","hierarchy","mapChildren","objectChildren","childs","Node","depth","eachBefore","computeHeight","copyData","required","formatLocale","eachAfter","ancestor","aNodes","ancestors","bNodes","leastCommonAncestor","descendants","leaves","current","preroot","ambiguous","defaultId","defaultParentId","parentId","defaultSeparation","nextLeft","nextRight","moveSubtree","wm","wp","shift","change","nextAncestor","vim","TreeNode","A","separation","nodeSize","treeRoot","firstWalk","secondWalk","sizeNode","tx","kx","ky","siblings","executeShifts","midpoint","vip","vop","vom","sip","sop","sim","som","apportion","initRange","unit","normalize","bimap","d0","polymap","bisect","clamp","unknown","transformer","untransform","piecewise","output","interpolateValue","rescale","clamper","invert","rangeRound","interpolateRound","continuous","step0","step1","tickStep","precisionPrefix","precisionRound","precisionFixed","linearish","ceil","nice","prestep","maxIter","halfPi","asin","arcInnerRadius","innerRadius","arcOuterRadius","outerRadius","arcStartAngle","startAngle","arcEndAngle","endAngle","arcPadAngle","padAngle","intersect","x10","y10","x32","y32","cornerTangents","rc","ox","oy","x11","y11","x00","y00","D","cx0","cy0","cx1","cy1","dx0","dy0","dx1","dy1","cx","cy","cornerRadius","padRadius","buffer","a01","a11","a00","a10","da0","da1","ap","rp","rc0","rc1","oc","ax","ay","bx","by","kc","lc","centroid","linkSource","linkTarget","curveVertical","linkVertical","curve","pointX","pointY","argv","ZoomEvent","Transform","applyX","applyY","location","invertX","invertY","rescaleX","rescaleY","defaultExtent","SVGElement","hasAttribute","viewBox","clientWidth","clientHeight","defaultTransform","__zoom","defaultWheelDelta","deltaY","deltaMode","defaultConstrain","translateExtent","autoAttention","textOrder","manyBody","collideRadius","minNodeRadius","radialCurveAlpha","weightThresholdMin","linkColor","linkHoverColor","graphViewCompConfig","instanceID","curLayer","curHead","mapHead","graphSVG","graphData","saliencyData","wordToSubwordMap","SVGWidth","SVGHeight","curHoverToken","SVGPadding","tokenSize","originalNodes","curLinkI","weightThresholdGap","weightThreshold","linkArrays","intermediateNodeMap","linkWidth","nodeRadiusScale","settingIconActive","attentionData","d3.easeCubicInOut","layoutOptions","radial","grid","config","borderConstraint","showHiddenLink","showHiddenNode","defaultLayout","forceStrength","currentLayout","num","EPSILON","padZeroLeft","digit","drag","mousedownx","mousedowny","mousemoving","touchending","container","touchable","gestures","listeners","clickDistance2","mousedowned","touchstarted","touchmoved","touchended","gesture","beforestart","mousemoved","mouseupped","nodrag","mouse","touches","changedTouches","touch","pointer","clickDistance","d3.drag","d3.select","originalTarget","curRadius","hidden","saliency","bindSlider","defaultValue","slider","sliderValue","weightThresholdUpdated","bindSelect","selectOption","newLayoutValue","initForceSim","initRadialSim","initGridSim","updateNodeRadius","updateLayerHead","distanceMin2","distanceMax2","theta2","accumulate","quad","weight","distanceMin","distanceMax","theta","d3.forceManyBody","sx","sy","d3.forceCenter","d3.forceLink","hiddenLinks","radii","xi","yi","ri","ri2","prepare","rj","d3.forceCollide","d3.forceY","curLen","curAngle","d3.forceX","curGridRowSize","gridColumnSize","rowLength","gridRowSize","columnLength","console","xs","ys","gridLinks","linkLines","biLinks","animationTime","createGraphLinks","curLinks","nodeByID","nodeIndexArray","curNodes","curHiddenLinks","hiddenLink","curBiLinks","curBilink","selfLoop","intermediate","curGridLinks","graphNodeDoubleClickHandler","nodeGroup","linkLineGroup","nodeIndices","curID","curI","initCurrentSim","simulationTick","sCoord","tCoord","iCoord","interLen","iVec","iVecNorm","iVecClock90","iVecCounterClock90","leftControl","rightControl","halfLen","modTCoord","vecLen","tickLinkForce","modTarget","modSource","tickLinkRadial","tickLinkGrid","coord","tickNodeForce","initGraph","tokenCount","curCount","token","tokenIDName","curWeightThreshold","linkResult","allSaliencyScores","d3.scaleLinear","d3.extent","largestAbs","d3.max","rightColor","leftColor","nodeSaliencyColorScale","d3.rgb","attentionWeights","nodeGroups","highLightLink","dehighlightLink","legendGroup","legendPos","legendGradientDef","legendScale","d3.axisRight","drawSaliencyLegend","d3.hcl","d3.forceSimulation","drawGraph","layerSelectOption","headSelectOption","newLayerValue","newHeadValue","bindLayerHeadSelect","createGraphData","tokenID","hoverToken","includes","curAttention","curAttentionData","curPredictedLabel","renderGraph","d3.json","tokens","compHeight","compWidth","getTokenWidth","textTokenWidths","textTokenHeight","hiddenTextGroup","hiddenTexts","bbox","getBBox","isSpecialToken","updateSVGWidth","drawParagraph","saliencies","textTokenPadding","tokenNodeMouseover","tokenNodeMouseleave","meta","tokenColorScale","textTokenSize","containerWidth","rowGap","cls","curPos","tokenNum","curLineLength","legentGradientDef","tokenXs","initWordToSubwordMap","depList","words","curX","fullWidth","tokenGroup","rankedDepList","gap","middleX","sourceX","targetX","tokenRelCount","rankedDepMap","relation","iLow","iHigh","curRank","reduce","arcGroup","pathHeight","pathCurve","isMoved","modalInfo","attentionHeadColor","getDependencyListFromAttention","attentions","threshold","wordToSubwordIndexes","attentionIndexToWord","curIndexes","nextWord","maxAttentionMap","curMaxWord","curMaxAttention","curRow","subWordIndexes","curSum","ws","curWordAttention","createRankedDepMap","maxAttentionLinks","drawBottomDependencyLine","attentionGroup","tokenHeight","firstRow","existingLinkSet","baseY","getWordAttention","attentionMap","curWord","createAttentionArcs","attentionArcs","arcs","drawAttentionArc","attentionGroupID","minHeight","maxHeight","arcYScale","arcWidthScale","xr","yr","arcButtonClicked","nameGroup","rowNum","d3.selectAll","moveY","curItem","addButtons","symbolMouseover","symbolMouseleave","radialSymbol","radialButtonClicked","arcSymbol","drawDependencyComparison","topHeads","depTokens","oldTranslate","oldTranslateX","oldTranslateY","moveX","headNameGroup","controlPanelY","oldNodeGroupHeight","arcGroupHeight","newTranslateY","preTranslateY","preHeight","newGroup","nodeID","dataset","curHeight","HighAttention","svgVirtualLength","modalComponent","donut","markerDef","drawDonut","innerWidth","tempSVG","body","result","inRadius","entries","tokenPos","linkWidthScale","linkOpacityScale","textTokenGroup","textClone","innerBox","radiusGrow","dd","controlP1","controlP2","modalCard","pos1","pos2","pos3","pos4","elementDrag","offsetTop","offsetLeft","closeDragElement","onmouseup","onmousemove","onmousedown","dragElement","drawTree","tokenNodeMouseoverTree","stratify","nodeKey","nodeByKey","d3.stratify","d3.tree","treeGroup","rootLinks","vertical","d3.linkVertical","linkTexts","curNode","linkHoverGradient1","linkHoverGradient2","linkHoverGradient3","headOrder","relations","selectedRelations","instanceViewConfig","SVGInitialized","inComparisonView","comparisonViewConfig","comparisonButtonClickedHandler","tableModalInfo","dependency","dependencyViewInitialized","saliencyViewInitialized","treeViewInitialized","showRelationCheckboxes","initSVG","arrowMarker","gradient","getInterestingHeads","removeDependencyComparison","initAttentionData","potentialHeads","acc","initData","dependencyFile","saliencyFile","orderFile","relationCounter","attentionFile","results","createGraph","syntactic","semantic","importance","curRel","rel","checked","entry","atlasData","tooltipConfig","sideInfo","viewContainer","layerNum","headNum","layerNameWidth","availableWidth","availableHeight","availableLength","gridLength","maxOutRadius","adjustedRowGap","adjustedColGap","donutGroup","scales","hueScale","lightnessScale","outRadiusScale","ringRadiusScale","donuts","curWidth","tooltipCenterX","tooltipCenterY","confidence","curDonut","preDonut","outRadius","ringRadius","maxLength","d3.arc","atlasFile","tooltip","d3.easeQuadInOut","attentionHeadColors","tooltipShow","tooltipHtml","tooltipWidth","toolTipFontSize","tooltipMaxWidth","selectedCircleStrokeColor","circleOpacity","embeddingViewConfig","embeddingSVG","embeddingData","selectedInstanceId","previousSelectedInstanceId","tooltipLeft","tooltipTop","sst2LabelColorMap","0","1","sst2Labels","drawEmbeddingsPlot","touchstarting","touchfirst","constrain","wheelDelta","scaleExtent","interpolateZoom","touchDelay","tapDistance","wheeled","dblclicked","clean","__zooming","Gesture","taps","wheel","wheelidled","dragDisable","moved","dragEnable","k1","shiftKey","started","touch0","touch1","l0","l1","dp","dl","hypot","collection","scaleBy","scaleTo","translateBy","translateTo","emit","d3.zoom","coords","label","transferEmbeddingPointHighlights","scrollY","sentence","showTooltip","highlightCircleOnMouseover","unhighlightCircleOnMouseout","uniqueLabels","rectangleWidth","legend","renderEmbeddings","true_label","predicted_label","logit_distance","up","selected","selectedRowColor","tableViewConfig","tableData","currHighlightedRow","mostRecentColumnSortCriterion","isEmbeddingViewUpdate","sortState","sortBy","col","column","sortModifier","item","unshift","getElementsByTagName","getInstance","row","cells","innerText","rowIndex","tempID","preImage","downButton","atlasSVGWidth","atlasSVGHeight","buttonDown","downButtonPos","lowerContainerDIV","graphViewDIV","graphViewConfig","originalInstanceViewHeight","instanceViewDIV","mapViewDIV","mapViewConfig","lowerMapViewDIV","lowerMapViewConfig","atlasClosed","transitionEnd","visibility"],"mappings":"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"}